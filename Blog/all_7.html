<!doctype html>
<html class="no-js" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>
    
  æå°äº‰
  
  </title>
  
  
  <link href="atom.xml" rel="alternate" title="æå°äº‰" type="application/atom+xml">
    <link rel="stylesheet" href="asset/css/foundation.min.css" />
    <link rel="stylesheet" href="asset/css/docs.css" />
    <script src="asset/js/vendor/modernizr.js"></script>
    <script src="asset/js/vendor/jquery.js"></script>
 
<script type="text/javascript">
  function before_search(){
    var searchVal = 'site:www.citynight.cn/Blog ' + document.getElementById('search_input').value;
    document.getElementById('search_q').value = searchVal;
    return true;
  }
</script>
  </head>
  <body class="antialiased hide-extras">
    
    <div class="marketing off-canvas-wrap" data-offcanvas>
      <div class="inner-wrap">


<nav class="top-bar docs-bar hide-for-small" data-topbar>


  <section class="top-bar-section">
  <div class="row">
      <div style="position: relative;width:100%;"><div style="position: absolute; width:100%;">
        <ul id="main-menu" class="left">
        
        <li id=""><a target="self" href="index.html">Home</a></li>
        
        <li id=""><a target="_self" href="archives.html">Archives</a></li>
        
        </ul>

        <ul class="right" id="search-wrap">
          <li>
<form target="_blank" onsubmit="return before_search();" action="https://google.com/search" method="get">
    <input type="hidden" id="search_q" name="q" value="" />
    <input tabindex="1" type="search" id="search_input"  placeholder="Search"/>
</form>
</li>
          </ul>
      </div></div>
  </div>
  </section>

</nav>

        <nav class="tab-bar show-for-small">
  <a href="javascript:void(0)" class="left-off-canvas-toggle menu-icon">
    <span> &nbsp; æå°äº‰</span>
  </a>
</nav>

<aside class="left-off-canvas-menu">
      <ul class="off-canvas-list">
        
        <li><a target="self" href="index.html">Home</a></li>
        
        <li><a target="_self" href="archives.html">Archives</a></li>
        

    <li><label>Categories</label></li>

        
            <li><a href="%E5%8E%9F%E7%90%86%E6%8E%A2%E7%A9%B6.html">åŸç†æ¢ç©¶</a></li>
        
            <li><a href="%E6%8A%80%E5%B7%A7.html">æŠ€å·§</a></li>
        
            <li><a href="%E6%95%99%E7%A8%8B.html">æ•™ç¨‹</a></li>
        
            <li><a href="%E9%81%87%E5%88%B0Bug.html">é‡åˆ°Bug</a></li>
        
            <li><a href="%E6%9D%82%E8%AE%B0.html">æ‚è®°</a></li>
        
            <li><a href="Swift.html">Swift</a></li>
        
            <li><a href="C/C++.html">C/C++</a></li>
        
            <li><a href="Linux.html">Linux</a></li>
        
            <li><a href="Documentation.html">Documentation</a></li>
        
            <li><a href="Java.html">Java</a></li>
        
            <li><a href="LeetCode.html">LeetCode</a></li>
         

      </ul>
    </aside>

<a class="exit-off-canvas" href="#"></a>


        <section id="main-content" role="main" class="scroll-container">
        
       

 <script type="text/javascript">
	$(function(){
		$('#menu_item_index').addClass('is_active');
	});
</script>
<div class="row">
	<div class="large-8 medium-8 columns">
		<div class="markdown-body home-categories">
		
			<div class="article">
                <a class="clearlink" href="15058021769287.html">
                
                  <h1>ä¼˜åŒ–iPad 2 æ€»ç»“</h1>
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
                        	<p>å®æ–½åé¦ˆé¡¹ç›®åœ¨<code>iPad 2</code>ä¸Šæ¯”è¾ƒå¡é¡¿,æ‰€ä»¥è¦å¯¹é¡¹ç›®è¿›è¡Œä¼˜åŒ–.</p>

<h2 id="toc_0">ä¼˜åŒ–é›†ä¸­ç‚¹ä¸ºcollectionView</h2>

<p>é¡¹ç›®æœ‰ä¸¤ç§æ˜¾ç¤ºæ•ˆæœ,ä¸€ç§æ˜¯å›¾ç‰‡æ¨¡å¼,ä¸€ç§æ˜¯çº¯æ–‡å­—æ¨¡å¼. çº¯æ–‡å­—æ¨¡å¼æ»‘åŠ¨èµ·æ¥è¿˜ä¸é”™,å›¾ç‰‡æ¨¡å¼å°±æ¯”è¾ƒå¡äº†.ç»åˆ†æ,é¡¹ç›®åšäº†éƒ¨åˆ†ä¿®æ”¹,ä½¿æ»‘åŠ¨æ•ˆæœæ¯”è¾ƒé¡ºç•….</p>

<ul>
<li>æ …æ ¼åŒ–: ç›®çš„æ˜¯ç¦»å±æ¸²æŸ“,ä¸è¿‡è¿˜æ˜¯å¡é¡¿</li>
</ul>

<pre><code class="language-text">    self.layer.shouldRasterize = true
    self.layer.rasterizationScale = UIScreen.main.scale
    self.layer.drawsAsynchronously = true
</code></pre>

<ul>
<li>Color Blended Layers å¤„ç†
<img src="media/15058021769287/15058027400968.jpg" alt=""/>
å‘ç°éƒ¨åˆ†UILabelå­˜åœ¨é—®é¢˜,è§£å†³æ–¹æ¡ˆ:
<img src="media/15058021769287/15058028256147.jpg" alt=""/></li>
</ul>

<p>æ·»åŠ  <code>label.layer.masksToBounds = true</code>,æ•ˆæœè¿˜æ˜¯ä¸è¡Œ.</p>

<ul>
<li> ä½¿ç”¨iOSæœ€æ–°çš„API<code>UICollectionViewDataSourcePrefetching</code></li>
</ul>

<pre><code class="language-text">extension DishesViewController: UICollectionViewDataSourcePrefetching {
    func collectionView(_ collectionView: UICollectionView, prefetchItemsAt indexPaths: [IndexPath]) {
        let urls = indexPaths.flatMap { (index) -&gt; URL? in
            let big = dishsArray[index.section]
            let key = big.keys.first!
            let small = big[key]!
            let item = small[index.item]
            return URL(string: item.dishModel.smallImageUrl)
        }
        
        ImagePrefetcher(urls: urls).start()
    }
}

</code></pre>

<ul>
<li>ä¸Šé¢ä¼˜åŒ–åæ•ˆæœä¸æ˜¯å¾ˆæ˜æ˜¾,æœ€åé‡‡å–äº†<strong>ä»¥ç©ºé—´æ¢æ—¶é—´</strong>çš„æ–¹å¼ä¼˜åŒ–å›¾ç‰‡åˆ—è¡¨é¡µ<br/>
æå‰ç”¨<code>Kingfisher</code>ä¸‹è½½å›¾ç‰‡(è¿™ä¸ªè¿‡ç¨‹åŸå…ˆå°±æœ‰)ä¸‹è½½è¿‡å›¾ç‰‡ä¹Ÿåšäº†ä¸å†ä¸‹è½½çš„å¤„ç†,ç”±äºå›¾ç‰‡è¿‡å¤šå¯¼è‡´ä¸ä¼šæœ‰å¤ªå¤šåˆ—è¡¨é¡µçš„å›¾ç‰‡ç¼“å­˜ä¸­å†…å­˜ä¸­. é’ˆå¯¹è¿™ä¸ªé—®é¢˜,æˆ‘é‡‡ç”¨äº†æ¯æ¬¡è¿›å…¥appå°±æŠŠåˆ—è¡¨é¡µçš„å›¾ç‰‡ä½¿ç”¨<code>NSCache&lt;NSString, UIImage&gt;</code>ç¼“å­˜èµ·æ¥,æ•ˆæœå¾ˆæ˜æ˜¾.</li>
</ul>

<h2 id="toc_1">ç›®å‰è¿˜å­˜åœ¨é—®é¢˜</h2>

<p>ä¸‹è½½å›¾ç‰‡å¤±è´¥ç‡è¿˜æ˜¯å¾ˆé«˜çš„,æˆ‘è®¾ç½®çš„è¶…æ—¶æ—¶é—´ä¸º60s <code>downloader.downloadTimeout = 60</code> ä½†æ˜¯è¿˜æ˜¯æœ‰å¾ˆå¤šå›¾ç‰‡ä¸‹è½½è¶…æ—¶,å¯¼è‡´é¦–æ¬¡åŠ è½½çš„æ—¶å€™éœ€è¦ä¸‹è½½å›¾ç‰‡æ»‘åŠ¨å¡é¡¿.<br/>
ç”±äº<code>NSCache</code>çš„ç‰¹æ®Šæ€§,ä¸èƒ½ä¿è¯å›¾ç‰‡ä¸€ç›´åœ¨å†…å­˜ä¸­,æ­£åœ¨è€ƒè™‘æ˜¯å¦æ›¿æ¢æˆDictionary,ç„¶åè‡ªå·±å¤„ç†å†…å­˜è­¦å‘Š.è¿™ä¸ªç¨åéªŒè¯ä¸‹.</p>

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
                  
                    <span class="date">2017/9/19</span>
                    <span>posted in&nbsp;</span> 
          				  
          					    <span class="posted-in"><a href='%E6%8A%80%E5%B7%A7.html'>æŠ€å·§</a></span>
          				   
                    

                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
			<div class="article">
                <a class="clearlink" href="15052686192490.html">
                
                  <h1>æŒ‡é’ˆ</h1>
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
                        	<h2 id="toc_0">1. æŒ‡é’ˆæ˜¯ä¸€ç§æ•°æ®ç±»å‹</h2>

<ol>
<li>æŒ‡é’ˆä¹Ÿæ˜¯ä¸€ç§å˜é‡,å æœ‰å†…å­˜ç©ºé—´,ç”¨æ¥ä¿å­˜å†…å­˜åœ°å€  æŒ‡é’ˆçš„å¤§å°--&gt; 32ä½: 4  64ä½: 8</li>
<li><p><code>*p</code> æ“ä½œå†…å­˜</p>
<pre><code class="language-text">åœ¨æŒ‡é’ˆå£°æ˜æ—¶,`*`å·è¡¨ç¤ºæ‰€å£°æ˜çš„å˜é‡ä¸ºæŒ‡é’ˆ
åœ¨æŒ‡é’ˆä½¿ç”¨æ—¶,`*`å·è¡¨ç¤º**æ“ä½œ**æŒ‡é’ˆæ‰€æŒ‡å‘çš„å†…å­˜ç©ºé—´ä¸­çš„å€¼<br/>
`*p`ç›¸å½“äºé€šè¿‡åœ°å€(på˜é‡çš„å€¼)æ‰¾åˆ°ä¸€å—å†…å­˜,ç„¶åæ“ä½œå†…å­˜<br/>
`*p`æ”¾åœ¨ç­‰å·å·¦è¾¹èµ‹å€¼(ç»™å†…å­˜èµ‹å€¼)<br/>
`*p`æ”¾åœ¨ç­‰å·å³è¾¹å–å€¼(ä»å†…å­˜è·å–å€¼)
</code></pre></li>
<li><p>æŒ‡é’ˆå˜é‡å’Œå®ƒæŒ‡å‘çš„å†…å­˜å—æ˜¯ä¸¤ä¸ªä¸åŒçš„æ¦‚å¿µ</p>
<pre><code class="language-text">å«ä¹‰1: ç»™pèµ‹å€¼ p = 0x1111; åªä¼šæ”¹å˜æŒ‡é’ˆå˜é‡å€¼,ä¸ä¼šæ”¹å˜æ‰€æŒ‡çš„å†…å®¹; p = p+1
å«ä¹‰2: ç»™`*p`èµ‹å€¼ *p = &#39;a&#39;;ä¸ä¼šæ”¹å˜æŒ‡é’ˆå˜é‡çš„å€¼,åªä¼šæ”¹å˜æ‰€æŒ‡çš„å†…å­˜å—çš„å€¼<br/>
ä¿è¯æ‰€æŒ‡å‘çš„å†…å­˜ç©ºé—´èƒ½ä¿®æ”¹()<br/>
*å°±åƒä¸€æŠŠé’¥åŒ™,é€šè¿‡ä¸€ä¸ªåœ°å€(&amp;a),å»ä¿®æ”¹aå˜é‡çš„æ ‡ç¤ºçš„å†…å­˜ç©ºé—´
</code></pre></li>
<li><p>æŒ‡é’ˆæ˜¯ä¸€ç§æ•°æ®ç±»å‹,æ˜¯æŒ‡å®ƒæŒ‡å‘çš„å†…å­˜ç©ºé—´çš„æ•°æ®ç±»å‹</p>
<pre><code class="language-text">æŒ‡é’ˆæ­¥é•¿(p++),æ ¹æ®æ‰€æŒ‡å†…å­˜ç©ºé—´çš„æ•°æ®ç±»å‹ç±»ç¡®å®š
p++ = ---&gt; p+sizeof(a)
</code></pre></li>
</ol>

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
                  
                    <span class="date">2017/9/13</span>
                    <span>posted in&nbsp;</span> 
          				  
          					    <span class="posted-in"><a href='C/C++.html'>C/C++</a></span>
          				   
                    

                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
			<div class="article">
                <a class="clearlink" href="15038471972999.html">
                
                  <h1>3D Touch</h1>
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
                        	<h2 id="toc_0"><a href="https://stackoverflow.com/documentation/ios/6705/3d-touch/22813/3d-touch-with-swift">3D Touch with Swift</a></h2>

<p>3D touch has been introduced with iPhone 6s Plus. There are two behaviors added with this new interface layer: Peek and Pop.</p>

<p><strong>Peek and Pop in a nutshell</strong></p>

<p>Peek - Press hard</p>

<p>Pop - Press really hard</p>

<p><strong>Checking for 3D support</strong></p>

<p>You should check if the device has a 3D touch support. You can do this by checking the value ofÂ <em>forceTouchCapability</em>Â property of aÂ <em>UITraitCollection</em>Â object. UITraitCollection describes the iOS interface environment for your app.</p>

<pre><code class="language-text">if (traitCollection.forceTouchCapability == .Available) {    
    registerForPreviewingWithDelegate(self, sourceView: view)
}
</code></pre>

<p><strong>Implementing the delegate</strong></p>

<p>You need to implement the two methods ofÂ <em>UIViewControllerPreviewingDelegate</em>Â in your class. One of the methods is forÂ <em>peek</em>Â and the other one is forÂ <em>pop</em>Â behavior.</p>

<p>The method to be implemented for theÂ <em>peek</em>Â isÂ <em>previewingContext</em>.</p>

<pre><code class="language-text">func previewingContext(previewingContext: UIViewControllerPreviewing, viewControllerForLocation location: CGPoint) -&gt; UIViewController? {

    guard let indexPath = self.tableView.indexPathForRowAtPoint(location), cell = self.tableView.cellForRowAtIndexPath(indexPath) as? &lt;YourTableViewCell&gt; else {
        return nil
    }

    guard let datailVC = storyboard?.instantiateViewControllerWithIdentifier(&quot;&lt;YourViewControllerIdentifier&gt;&quot;) as? &lt;YourViewController&gt; else {
        return nil
    }

    datailVC.peekActive = true
    previewingContext.sourceRect = cell.frame

    // Do the stuff

    return datailVC

}
</code></pre>

<p>The method to be implemented for theÂ <em>pop</em>Â isÂ <em>previewingContext</em>. :)</p>

<pre><code class="language-text">func previewingContext(previewingContext: UIViewControllerPreviewing, commitViewController viewControllerToCommit: UIViewController) {

    let balanceViewController = viewControllerToCommit as! &lt;YourViewController&gt;

    // Do the stuff

    navigationController?.pushViewController(balanceViewController, animated: true)

}
</code></pre>

<p>As you can see they are overloaded methods. You can use 3D touch in any way implementing these methods.</p>

<p><strong>Objective-C</strong></p>

<pre><code class="language-text">//Checking for 3-D Touch availability
if ([self.traitCollection respondsToSelector:@selector(forceTouchCapability)] &amp;&amp;
        (self.traitCollection.forceTouchCapability == UIForceTouchCapabilityAvailable))
    {
        [self registerForPreviewingWithDelegate:self sourceView:self.view];
    }
//Peek
- (UIViewController *)previewingContext:(id&lt;UIViewControllerPreviewing&gt;)previewingContext
              viewControllerForLocation:(CGPoint)location {

    NSIndexPath *indexPath = [self.tableView indexPathForRowAtPoint:location];
    Country *country = [self countryForIndexPath:indexPath];
    if (country) {
        CountryCell *cell = [self.tableView cellForRowAtIndexPath:indexPath];
        if (cell) {
            previewingContext.sourceRect = cell.frame;
            UINavigationController *navController = [self.storyboard instantiateViewControllerWithIdentifier:@&quot;UYLCountryNavController&quot;];
            [self configureNavigationController:navController withCountry:country];
            return navController;
        }
    }
    return nil;
}
//Pop
- (void)previewingContext:(id&lt;UIViewControllerPreviewing&gt;)previewingContext commitViewController:(UIViewController *)viewControllerToCommit {

    [self showDetailViewController:viewControllerToCommit sender:self];
}
</code></pre>

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
                  
                    <span class="date">2017/8/27</span>
                    <span>posted in&nbsp;</span> 
          				  
          					    <span class="posted-in"><a href='Documentation.html'>Documentation</a></span>
          				   
                    

                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
			<div class="article">
                <a class="clearlink" href="15038463059094.html">
                
                  <h1>CAGradientLayer</h1>
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
                        	<h2 id="toc_0"><a href="https://stackoverflow.com/documentation/ios/1190/cagradientlayer/3856/creating-a-cagradientlayer">Creating a CAGradientLayer</a></h2>

<pre><code class="language-text">// View to hold the CAGradientLayer.
let view: UIView = UIView(frame: CGRect(x: 0, y: 0, width: 320, height: 320))

// Initialize gradient layer.
let gradientLayer: CAGradientLayer = CAGradientLayer()

// Set frame of gradient layer.
gradientLayer.frame = view.bounds

// Color at the top of the gradient.
let topColor: CGColor = UIColor.red.cgColor

// Color at the bottom of the gradient.
let bottomColor: CGColor = UIColor.yellow.cgColor

// Set colors.
gradientLayer.colors = [topColor, bottomColor]

// Set locations of the colors.
gradientLayer.locations = [0.0, 1.0]

// Insert gradient layer into view&#39;s layer heirarchy.
view.layer.insertSublayer(gradientLayer, at: 0)
</code></pre>

<p>Result :</p>

<p><img src="media/15038463059094/q26bv.png" alt="Simple CAGradientLayer."/></p>

<h2 id="toc_1"><a href="https://stackoverflow.com/documentation/ios/1190/cagradientlayer/12652/animating-a-color-change-in-cagradientlayer">Animating a color change in CAGradientLayer.</a></h2>

<pre><code class="language-text">// Get the current colors of the gradient.
let oldColors = self.gradientLayer.colors

// Define the new colors for the gradient.
let newColors = [UIColor.red.cgColor, UIColor.yellow.cgColor]

// Set the new colors of the gradient.
self.gradientLayer.colors = newColors

// Initialize new animation for changing the colors of the gradient.
let animation: CABasicAnimation = CABasicAnimation(keyPath: &quot;colors&quot;)

// Set current color value.
animation.fromValue = oldColors

// Set new color value.
animation.toValue = newColors

// Set duration of animation.
animation.duration = 0.3

// Set animation to remove once its completed.
animation.isRemovedOnCompletion = true

// Set receiver to remain visible in its final state when the animation is completed.
animation.fillMode = kCAFillModeForwards

// Set linear pacing, which causes an animation to occur evenly over its duration.
animation.timingFunction = CAMediaTimingFunction(name: kCAMediaTimingFunctionLinear)

// Set delegate of animation.
animation.delegate = self

// Add the animation.
self.gradientLayer.addAnimation(animation, forKey: &quot;animateGradientColorChange&quot;)
</code></pre>

<p>Result :</p>

<p><img src="media/15038463059094/AquKd.gif" alt="Basic CAGradientLayer color change animation."/></p>

<h2 id="toc_2"><a href="https://stackoverflow.com/documentation/ios/1190/cagradientlayer/4229/creating-a-horizontal-cagradientlayer-with-multiple-colors">Creating a horizontal CAGradientLayer with multiple colors.</a></h2>

<pre><code class="language-text">// View to hold the CAGradientLayer.
let view: UIView = UIView(frame: CGRect(x: 0, y: 0, width: 320, height: 320))

// Initialize gradient layer.
let gradientLayer: CAGradientLayer = CAGradientLayer()

// Set frame of gradient layer.
gradientLayer.frame = view.bounds

// Color at the top of the gradient.
let topColor: CGColor = UIColor.greenColor().CGColor

// Color at the middle of the gradient.
let middleColor: CGColor = UIColor.blueColor().CGColor

// Color at the bottom of the gradient.
let bottomColor: CGColor = UIColor.blackColor().CGColor

// Set colors.
gradientLayer.colors = [topColor, middleColor, bottomColor]

// Set start point.
gradientLayer.startPoint = CGPoint(x: 0.0, y: 0.5)

// Set end point.
gradientLayer.endPoint = CGPoint(x: 1.0, y: 0.5)

// Insert gradient layer into view&#39;s layer heirarchy.
view.layer.insertSublayer(gradientLayer, atIndex: 0)
</code></pre>

<p>Result :</p>

<p><img src="media/15038463059094/I4OGH.png" alt="enter image description here"/></p>

<h2 id="toc_3"><a href="https://stackoverflow.com/documentation/ios/1190/cagradientlayer/4228/creating-a-horizontal-cagradientlayer">Creating a horizontal CAGradientLayer.</a></h2>

<pre><code class="language-text">// View to hold the CAGradientLayer.
let view: UIView = UIView(frame: CGRect(x: 0, y: 0, width: 320, height: 320))

// Initialize gradient layer.
let gradientLayer: CAGradientLayer = CAGradientLayer()

// Set frame of gradient layer.
gradientLayer.frame = view.bounds

// Color at the top of the gradient.
let topColor: CGColor = UIColor.redColor().CGColor

// Color at the bottom of the gradient.
let bottomColor: CGColor = UIColor.yellowColor().CGColor

// Set colors.
gradientLayer.colors = [topColor, bottomColor]

// Set start point.
gradientLayer.startPoint = CGPoint(x: 0.0, y: 0.5)

// Set end point.
gradientLayer.endPoint = CGPoint(x: 1.0, y: 0.5)

// Insert gradient layer into view&#39;s layer heirarchy.
view.layer.insertSublayer(gradientLayer, atIndex: 0)
</code></pre>

<p>Result :</p>

<p><img src="media/15038463059094/7VCnW.png" alt="Horizontal CAGradientLayer."/></p>

<h2 id="toc_4"><a href="https://stackoverflow.com/documentation/ios/1190/cagradientlayer/4227/creating-a-cggradientlayer-with-multiple-colors">Creating a CGGradientLayer with multiple colors.</a></h2>

<pre><code class="language-text">// View to hold the CAGradientLayer.
let view: UIView = UIView(frame: CGRect(x: 0, y: 0, width: 320, height: 320))

// Initialize gradient layer.
let gradientLayer: CAGradientLayer = CAGradientLayer()

// Set frame of gradient layer.
gradientLayer.frame = view.bounds

// Color at the top of the gradient.
let topColor: CGColor = UIColor.blue.cgColor

// Color at the middle of the gradient.
let middleColor: CGColor = UIColor.yellow.cgColor

// Color at the bottom of the gradient.
let bottomColor: CGColor = UIColor.green.cgColor

// Set colors.
gradientLayer.colors = [topColor, middleColor, bottomColor]

// Set locations of the colors.
gradientLayer.locations = [0.0, 0.5, 1.0]

// Insert gradient layer into view&#39;s layer heirarchy.
view.layer.insertSublayer(gradientLayer, at: 0)
</code></pre>

<p>Result :</p>

<p><img src="media/15038463059094/tV4OL.png" alt="Complex CAGradientLayer."/></p>

<hr/>

<h2 id="toc_5">Syntax</h2>

<pre><code class="language-text">CAGradientLayer() // Returns an initialized CALayer object.
-------------------
CAGradientLayer(layer: layer) // Override to copy or initialize custom fields of the specified layer.
</code></pre>

<h2 id="toc_6">Parameters</h2>

<table>
<thead>
<tr>
<th style="text-align: left">Parameter</th>
<th style="text-align: left">Details</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">color</td>
<td style="text-align: left">An array ofÂ <code>CGColorRef</code>Â objects defining the color of each gradient stop. Animatable.</td>
</tr>
<tr>
<td style="text-align: left">locations</td>
<td style="text-align: left">An optional array ofÂ <code>NSNumber</code>Â objects defining the location of each gradient stop. Animatable.</td>
</tr>
<tr>
<td style="text-align: left">endPoint</td>
<td style="text-align: left">The end point of the gradient when drawn in the layerâ€™s coordinate space. Animatable.</td>
</tr>
<tr>
<td style="text-align: left">startPoint</td>
<td style="text-align: left">The start point of the gradient when drawn in the layerâ€™s coordinate space. Animatable.</td>
</tr>
<tr>
<td style="text-align: left">type</td>
<td style="text-align: left">Style of gradient drawn by the layer. Defaults toÂ <code>kCAGradientLayerAxial</code>.</td>
</tr>
</tbody>
</table>

<h2 id="toc_7">Remarks</h2>

<ul>
<li>UseÂ <code>startPoint</code>Â andÂ <code>endPoint</code>Â to change the orientation of theÂ <code>CAGradientLayer</code>.</li>
<li>Use theÂ <code>locations</code>Â to affect the spread/positions of the colors.</li>
</ul>

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
                  
                    <span class="date">2017/8/27</span>
                    <span>posted in&nbsp;</span> 
          				  
          					    <span class="posted-in"><a href='Documentation.html'>Documentation</a></span>
          				   
                    

                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
			<div class="article">
                <a class="clearlink" href="15036540820094.html">
                
                  <h1>Custom UIViews from XIB files</h1>
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
                        	<h2 id="toc_0"><a href="https://stackoverflow.com/documentation/ios/1362/custom-uiviews-from-xib-files/4443/wiring-elements">Wiring elements</a></h2>

<ul>
<li><blockquote>
<p>Create a XIB file</p>
</blockquote>
<p>Xcode Menu Bar &gt; File &gt; New &gt; File.<br/>
Select iOS, User Interface and then &quot;View&quot;:</p>
<p><a href="media/15036540820094/RSkzu.png"><img src="media/15036540820094/RSkzu.png" alt="First step"/></a></p>
<p>Give your XIB a name (yes, we are doing a Pokemon example ğŸ‘¾).<br/>
<strong>Remember to check your target</strong>Â and hit &quot;Create&quot;.</p>
<p><a href="media/15036540820094/oJ1s1.png"><img src="media/15036540820094/oJ1s1.png" alt="Second step"/></a></p>
<blockquote>
<p>Design your view</p>
</blockquote>
<p>To make things easier, set:</p>
<ul>
<li>Size: Freeform</li>
<li>Status Bar: None</li>
<li>Top Bar: None</li>
<li>Bottom Bar: None</li>
</ul>
<p><a href="media/15036540820094/Gy0KD.png"><img src="media/15036540820094/Gy0KD.png" alt="Third step"/></a></p>
<p>Click on the Size Inspector and resize the view.<br/>
For this example we&#39;ll be using width 321 and height 256.</p>
<p><a href="media/15036540820094/PNIek.png"><img src="media/15036540820094/PNIek.png" alt="Fourth step"/></a></p>
<p>Drop some elements into your XIB file like shown below.<br/>
Here we&#39;ll be adding anÂ <strong>Image View</strong>Â (256x256) and aÂ <strong>Switch</strong>.</p>
<p><a href="media/15036540820094/6u3pd.png"><img src="media/15036540820094/6u3pd.png" alt="Fifth step"/></a></p>
<p>Add Auto-Layout constraints by clicking on &quot;Resolve Auto Layout Issues&quot; (bottom-right) and selecting &quot;Add Missing Constraints&quot; under &quot;All Views&quot;.</p>
<p><a href="media/15036540820094/esZhQ.png"><img src="media/15036540820094/esZhQ.png" alt="Sixth step"/></a></p>
<p>Preview the changes you made by clicking on &quot;Show the Assistant Editor&quot; (top-right), then &quot;Preview&quot;.<br/>
You can add iPhone screens by clicking on the &quot;Plus&quot; button.<br/>
The preview should look like this:</p>
<p><a href="media/15036540820094/D3rac.png"><img src="media/15036540820094/D3rac.png" alt="Seventh step"/></a></p>
<blockquote>
<p>Subclass UIView</p>
</blockquote>
<p>Create the class that is going to manage the XIB file.<br/>
Xcode Menu Bar &gt; File &gt; New &gt; File.<br/>
Select iOS / Source / Cocoa Touch Class. Hit &quot;Next&quot;.</p>
<p><a href="media/15036540820094/0EyHy.png"><img src="media/15036540820094/0EyHy.png" alt="Eighth step"/></a></p>
<p>Give the class a name, which must be the same name as the XIB file (Pokemon).<br/>
Select UIView as the subclass type, then hit &quot;Next&quot;.</p>
<p><a href="media/15036540820094/qbo3s.png"><img src="media/15036540820094/qbo3s.png" alt="Nineth step"/></a></p>
<p>On the next window, select your target and hit &quot;Create&quot;.</p>
<p><a href="media/15036540820094/Ks9Tu.png"><img src="media/15036540820094/Ks9Tu.png" alt="Tenth step"/></a></p>
<blockquote>
<p>Connect Pokemon.xib to Pokemon.swift via &quot;Fileâ€™s Owner&quot; attribute</p>
</blockquote>
<p>Click on the Pokemon.xib file in Xcode.<br/>
Click on the &quot;File&#39;s Owner&quot; outlet.<br/>
On the &quot;Identity inspector&quot; (top-right), set the Class to our recently created Pokemon.swift file.</p>
<p><a href="media/15036540820094/4YT3i.png"><img src="media/15036540820094/4YT3i.png" alt="Eleventh step"/></a></p>
<blockquote>
<p>POKEMONS!!!</p>
</blockquote>
<p>Yes! Drag and drop some Pokemons into your project to finish up our &quot;infrastructure&quot;.<br/>
Here we are adding two PGN files, 256x256, transparent.</p>
<p><a href="media/15036540820094/ibqxZ.png"><img src="media/15036540820094/ibqxZ.png" alt="Twelfth step"/></a></p>
<blockquote>
<p>Show me code already.</p>
</blockquote>
<p>All right, all right.<br/>
Time to add some code to our Pokemon.swift class.</p>
<p>It&#39;s actually pretty simple:</p>
<ol>
<li>Implement required initializers</li>
<li>Load the XIB file</li>
<li>Configure the view that will display the XIB file</li>
<li>Show the above view</li>
</ol>
<p>Add the following code to the Pokemon.swift class:</p>
<pre><code class="language-text">import UIKit
class Pokemon: UIView {<br/>
    // MARK: - Initializers<br/>
    override init(frame: CGRect) {<br/>
        super.init(frame: frame)<br/>
        setupView()<br/>
    }<br/>
    required init?(coder aDecoder: NSCoder) {<br/>
        super.init(coder: aDecoder)<br/>
        setupView()<br/>
    }<br/>
    // MARK: - Private Helper Methods<br/>
    // Performs the initial setup.<br/>
    private func setupView() {<br/>
        let view = viewFromNibForClass()<br/>
        view.frame = bounds<br/>
        // Auto-layout stuff.<br/>
        view.autoresizingMask = [<br/>
            UIViewAutoresizing.flexibleWidth,<br/>
            UIViewAutoresizing.flexibleHeight<br/>
        ]<br/>
        // Show the view.<br/>
        addSubview(view)<br/>
    }<br/>
    // Loads a XIB file into a view and returns this view.<br/>
    private func viewFromNibForClass() -&gt; UIView {<br/>
        let bundle = Bundle(for: type(of: self))<br/>
        let nib = UINib(nibName: String(describing: type(of: self)), bundle: bundle)<br/>
        let view = nib.instantiate(withOwner: self, options: nil).first as! UIView<br/>
        /* Usage for swift &lt; 3.x<br/>
        let bundle = NSBundle(forClass: self.dynamicType)<br/>
        let nib = UINib(nibName: String(self.dynamicType), bundle: bundle)<br/>
        let view = nib.instantiateWithOwner(self, options: nil)[0] as! UIView<br/>
        */<br/>
        return view<br/>
    }<br/>
}
</code></pre>
<blockquote>
<p>@IBDesignable and @IBInspectable</p>
</blockquote>
<p>By addingÂ <code>@IBDesignable</code>Â to your class, you make possible for it to live-render in Interface Builder.<br/>
By addingÂ <code>@IBInspectable</code>Â to the properties of your class, you can see your custom views changing in Interface Builder as soon as you modify those properties.</p>
<p>Let&#39;s make theÂ <code>Image View</code>Â of our custom view &quot;Inspectable&quot;.</p>
<p>First, hook up theÂ <code>Image View</code>Â from the Pokemon.xib file to the Pokemon.swift class.</p>
<p><a href="media/15036540820094/Dxyv2.png"><img src="media/15036540820094/Dxyv2.png" alt="Thirteenth step"/></a></p>
<p>Call the outletÂ <code>imageView</code>Â and then add the following code (notice theÂ <code>@IBDesignable</code>Â before the class name):</p>
<pre><code class="language-text">@IBDesignable class Pokemon: UIView {
    // MARK: - Properties<br/>
    @IBOutlet weak var imageView: UIImageView!<br/>
    @IBInspectable var image: UIImage? {<br/>
        get {<br/>
            return imageView.image<br/>
        }<br/>
        set(image) {<br/>
            imageView.image = image<br/>
        }<br/>
    }<br/>
    // MARK: - Initializers<br/>
    ...
</code></pre>
<blockquote>
<p>Using your Custom Views</p>
</blockquote>
<p>Got to your Main storyboard file, drag a UIView into it.<br/>
Resize the view to, say 200x200. Centralize.<br/>
Go to the Identity inspector (top-right) and set the Class to Pokemon.</p>
<p><a href="media/15036540820094/Iah3Y.png"><img src="media/15036540820094/Iah3Y.png" alt="Fourteenth steps"/></a></p>
<p>To select a Pokemon, go to the Attribute Inspector (top-right) and select one of the Pokemon images you previously added using the awesomeÂ <code>@IBInspectable</code>Â image property.</p>
<p><a href="media/15036540820094/727mm.png"><img src="media/15036540820094/727mm.png" alt="Fifteenth step"/></a></p>
<p>Now duplicate your custom Pokemon view.<br/>
Give it a different size, say 150x150.<br/>
Choose another Pokemon image, observe:</p>
<p><a href="media/15036540820094/xrTXw.png"><img src="media/15036540820094/xrTXw.png" alt="Sixteenth step"/></a></p>
<p>Now we are going to add more logic to that self-containing custom UI element.<br/>
The button will allow Pokemons to be enabled/disabled.</p>
<p>Create anÂ <code>IBAction</code>Â from the Switch button to the Pokemon.swift class.<br/>
Call the action something likeÂ <code>switchTapped</code>.<br/>
Add the following code to it:</p>
<pre><code class="language-text">// MARK: - Actions
@IBAction func switchTapped(sender: UISwitch) {<br/>
    imageView.alpha = sender.on ? 1.0 : 0.2<br/>
}<br/>
// MARK: - Initializers<br/>
...
</code></pre>
<p>Final result:</p>
<p><a href="media/15036540820094/DQJvO.gif"><img src="media/15036540820094/DQJvO.gif" alt="Final"/></a></p>
<p>You are done!<br/>
Now you can create complex custom views and reuse them anywhere you want.<br/>
This will increase productivity while isolating code into self-contained UI elements.</p>
<p><a href="https://github.com/singledev/custom-uiviews-from-xib">The final project can be cloned in Github.</a><br/>
(<strong>Updated to Swift 3.1</strong>)</p></li>
</ul>

<h2 id="toc_1"><a href="https://stackoverflow.com/documentation/ios/1362/custom-uiviews-from-xib-files/11599/how-to-make-custom-reusable-uiview-using-xib">How to make custom reusable UIView using XIB</a></h2>

<p>Following example shows steps involved in initializing a view from XIB.</p>

<p>This is not a complex operation but exact steps need to be followed in order to do it right way first time, avoiding exceptions.</p>

<p><a href="http://stackoverflow.com/questions/20323393/how-does-loadnibnamed-work-uiview-outlets-not-initializing-using-loadnibnamed">How does loadNibNamed Works</a></p>

<p>Main steps are:</p>

<ol>
<li>Create XIB</li>
<li>Create class .h and .m</li>
<li>Define outlets in .h</li>
<li><p>Connect outlets between .h and XIB</p>
<p>See attached screenshot:</p>
<p><a href="media/15036540820094/rSBw6.png"><img src="media/15036540820094/rSBw6.png" alt="Label Object connected to myLabel IBOutlet UILabel variable"/></a></p></li>
<li><p>Invoke loadNibNamed inside initWithCoder function of .m file. This is needed to ensure you can directly place UIView object into storyboard / Parent UIView XIB file and define it as your custom view. No other initialization code is needed once you load the storyboard / parent XIB. Your custom view can be added to other views just like other built-in Objective C view objects given in XCode.</p></li>
</ol>

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
                  
                    <span class="date">2017/8/25</span>
                    <span>posted in&nbsp;</span> 
          				  
          					    <span class="posted-in"><a href='Documentation.html'>Documentation</a></span>
          				   
                    

                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
              


			<div class="row">
			  <div class="large-6 columns">
			  <p class="text-left" style="padding-top:25px;">
			   <a href="all_6.html">&laquo; Prev Page</a>  
			  </p>
			  </div>
			  <div class="large-6 columns">
			<p class="text-right" style="padding-top:25px;">
			 <a href="all_8.html">&raquo; Next Page</a> 
			</p>
			  </div>
			</div>
		</div>
	</div><!-- large 8 -->

 <div class="large-4 medium-4 columns">
  <div class="hide-for-small">
    <div id="sidebar" class="sidebar">
          <div id="site-info" class="site-info">
            
                <div class="site-a-logo"><img src="https://raw.githubusercontent.com/lxzzzzzz/lxzzzzzz.github.io/master/Blog/asset/icon.jpg" /></div>
            
                <h1>æå°äº‰</h1>
                <div class="site-des">è®°å½•å¼€å‘ä¸­é‡åˆ°çš„ä¸€äº›é—®é¢˜</div>
                <div class="social">











  <a target="_blank" class="rss" href="atom.xml" title="RSS">RSS</a>
                
              	 </div>
          	</div>

             

              <div id="site-categories" class="side-item ">
                <div class="side-header">
                  <h2>Categories</h2>
                </div>
                <div class="side-content">

      	<p class="cat-list">
        
            <a href="%E5%8E%9F%E7%90%86%E6%8E%A2%E7%A9%B6.html"><strong>åŸç†æ¢ç©¶</strong></a>
        
            <a href="%E6%8A%80%E5%B7%A7.html"><strong>æŠ€å·§</strong></a>
        
            <a href="%E6%95%99%E7%A8%8B.html"><strong>æ•™ç¨‹</strong></a>
        
            <a href="%E9%81%87%E5%88%B0Bug.html"><strong>é‡åˆ°Bug</strong></a>
        
            <a href="%E6%9D%82%E8%AE%B0.html"><strong>æ‚è®°</strong></a>
        
            <a href="Swift.html"><strong>Swift</strong></a>
        
            <a href="C/C++.html"><strong>C/C++</strong></a>
        
            <a href="Linux.html"><strong>Linux</strong></a>
        
            <a href="Documentation.html"><strong>Documentation</strong></a>
        
            <a href="Java.html"><strong>Java</strong></a>
        
            <a href="LeetCode.html"><strong>LeetCode</strong></a>
         
        </p>


                </div>
              </div>

              <div id="site-categories" class="side-item">
                <div class="side-header">
                  <h2>Recent Posts</h2>
                </div>
                <div class="side-content">
                <ul class="posts-list">
	      
		      
			      <li class="post">
			        <a href="15962945237035.html">632. Smallest Range Covering Elements from K Lists</a>
			      </li>
		     
		  
		      
			      <li class="post">
			        <a href="15654059537017.html"># æ·±å…¥ç†è§£ iOS äº‹ä»¶æœºåˆ¶</a>
			      </li>
		     
		  
		      
			      <li class="post">
			        <a href="15653483390225.html">å›¾åƒæ˜¾ç¤ºåŸç†</a>
			      </li>
		     
		  
		      
			      <li class="post">
			        <a href="15653376209289.html">äº‹ä»¶ä¼ é€’</a>
			      </li>
		     
		  
		      
			      <li class="post">
			        <a href="15653325472073.html">æµ·åº•æç‚¹é¤Pad ä¼˜åŒ–</a>
			      </li>
		     
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		   
		  		</ul>
                </div>
              </div>
        </div><!-- sidebar -->
      </div><!-- hide for small -->
</div><!-- large 4 -->

</div><!-- row -->

 <div class="page-bottom clearfix">
  <div class="row">
   <p class="copyright">Copyright &copy; 2015
Powered by <a target="_blank" href="http://www.mweb.im">MWeb</a>,&nbsp; 
Theme used <a target="_blank" href="http://github.com">GitHub CSS</a>.</p>
  </div>
</div>

        </section>
      </div>
    </div>



  














<style type="text/css">
figure{margin: 0;padding: 0;}
figcaption{text-align:center;}

/* PrismJS 1.14.0
 http://prismjs.com/download.html#themes=prism&languages=markup+css+clike+javascript */
/**
 * prism.js default theme for JavaScript, CSS and HTML
 * Based on dabblet (http://dabblet.com)
 * @author Lea Verou
 */

code[class*="language-"],
pre[class*="language-"] {
    color: black;
    background: none;
    text-shadow: 0 1px white;
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
    text-align: left;
    white-space: pre;
    word-spacing: normal;
    word-break: normal;
    word-wrap: normal;
    line-height: 1.5;
    
    -moz-tab-size: 4;
    -o-tab-size: 4;
    tab-size: 4;
    
    -webkit-hyphens: none;
    -moz-hyphens: none;
    -ms-hyphens: none;
    hyphens: none;
}

pre[class*="language-"]::-moz-selection, pre[class*="language-"] ::-moz-selection,
code[class*="language-"]::-moz-selection, code[class*="language-"] ::-moz-selection {
    text-shadow: none;
    background:#b3d4fc;
}

pre[class*="language-"]::selection, pre[class*="language-"] ::selection,
code[class*="language-"]::selection, code[class*="language-"] ::selection {
    text-shadow: none;
    background: #b3d4fc;
}

@media print {
    code[class*="language-"],
    pre[class*="language-"] {
        text-shadow: none;
    }
}

/* Code blocks */
pre[class*="language-"] {
    padding: 1em;
    margin: .5em 0;
    overflow: auto;
}

:not(pre) > code[class*="language-"],
pre[class*="language-"] {
    background: #F7F7F7;
}

/* Inline code */
:not(pre) > code[class*="language-"] {
    padding: .1em;
    border-radius: .3em;
    white-space: normal;
}

.token.comment,
.token.prolog,
.token.doctype,
.token.cdata {
    color: slategray;
}

.token.punctuation {
    color: #999;
}

.namespace {
    opacity: .7;
}

.token.property,
.token.tag,
.token.boolean,
.token.number,
.token.constant,
.token.symbol,
.token.deleted {
    color: #905;
}

.token.selector,
.token.attr-name,
.token.string,
.token.char,
.token.builtin,
.token.inserted {
    color: #690;
}

.token.operator,
.token.entity,
.token.url,
.language-css .token.string,
.style .token.string {
    color: #9a6e3a;
    background: hsla(0, 0%, 100%, .5);
}

.token.atrule,
.token.attr-value,
.token.keyword {
    color: #07a;
}

.token.function,
.token.class-name {
    color: #DD4A68;
}

.token.regex,
.token.important,
.token.variable {
    color: #e90;
}

.token.important,
.token.bold {
    font-weight: bold;
}
.token.italic {
    font-style: italic;
}

.token.entity {
    cursor: help;
}


pre[class*="language-"].line-numbers {
    position: relative;
    padding-left: 3.8em;
    counter-reset: linenumber;
}

pre[class*="language-"].line-numbers > code {
    position: relative;
    white-space: inherit;
}

.line-numbers .line-numbers-rows {
    position: absolute;
    pointer-events: none;
    top: 0;
    font-size: 100%;
    left: -3.8em;
    width: 3em; /* works for line-numbers below 1000 lines */
    letter-spacing: -1px;
    border-right: 1px solid #999;

    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;

}

    .line-numbers-rows > span {
        pointer-events: none;
        display: block;
        counter-increment: linenumber;
    }

        .line-numbers-rows > span:before {
            content: counter(linenumber);
            color: #999;
            display: block;
            padding-right: 0.8em;
            text-align: right;
        }

</style>

  
    

    <script src="asset/js/foundation.min.js"></script>
    <script>
      $(document).foundation();
      function fixSidebarHeight(){
        var w1 = $('.markdown-body').height();
          var w2 = $('#sidebar').height();
          if (w1 > w2) { $('#sidebar').height(w1); };
      }
      $(function(){
        fixSidebarHeight();
      })
      $(window).load(function(){
          fixSidebarHeight();
      });
     
    </script>



  </body>
</html>
