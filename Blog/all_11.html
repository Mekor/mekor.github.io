
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>
    
  æå°äº‰
  

  </title>
  <meta name="author" content="">
  <meta name="description" content="è®°å½•å¼€å‘ä¸­é‡åˆ°çš„ä¸€äº›é—®é¢˜">

  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <link href="asset/css/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="atom.xml" rel="alternate" title="æå°äº‰" type="application/atom+xml">
  <script src="asset/js/modernizr-2.0.js"></script>
  <script src="asset/js/jquery.min.js"></script>
  <style type="text/css">
  .cat-children-p{ padding: 6px 0px;}
  .hljs{background: none;}
  </style>
  <script type="text/javascript">
  var isAddSildbar = true;
  </script>
  <script src="asset/js/octopress.js" type="text/javascript"></script>
</head>
<script type="text/javascript">
//é“¾æ¥æ–°å¼€çª—å£
function addBlankTargetForLinks () {
  $('a[href^="http"]').each(function(){
      $(this).attr('target', '_blank');
  });
}
$(document).ready(function(event) {
  addBlankTargetForLinks();
});
</script>
<body   >
  <header role="banner"><hgroup>
  <h1><a href="index.html">æå°äº‰</a></h1>
  
    <h2>è®°å½•å¼€å‘ä¸­é‡åˆ°çš„ä¸€äº›é—®é¢˜</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:www.citynight.cn/Blog" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">

  <li id=""><a target="self" href="index.html">Home</a></li>

  <li id=""><a target="_self" href="archives.html">Archives</a></li>

</ul>

</nav>
  <div id="main">
    <div id="content"> 
<div class="blog-index">

	<article>
		 <header>
		  	<h1 class="entry-title"><a href="15058021769287.html">ä¼˜åŒ–iPad 2 æ€»ç»“</a></h1>
			<p class="meta"><time datetime="2017-09-19T14:22:56+08:00" 
			pubdate data-updated="true">2017/9/19</time></p>
		 </header>
	  	<div class="entry-content">
		  	
		  	<p>å®æ–½åé¦ˆé¡¹ç›®åœ¨<code>iPad 2</code>ä¸Šæ¯”è¾ƒå¡é¡¿,æ‰€ä»¥è¦å¯¹é¡¹ç›®è¿›è¡Œä¼˜åŒ–.</p>
<h2><a id="%E4%BC%98%E5%8C%96%E9%9B%86%E4%B8%AD%E7%82%B9%E4%B8%BAcollectionview" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>ä¼˜åŒ–é›†ä¸­ç‚¹ä¸ºcollectionView</h2>
<p>é¡¹ç›®æœ‰ä¸¤ç§æ˜¾ç¤ºæ•ˆæœ,ä¸€ç§æ˜¯å›¾ç‰‡æ¨¡å¼,ä¸€ç§æ˜¯çº¯æ–‡å­—æ¨¡å¼. çº¯æ–‡å­—æ¨¡å¼æ»‘åŠ¨èµ·æ¥è¿˜ä¸é”™,å›¾ç‰‡æ¨¡å¼å°±æ¯”è¾ƒå¡äº†.ç»åˆ†æ,é¡¹ç›®åšäº†éƒ¨åˆ†ä¿®æ”¹,ä½¿æ»‘åŠ¨æ•ˆæœæ¯”è¾ƒé¡ºç•….</p>
<ul>
<li>æ …æ ¼åŒ–: ç›®çš„æ˜¯ç¦»å±æ¸²æŸ“,ä¸è¿‡è¿˜æ˜¯å¡é¡¿</li>
</ul>
<pre><code>    self.layer.shouldRasterize = true
    self.layer.rasterizationScale = UIScreen.main.scale
    self.layer.drawsAsynchronously = true
</code></pre>
<ul>
<li>Color Blended Layers å¤„ç†<br />
<img src="media/15058021769287/15058027400968.jpg" alt="" /><br />
å‘ç°éƒ¨åˆ†UILabelå­˜åœ¨é—®é¢˜,è§£å†³æ–¹æ¡ˆ:<br />
<img src="media/15058021769287/15058028256147.jpg" alt="" /></li>
</ul>
<p>æ·»åŠ  <code>label.layer.masksToBounds = true</code>,æ•ˆæœè¿˜æ˜¯ä¸è¡Œ.</p>
<ul>
<li>ä½¿ç”¨iOSæœ€æ–°çš„API<code>UICollectionViewDataSourcePrefetching</code></li>
</ul>
<pre><code>extension DishesViewController: UICollectionViewDataSourcePrefetching {
    func collectionView(_ collectionView: UICollectionView, prefetchItemsAt indexPaths: [IndexPath]) {
        let urls = indexPaths.flatMap { (index) -&gt; URL? in
            let big = dishsArray[index.section]
            let key = big.keys.first!
            let small = big[key]!
            let item = small[index.item]
            return URL(string: item.dishModel.smallImageUrl)
        }
        
        ImagePrefetcher(urls: urls).start()
    }
}

</code></pre>
<ul>
<li>ä¸Šé¢ä¼˜åŒ–åæ•ˆæœä¸æ˜¯å¾ˆæ˜æ˜¾,æœ€åé‡‡å–äº†<strong>ä»¥ç©ºé—´æ¢æ—¶é—´</strong>çš„æ–¹å¼ä¼˜åŒ–å›¾ç‰‡åˆ—è¡¨é¡µ<br />
æå‰ç”¨<code>Kingfisher</code>ä¸‹è½½å›¾ç‰‡(è¿™ä¸ªè¿‡ç¨‹åŸå…ˆå°±æœ‰)ä¸‹è½½è¿‡å›¾ç‰‡ä¹Ÿåšäº†ä¸å†ä¸‹è½½çš„å¤„ç†,ç”±äºå›¾ç‰‡è¿‡å¤šå¯¼è‡´ä¸ä¼šæœ‰å¤ªå¤šåˆ—è¡¨é¡µçš„å›¾ç‰‡ç¼“å­˜ä¸­å†…å­˜ä¸­. é’ˆå¯¹è¿™ä¸ªé—®é¢˜,æˆ‘é‡‡ç”¨äº†æ¯æ¬¡è¿›å…¥appå°±æŠŠåˆ—è¡¨é¡µçš„å›¾ç‰‡ä½¿ç”¨<code>NSCache&lt;NSString, UIImage&gt;</code>ç¼“å­˜èµ·æ¥,æ•ˆæœå¾ˆæ˜æ˜¾.</li>
</ul>
<h2><a id="%E7%9B%AE%E5%89%8D%E8%BF%98%E5%AD%98%E5%9C%A8%E9%97%AE%E9%A2%98" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>ç›®å‰è¿˜å­˜åœ¨é—®é¢˜</h2>
<p>ä¸‹è½½å›¾ç‰‡å¤±è´¥ç‡è¿˜æ˜¯å¾ˆé«˜çš„,æˆ‘è®¾ç½®çš„è¶…æ—¶æ—¶é—´ä¸º60s <code>downloader.downloadTimeout = 60</code> ä½†æ˜¯è¿˜æ˜¯æœ‰å¾ˆå¤šå›¾ç‰‡ä¸‹è½½è¶…æ—¶,å¯¼è‡´é¦–æ¬¡åŠ è½½çš„æ—¶å€™éœ€è¦ä¸‹è½½å›¾ç‰‡æ»‘åŠ¨å¡é¡¿.<br />
ç”±äº<code>NSCache</code>çš„ç‰¹æ®Šæ€§,ä¸èƒ½ä¿è¯å›¾ç‰‡ä¸€ç›´åœ¨å†…å­˜ä¸­,æ­£åœ¨è€ƒè™‘æ˜¯å¦æ›¿æ¢æˆDictionary,ç„¶åè‡ªå·±å¤„ç†å†…å­˜è­¦å‘Š.è¿™ä¸ªç¨åéªŒè¯ä¸‹.</p>


		</div>

		

	</article>
 
	<article>
		 <header>
		  	<h1 class="entry-title"><a href="15052686192490.html">æŒ‡é’ˆ</a></h1>
			<p class="meta"><time datetime="2017-09-13T10:10:19+08:00" 
			pubdate data-updated="true">2017/9/13</time></p>
		 </header>
	  	<div class="entry-content">
		  	
		  	<h2><a id="1%E6%8C%87%E9%92%88%E6%98%AF%E4%B8%80%E7%A7%8D%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>1. æŒ‡é’ˆæ˜¯ä¸€ç§æ•°æ®ç±»å‹</h2>
<ol>
<li>
<p>æŒ‡é’ˆä¹Ÿæ˜¯ä¸€ç§å˜é‡,å æœ‰å†…å­˜ç©ºé—´,ç”¨æ¥ä¿å­˜å†…å­˜åœ°å€  æŒ‡é’ˆçš„å¤§å°--&gt; 32ä½: 4  64ä½: 8</p>
</li>
<li>
<p><code>*p</code> æ“ä½œå†…å­˜</p>
<pre><code>åœ¨æŒ‡é’ˆå£°æ˜æ—¶,`*`å·è¡¨ç¤ºæ‰€å£°æ˜çš„å˜é‡ä¸ºæŒ‡é’ˆ
åœ¨æŒ‡é’ˆä½¿ç”¨æ—¶,`*`å·è¡¨ç¤º**æ“ä½œ**æŒ‡é’ˆæ‰€æŒ‡å‘çš„å†…å­˜ç©ºé—´ä¸­çš„å€¼
`*p`ç›¸å½“äºé€šè¿‡åœ°å€(på˜é‡çš„å€¼)æ‰¾åˆ°ä¸€å—å†…å­˜,ç„¶åæ“ä½œå†…å­˜
`*p`æ”¾åœ¨ç­‰å·å·¦è¾¹èµ‹å€¼(ç»™å†…å­˜èµ‹å€¼)
`*p`æ”¾åœ¨ç­‰å·å³è¾¹å–å€¼(ä»å†…å­˜è·å–å€¼)
</code></pre>
</li>
<li>
<p>æŒ‡é’ˆå˜é‡å’Œå®ƒæŒ‡å‘çš„å†…å­˜å—æ˜¯ä¸¤ä¸ªä¸åŒçš„æ¦‚å¿µ</p>
<pre><code>å«ä¹‰1: ç»™pèµ‹å€¼ p = 0x1111; åªä¼šæ”¹å˜æŒ‡é’ˆå˜é‡å€¼,ä¸ä¼šæ”¹å˜æ‰€æŒ‡çš„å†…å®¹; p = p+1
å«ä¹‰2: ç»™`*p`èµ‹å€¼ *p = 'a';ä¸ä¼šæ”¹å˜æŒ‡é’ˆå˜é‡çš„å€¼,åªä¼šæ”¹å˜æ‰€æŒ‡çš„å†…å­˜å—çš„å€¼
ä¿è¯æ‰€æŒ‡å‘çš„å†…å­˜ç©ºé—´èƒ½ä¿®æ”¹()
*å°±åƒä¸€æŠŠé’¥åŒ™,é€šè¿‡ä¸€ä¸ªåœ°å€(&amp;a),å»ä¿®æ”¹aå˜é‡çš„æ ‡ç¤ºçš„å†…å­˜ç©ºé—´
</code></pre>
</li>
<li>
<p>æŒ‡é’ˆæ˜¯ä¸€ç§æ•°æ®ç±»å‹,æ˜¯æŒ‡å®ƒæŒ‡å‘çš„å†…å­˜ç©ºé—´çš„æ•°æ®ç±»å‹</p>
<pre><code>æŒ‡é’ˆæ­¥é•¿(p++),æ ¹æ®æ‰€æŒ‡å†…å­˜ç©ºé—´çš„æ•°æ®ç±»å‹ç±»ç¡®å®š
p++ = ---&gt; p+sizeof(a)
</code></pre>
</li>
</ol>


		</div>

		

	</article>
 
	<article>
		 <header>
		  	<h1 class="entry-title"><a href="15038471972999.html">3D Touch</a></h1>
			<p class="meta"><time datetime="2017-08-27T23:19:57+08:00" 
			pubdate data-updated="true">2017/8/27</time></p>
		 </header>
	  	<div class="entry-content">
		  	
		  	<p>##<a href="https://stackoverflow.com/documentation/ios/6705/3d-touch/22813/3d-touch-with-swift">3D Touch with Swift</a></p>
<p>3D touch has been introduced with iPhone 6s Plus. There are two behaviors added with this new interface layer: Peek and Pop.</p>
<p><strong>Peek and Pop in a nutshell</strong></p>
<p>Peek - Press hard</p>
<p>Pop - Press really hard</p>
<p><strong>Checking for 3D support</strong></p>
<p>You should check if the device has a 3D touch support. You can do this by checking the value ofÂ <em>forceTouchCapability</em>Â property of aÂ <em>UITraitCollection</em>Â object. UITraitCollection describes the iOS interface environment for your app.</p>
<pre><code>if (traitCollection.forceTouchCapability == .Available) {    
    registerForPreviewingWithDelegate(self, sourceView: view)
}
</code></pre>
<p><strong>Implementing the delegate</strong></p>
<p>You need to implement the two methods ofÂ <em>UIViewControllerPreviewingDelegate</em>Â in your class. One of the methods is forÂ <em>peek</em>Â and the other one is forÂ <em>pop</em>Â behavior.</p>
<p>The method to be implemented for theÂ <em>peek</em>Â isÂ <em>previewingContext</em>.</p>
<pre><code>func previewingContext(previewingContext: UIViewControllerPreviewing, viewControllerForLocation location: CGPoint) -&gt; UIViewController? {

    guard let indexPath = self.tableView.indexPathForRowAtPoint(location), cell = self.tableView.cellForRowAtIndexPath(indexPath) as? &lt;YourTableViewCell&gt; else {
        return nil
    }

    guard let datailVC = storyboard?.instantiateViewControllerWithIdentifier(&quot;&lt;YourViewControllerIdentifier&gt;&quot;) as? &lt;YourViewController&gt; else {
        return nil
    }

    datailVC.peekActive = true
    previewingContext.sourceRect = cell.frame

    // Do the stuff

    return datailVC

}
</code></pre>
<p>The method to be implemented for theÂ <em>pop</em>Â isÂ <em>previewingContext</em>. :)</p>
<pre><code>func previewingContext(previewingContext: UIViewControllerPreviewing, commitViewController viewControllerToCommit: UIViewController) {

    let balanceViewController = viewControllerToCommit as! &lt;YourViewController&gt;

    // Do the stuff

    navigationController?.pushViewController(balanceViewController, animated: true)

}
</code></pre>
<p>As you can see they are overloaded methods. You can use 3D touch in any way implementing these methods.</p>
<p><strong>Objective-C</strong></p>
<pre><code>//Checking for 3-D Touch availability
if ([self.traitCollection respondsToSelector:@selector(forceTouchCapability)] &amp;&amp;
        (self.traitCollection.forceTouchCapability == UIForceTouchCapabilityAvailable))
    {
        [self registerForPreviewingWithDelegate:self sourceView:self.view];
    }
//Peek
- (UIViewController *)previewingContext:(id&lt;UIViewControllerPreviewing&gt;)previewingContext
              viewControllerForLocation:(CGPoint)location {

    NSIndexPath *indexPath = [self.tableView indexPathForRowAtPoint:location];
    Country *country = [self countryForIndexPath:indexPath];
    if (country) {
        CountryCell *cell = [self.tableView cellForRowAtIndexPath:indexPath];
        if (cell) {
            previewingContext.sourceRect = cell.frame;
            UINavigationController *navController = [self.storyboard instantiateViewControllerWithIdentifier:@&quot;UYLCountryNavController&quot;];
            [self configureNavigationController:navController withCountry:country];
            return navController;
        }
    }
    return nil;
}
//Pop
- (void)previewingContext:(id&lt;UIViewControllerPreviewing&gt;)previewingContext commitViewController:(UIViewController *)viewControllerToCommit {

    [self showDetailViewController:viewControllerToCommit sender:self];
}
</code></pre>


		</div>

		

	</article>
 
	<article>
		 <header>
		  	<h1 class="entry-title"><a href="15038463059094.html">CAGradientLayer</a></h1>
			<p class="meta"><time datetime="2017-08-27T23:05:05+08:00" 
			pubdate data-updated="true">2017/8/27</time></p>
		 </header>
	  	<div class="entry-content">
		  	
		  	<h2><a id="creating-a-cagradientlayer-https-stackoverflow-comdocumentationios1190cagradientlayer3856creating-a-cagradientlayer" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a><a href="https://stackoverflow.com/documentation/ios/1190/cagradientlayer/3856/creating-a-cagradientlayer">Creating a CAGradientLayer</a></h2>
<pre><code>// View to hold the CAGradientLayer.
let view: UIView = UIView(frame: CGRect(x: 0, y: 0, width: 320, height: 320))

// Initialize gradient layer.
let gradientLayer: CAGradientLayer = CAGradientLayer()

// Set frame of gradient layer.
gradientLayer.frame = view.bounds

// Color at the top of the gradient.
let topColor: CGColor = UIColor.red.cgColor

// Color at the bottom of the gradient.
let bottomColor: CGColor = UIColor.yellow.cgColor

// Set colors.
gradientLayer.colors = [topColor, bottomColor]

// Set locations of the colors.
gradientLayer.locations = [0.0, 1.0]

// Insert gradient layer into view's layer heirarchy.
view.layer.insertSublayer(gradientLayer, at: 0)
</code></pre>
<p>Result :</p>
<p><img src="media/15038463059094/q26bv.png" alt="Simple CAGradientLayer." /></p>
<p>##<a href="https://stackoverflow.com/documentation/ios/1190/cagradientlayer/12652/animating-a-color-change-in-cagradientlayer">Animating a color change in CAGradientLayer.</a></p>
<pre><code>// Get the current colors of the gradient.
let oldColors = self.gradientLayer.colors

// Define the new colors for the gradient.
let newColors = [UIColor.red.cgColor, UIColor.yellow.cgColor]

// Set the new colors of the gradient.
self.gradientLayer.colors = newColors

// Initialize new animation for changing the colors of the gradient.
let animation: CABasicAnimation = CABasicAnimation(keyPath: &quot;colors&quot;)

// Set current color value.
animation.fromValue = oldColors

// Set new color value.
animation.toValue = newColors

// Set duration of animation.
animation.duration = 0.3

// Set animation to remove once its completed.
animation.isRemovedOnCompletion = true

// Set receiver to remain visible in its final state when the animation is completed.
animation.fillMode = kCAFillModeForwards

// Set linear pacing, which causes an animation to occur evenly over its duration.
animation.timingFunction = CAMediaTimingFunction(name: kCAMediaTimingFunctionLinear)

// Set delegate of animation.
animation.delegate = self

// Add the animation.
self.gradientLayer.addAnimation(animation, forKey: &quot;animateGradientColorChange&quot;)
</code></pre>
<p>Result :</p>
<p><img src="media/15038463059094/AquKd.gif" alt="Basic CAGradientLayer color change animation." /></p>
<p>##<a href="https://stackoverflow.com/documentation/ios/1190/cagradientlayer/4229/creating-a-horizontal-cagradientlayer-with-multiple-colors">Creating a horizontal CAGradientLayer with multiple colors.</a></p>
<pre><code>// View to hold the CAGradientLayer.
let view: UIView = UIView(frame: CGRect(x: 0, y: 0, width: 320, height: 320))

// Initialize gradient layer.
let gradientLayer: CAGradientLayer = CAGradientLayer()

// Set frame of gradient layer.
gradientLayer.frame = view.bounds

// Color at the top of the gradient.
let topColor: CGColor = UIColor.greenColor().CGColor

// Color at the middle of the gradient.
let middleColor: CGColor = UIColor.blueColor().CGColor

// Color at the bottom of the gradient.
let bottomColor: CGColor = UIColor.blackColor().CGColor

// Set colors.
gradientLayer.colors = [topColor, middleColor, bottomColor]

// Set start point.
gradientLayer.startPoint = CGPoint(x: 0.0, y: 0.5)

// Set end point.
gradientLayer.endPoint = CGPoint(x: 1.0, y: 0.5)

// Insert gradient layer into view's layer heirarchy.
view.layer.insertSublayer(gradientLayer, atIndex: 0)
</code></pre>
<p>Result :</p>
<p><img src="media/15038463059094/I4OGH.png" alt="enter image description here" /></p>
<p>##<a href="https://stackoverflow.com/documentation/ios/1190/cagradientlayer/4228/creating-a-horizontal-cagradientlayer">Creating a horizontal CAGradientLayer.</a></p>
<pre><code>// View to hold the CAGradientLayer.
let view: UIView = UIView(frame: CGRect(x: 0, y: 0, width: 320, height: 320))

// Initialize gradient layer.
let gradientLayer: CAGradientLayer = CAGradientLayer()

// Set frame of gradient layer.
gradientLayer.frame = view.bounds

// Color at the top of the gradient.
let topColor: CGColor = UIColor.redColor().CGColor

// Color at the bottom of the gradient.
let bottomColor: CGColor = UIColor.yellowColor().CGColor

// Set colors.
gradientLayer.colors = [topColor, bottomColor]

// Set start point.
gradientLayer.startPoint = CGPoint(x: 0.0, y: 0.5)

// Set end point.
gradientLayer.endPoint = CGPoint(x: 1.0, y: 0.5)

// Insert gradient layer into view's layer heirarchy.
view.layer.insertSublayer(gradientLayer, atIndex: 0)
</code></pre>
<p>Result :</p>
<p><img src="media/15038463059094/7VCnW.png" alt="Horizontal CAGradientLayer." /></p>
<p>##<a href="https://stackoverflow.com/documentation/ios/1190/cagradientlayer/4227/creating-a-cggradientlayer-with-multiple-colors">Creating a CGGradientLayer with multiple colors.</a></p>
<pre><code>// View to hold the CAGradientLayer.
let view: UIView = UIView(frame: CGRect(x: 0, y: 0, width: 320, height: 320))

// Initialize gradient layer.
let gradientLayer: CAGradientLayer = CAGradientLayer()

// Set frame of gradient layer.
gradientLayer.frame = view.bounds

// Color at the top of the gradient.
let topColor: CGColor = UIColor.blue.cgColor

// Color at the middle of the gradient.
let middleColor: CGColor = UIColor.yellow.cgColor

// Color at the bottom of the gradient.
let bottomColor: CGColor = UIColor.green.cgColor

// Set colors.
gradientLayer.colors = [topColor, middleColor, bottomColor]

// Set locations of the colors.
gradientLayer.locations = [0.0, 0.5, 1.0]

// Insert gradient layer into view's layer heirarchy.
view.layer.insertSublayer(gradientLayer, at: 0)
</code></pre>
<p>Result :</p>
<p><img src="media/15038463059094/tV4OL.png" alt="Complex CAGradientLayer." /></p>
<hr />
<h2><a id="syntax" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>Syntax</h2>
<pre><code>CAGradientLayer() // Returns an initialized CALayer object.
-------------------
CAGradientLayer(layer: layer) // Override to copy or initialize custom fields of the specified layer.
</code></pre>
<h2><a id="parameters" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h2>
<table>
<thead>
<tr>
<th style="text-align: left">Parameter</th>
<th style="text-align: left">Details</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left">color</td>
<td style="text-align: left">An array ofÂ <code>CGColorRef</code>Â objects defining the color of each gradient stop. Animatable.</td>
</tr>
<tr>
<td style="text-align: left">locations</td>
<td style="text-align: left">An optional array ofÂ <code>NSNumber</code>Â objects defining the location of each gradient stop. Animatable.</td>
</tr>
<tr>
<td style="text-align: left">endPoint</td>
<td style="text-align: left">The end point of the gradient when drawn in the layerâ€™s coordinate space. Animatable.</td>
</tr>
<tr>
<td style="text-align: left">startPoint</td>
<td style="text-align: left">The start point of the gradient when drawn in the layerâ€™s coordinate space. Animatable.</td>
</tr>
<tr>
<td style="text-align: left">type</td>
<td style="text-align: left">Style of gradient drawn by the layer. Defaults toÂ <code>kCAGradientLayerAxial</code>.</td>
</tr>
</tbody>
</table>
<h2><a id="remarks" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>Remarks</h2>
<ul>
<li>UseÂ <code>startPoint</code>Â andÂ <code>endPoint</code>Â to change the orientation of theÂ <code>CAGradientLayer</code>.</li>
<li>Use theÂ <code>locations</code>Â to affect the spread/positions of the colors.</li>
</ul>


		</div>

		

	</article>
 
	<article>
		 <header>
		  	<h1 class="entry-title"><a href="15036540820094.html">Custom UIViews from XIB files</a></h1>
			<p class="meta"><time datetime="2017-08-25T17:41:22+08:00" 
			pubdate data-updated="true">2017/8/25</time></p>
		 </header>
	  	<div class="entry-content">
		  	
		  	<p>##<a href="https://stackoverflow.com/documentation/ios/1362/custom-uiviews-from-xib-files/4443/wiring-elements">Wiring elements</a></p>
<ul>
<li></li>
</ul>
<pre><code>&gt; Create a XIB file

Xcode Menu Bar &gt; File &gt; New &gt; File.
Select iOS, User Interface and then &quot;View&quot;:

[![First step](media/15036540820094/RSkzu.png)](media/15036540820094/RSkzu.png)

Give your XIB a name (yes, we are doing a Pokemon example ğŸ‘¾).
**Remember to check your target**Â and hit &quot;Create&quot;.

[![Second step](media/15036540820094/oJ1s1.png)](media/15036540820094/oJ1s1.png)

&gt; Design your view

To make things easier, set:

* Size: Freeform
* Status Bar: None
* Top Bar: None
* Bottom Bar: None

[![Third step](media/15036540820094/Gy0KD.png)](media/15036540820094/Gy0KD.png)

Click on the Size Inspector and resize the view.
For this example we'll be using width 321 and height 256.

[![Fourth step](media/15036540820094/PNIek.png)](media/15036540820094/PNIek.png)

Drop some elements into your XIB file like shown below.
Here we'll be adding anÂ **Image View**Â (256x256) and aÂ **Switch**.

[![Fifth step](media/15036540820094/6u3pd.png)](media/15036540820094/6u3pd.png)

Add Auto-Layout constraints by clicking on &quot;Resolve Auto Layout Issues&quot; (bottom-right) and selecting &quot;Add Missing Constraints&quot; under &quot;All Views&quot;.

[![Sixth step](media/15036540820094/esZhQ.png)](media/15036540820094/esZhQ.png)

Preview the changes you made by clicking on &quot;Show the Assistant Editor&quot; (top-right), then &quot;Preview&quot;.
You can add iPhone screens by clicking on the &quot;Plus&quot; button.
The preview should look like this:

[![Seventh step](media/15036540820094/D3rac.png)](media/15036540820094/D3rac.png)

&gt; Subclass UIView

Create the class that is going to manage the XIB file.
Xcode Menu Bar &gt; File &gt; New &gt; File.
Select iOS / Source / Cocoa Touch Class. Hit &quot;Next&quot;.

[![Eighth step](media/15036540820094/0EyHy.png)](media/15036540820094/0EyHy.png)

Give the class a name, which must be the same name as the XIB file (Pokemon).
Select UIView as the subclass type, then hit &quot;Next&quot;.

[![Nineth step](media/15036540820094/qbo3s.png)](media/15036540820094/qbo3s.png)

On the next window, select your target and hit &quot;Create&quot;.

[![Tenth step](media/15036540820094/Ks9Tu.png)](media/15036540820094/Ks9Tu.png)

&gt; Connect Pokemon.xib to Pokemon.swift via &quot;Fileâ€™s Owner&quot; attribute

Click on the Pokemon.xib file in Xcode.
Click on the &quot;File's Owner&quot; outlet.
On the &quot;Identity inspector&quot; (top-right), set the Class to our recently created Pokemon.swift file.

[![Eleventh step](media/15036540820094/4YT3i.png)](media/15036540820094/4YT3i.png)

&gt; POKEMONS!!!

Yes! Drag and drop some Pokemons into your project to finish up our &quot;infrastructure&quot;.
Here we are adding two PGN files, 256x256, transparent.

[![Twelfth step](media/15036540820094/ibqxZ.png)](media/15036540820094/ibqxZ.png)

&gt; Show me code already.

All right, all right.
Time to add some code to our Pokemon.swift class.

It's actually pretty simple:

1. Implement required initializers
2. Load the XIB file
3. Configure the view that will display the XIB file
4. Show the above view

Add the following code to the Pokemon.swift class:

```
import UIKit

class Pokemon: UIView {

    // MARK: - Initializers

    override init(frame: CGRect) {
        super.init(frame: frame)
        setupView()
    }

    required init?(coder aDecoder: NSCoder) {
        super.init(coder: aDecoder)
        setupView()
    }

    // MARK: - Private Helper Methods

    // Performs the initial setup.
    private func setupView() {
        let view = viewFromNibForClass()
        view.frame = bounds

        // Auto-layout stuff.
        view.autoresizingMask = [
            UIViewAutoresizing.flexibleWidth,
            UIViewAutoresizing.flexibleHeight
        ]

        // Show the view.
        addSubview(view)
    }

    // Loads a XIB file into a view and returns this view.
    private func viewFromNibForClass() -&gt; UIView {

        let bundle = Bundle(for: type(of: self))
        let nib = UINib(nibName: String(describing: type(of: self)), bundle: bundle)
        let view = nib.instantiate(withOwner: self, options: nil).first as! UIView

        /* Usage for swift &lt; 3.x
        let bundle = NSBundle(forClass: self.dynamicType)
        let nib = UINib(nibName: String(self.dynamicType), bundle: bundle)
        let view = nib.instantiateWithOwner(self, options: nil)[0] as! UIView
        */

        return view
    }
}

```

&gt; @IBDesignable and @IBInspectable

By addingÂ `@IBDesignable`Â to your class, you make possible for it to live-render in Interface Builder.
By addingÂ `@IBInspectable`Â to the properties of your class, you can see your custom views changing in Interface Builder as soon as you modify those properties.

Let's make theÂ `Image View`Â of our custom view &quot;Inspectable&quot;.

First, hook up theÂ `Image View`Â from the Pokemon.xib file to the Pokemon.swift class.

[![Thirteenth step](media/15036540820094/Dxyv2.png)](media/15036540820094/Dxyv2.png)

Call the outletÂ `imageView`Â and then add the following code (notice theÂ `@IBDesignable`Â before the class name):

```
@IBDesignable class Pokemon: UIView {

    // MARK: - Properties

    @IBOutlet weak var imageView: UIImageView!

    @IBInspectable var image: UIImage? {
        get {
            return imageView.image
        }
        set(image) {
            imageView.image = image
        }
    }

    // MARK: - Initializers
    ...

```

&gt; Using your Custom Views

Got to your Main storyboard file, drag a UIView into it.
Resize the view to, say 200x200\. Centralize.
Go to the Identity inspector (top-right) and set the Class to Pokemon.

[![Fourteenth steps](media/15036540820094/Iah3Y.png)](media/15036540820094/Iah3Y.png)

To select a Pokemon, go to the Attribute Inspector (top-right) and select one of the Pokemon images you previously added using the awesomeÂ `@IBInspectable`Â image property.

[![Fifteenth step](media/15036540820094/727mm.png)](media/15036540820094/727mm.png)

Now duplicate your custom Pokemon view.
Give it a different size, say 150x150.
Choose another Pokemon image, observe:

[![Sixteenth step](media/15036540820094/xrTXw.png)](media/15036540820094/xrTXw.png)

Now we are going to add more logic to that self-containing custom UI element.
The button will allow Pokemons to be enabled/disabled.

Create anÂ `IBAction`Â from the Switch button to the Pokemon.swift class.
Call the action something likeÂ `switchTapped`.
Add the following code to it:

```
// MARK: - Actions

@IBAction func switchTapped(sender: UISwitch) {
    imageView.alpha = sender.on ? 1.0 : 0.2
}

// MARK: - Initializers
...

```

Final result:

[![Final](media/15036540820094/DQJvO.gif)](media/15036540820094/DQJvO.gif)

You are done!
Now you can create complex custom views and reuse them anywhere you want.
This will increase productivity while isolating code into self-contained UI elements.

[The final project can be cloned in Github.](https://github.com/singledev/custom-uiviews-from-xib)
(**Updated to Swift 3.1**)
</code></pre>
<p>##<a href="https://stackoverflow.com/documentation/ios/1362/custom-uiviews-from-xib-files/11599/how-to-make-custom-reusable-uiview-using-xib">How to make custom reusable UIView using XIB</a></p>
<p>Following example shows steps involved in initializing a view from XIB.</p>
<p>This is not a complex operation but exact steps need to be followed in order to do it right way first time, avoiding exceptions.</p>
<p><a href="http://stackoverflow.com/questions/20323393/how-does-loadnibnamed-work-uiview-outlets-not-initializing-using-loadnibnamed">How does loadNibNamed Works</a></p>
<p>Main steps are:</p>
<ol>
<li>
<p>Create XIB</p>
</li>
<li>
<p>Create class .h and .m</p>
</li>
<li>
<p>Define outlets in .h</p>
</li>
<li>
<p>Connect outlets between .h and XIB</p>
<p>See attached screenshot:</p>
<p><a href="media/15036540820094/rSBw6.png"><img src="media/15036540820094/rSBw6.png" alt="Label Object connected to myLabel IBOutlet UILabel variable" /></a></p>
</li>
<li>
<p>Invoke loadNibNamed inside initWithCoder function of .m file. This is needed to ensure you can directly place UIView object into storyboard / Parent UIView XIB file and define it as your custom view. No other initialization code is needed once you load the storyboard / parent XIB. Your custom view can be added to other views just like other built-in Objective C view objects given in XCode.</p>
</li>
</ol>


		</div>

		

	</article>
  
	<div class="pagination">
	 <a class="prev" href="all_12.html">&larr; Older</a> 
<a href="archives.html">Blog Archives</a>
	 <a class="next" href="all_10.html">Newer &rarr;</a>  
	    
	</div>
</div>
 <aside class="sidebar"> 

	<section>
	  <h1>Categories</h1>
	  <ul id="recent_posts">
	  
	      <li class="post">
	        <a href="%E5%8E%9F%E7%90%86%E6%8E%A2%E7%A9%B6.html"><strong>åŸç†æ¢ç©¶&nbsp;(8)</strong></a>
	        
	        
	        
	      </li>
	  
	      <li class="post">
	        <a href="%E6%8A%80%E5%B7%A7.html"><strong>æŠ€å·§&nbsp;(34)</strong></a>
	        
	        
	        
	      </li>
	  
	      <li class="post">
	        <a href="%E6%95%99%E7%A8%8B.html"><strong>æ•™ç¨‹&nbsp;(23)</strong></a>
	        
	        
	        
	      </li>
	  
	      <li class="post">
	        <a href="%E9%81%87%E5%88%B0Bug.html"><strong>é‡åˆ°Bug&nbsp;(12)</strong></a>
	        
	        
	        
	      </li>
	  
	      <li class="post">
	        <a href="%E6%9D%82%E8%AE%B0.html"><strong>æ‚è®°&nbsp;(16)</strong></a>
	        
	        
	        
	      </li>
	  
	      <li class="post">
	        <a href="Swift.html"><strong>Swift&nbsp;(23)</strong></a>
	        
	        
	        
	      </li>
	  
	      <li class="post">
	        <a href="C/C++.html"><strong>C/C++&nbsp;(4)</strong></a>
	        
	        
	        
	      </li>
	  
	      <li class="post">
	        <a href="Linux.html"><strong>Linux&nbsp;(3)</strong></a>
	        
	        
	        
	      </li>
	  
	      <li class="post">
	        <a href="Documentation.html"><strong>Documentation&nbsp;(8)</strong></a>
	        
	        
	        
	      </li>
	  
	      <li class="post">
	        <a href="Java.html"><strong>Java&nbsp;(7)</strong></a>
	        
	        
	        
	      </li>
	  
	      <li class="post">
	        <a href="LeetCode.html"><strong>LeetCode&nbsp;(3)</strong></a>
	        
	        
	        
	      </li>
	  
	      <li class="post">
	        <a href="Flutter.html"><strong>Flutter&nbsp;(2)</strong></a>
	        
	        
	        
	      </li>
	   
	  </ul>
	</section>
	<section>
	  <h1>Recent Posts</h1>
	  <ul id="recent_posts">
	  
	      
		      <li class="post">
		        <a href="16292522945585.html">é¿å…å’ŒWillPopScopeä¸iOSæ‰‹åŠ¿å†²çª</a>
		      </li>
	     
	  
	      
		      <li class="post">
		        <a href="16291783311992.html">æ–¹ä¾¿å®ç”¨çš„å°ç»„ä»¶</a>
		      </li>
	     
	  
	      
		      <li class="post">
		        <a href="16267829476143.html">Flutter ä¸­ TabBarView ç‚¹å‡»åˆ‡æ¢ï¼Œç›‘å¬ä¼šè°ƒç”¨å¤šå‡º</a>
		      </li>
	     
	  
	      
		      <li class="post">
		        <a href="16267690953146.html">Flutter ä¸­ listView åµŒå¥— listView</a>
		      </li>
	     
	  
	      
		      <li class="post">
		        <a href="16261554677251.html">Flutterä¸­Rowä¸­çš„å­æ§ä»¶å·¦å³ä¸¤ç«¯å¯¹é½</a>
		      </li>
	     
	  
	      
	  
	      
	  
	      
	  
	      
	  
	      
	  
	      
	  
	      
	  
	      
	  
	      
	  
	      
	  
	      
	  
	      
	  
	      
	  
	      
	  
	      
	   
	  </ul>
	</section>
	
</aside> </div></div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 -  -
  <span class="credit">Powered by <a target="_blank" href="http://www.mweb.im">MWeb</a> &nbsp;&nbsp; Theme by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>



  














<style type="text/css">
  
/* PrismJS 1.14.0
https://prismjs.com/download.html#themes=prism-solarizedlight&languages=markup+css+clike+javascript */
/*
 Solarized Color Schemes originally by Ethan Schoonover
 http://ethanschoonover.com/solarized

 Ported for PrismJS by Hector Matos
 Website: https://krakendev.io
 Twitter Handle: https://twitter.com/allonsykraken)
*/

/*
SOLARIZED HEX
--------- -------
base03    #002b36
base02    #073642
base01    #586e75
base00    #657b83
base0     #839496
base1     #93a1a1
base2     #eee8d5
base3     #fdf6e3
yellow    #b58900
orange    #cb4b16
red       #dc322f
magenta   #d33682
violet    #6c71c4
blue      #268bd2
cyan      #2aa198
green     #859900
*/

code[class*="language-"],
pre[class*="language-"] {
  color: #657b83; /* base00 */
  font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  text-align: left;
  white-space: pre;
  word-spacing: normal;
  word-break: normal;
  word-wrap: normal;

  line-height: 1.5;

  -moz-tab-size: 4;
  -o-tab-size: 4;
  tab-size: 4;

  -webkit-hyphens: none;
  -moz-hyphens: none;
  -ms-hyphens: none;
  hyphens: none;
}

pre[class*="language-"]::-moz-selection, pre[class*="language-"] ::-moz-selection,
code[class*="language-"]::-moz-selection, code[class*="language-"] ::-moz-selection {
  background: #073642; /* base02 */
}

pre[class*="language-"]::selection, pre[class*="language-"] ::selection,
code[class*="language-"]::selection, code[class*="language-"] ::selection {
  background: #073642; /* base02 */
}

/* Code blocks */
pre[class*="language-"] {
  padding: 1em;
  margin: .5em 0;
  overflow: auto;
  border-radius: 0.3em;
}

:not(pre) > code[class*="language-"],
pre[class*="language-"] {
  background-color: #fdf6e3; /* base3 */
}

/* Inline code */
:not(pre) > code[class*="language-"] {
  padding: .1em;
  border-radius: .3em;
}

.token.comment,
.token.prolog,
.token.doctype,
.token.cdata {
  color: #93a1a1; /* base1 */
}

.token.punctuation {
  color: #586e75; /* base01 */
}

.namespace {
  opacity: .7;
}

.token.property,
.token.tag,
.token.boolean,
.token.number,
.token.constant,
.token.symbol,
.token.deleted {
  color: #268bd2; /* blue */
}

.token.selector,
.token.attr-name,
.token.string,
.token.char,
.token.builtin,
.token.url,
.token.inserted {
  color: #2aa198; /* cyan */
}

.token.entity {
  color: #657b83; /* base00 */
  background: #eee8d5; /* base2 */
}

.token.atrule,
.token.attr-value,
.token.keyword {
  color: #859900; /* green */
}

.token.function,
.token.class-name {
  color: #b58900; /* yellow */
}

.token.regex,
.token.important,
.token.variable {
  color: #cb4b16; /* orange */
}

.token.important,
.token.bold {
  font-weight: bold;
}
.token.italic {
  font-style: italic;
}

.token.entity {
  cursor: help;
}


pre[class*="language-"].line-numbers {
    position: relative;
    padding-left: 3.8em;
    counter-reset: linenumber;
}

pre[class*="language-"].line-numbers > code {
    position: relative;
    white-space: inherit;
}

.line-numbers .line-numbers-rows {
    position: absolute;
    pointer-events: none;
    top: 0;
    font-size: 100%;
    left: -3.8em;
    width: 3em; /* works for line-numbers below 1000 lines */
    letter-spacing: -1px;
    border-right: 1px solid #999;

    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;

}

    .line-numbers-rows > span {
        pointer-events: none;
        display: block;
        counter-increment: linenumber;
    }

        .line-numbers-rows > span:before {
            content: counter(linenumber);
            color: #999;
            display: block;
            padding-right: 0.8em;
            text-align: right;
        }

</style>
  
    


</body>
</html>