
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>
    
  Custom UIViews from XIB files - æå°äº‰
  

  </title>
  <meta name="author" content="">
  <meta name="description" content="è®°å½•å¼€å‘ä¸­é‡åˆ°çš„ä¸€äº›é—®é¢˜">

  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <link href="asset/css/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="atom.xml" rel="alternate" title="æå°äº‰" type="application/atom+xml">
  <script src="asset/js/modernizr-2.0.js"></script>
  <script src="asset/js/jquery.min.js"></script>
  <style type="text/css">
  .cat-children-p{ padding: 6px 0px;}
  .hljs{background: none;}
  </style>
  <script type="text/javascript">
  var isAddSildbar = true;
  </script>
  <script src="asset/js/octopress.js" type="text/javascript"></script>
</head>
<script type="text/javascript">
//é“¾æ¥æ–°å¼€çª—å£
function addBlankTargetForLinks () {
  $('a[href^="http"]').each(function(){
      $(this).attr('target', '_blank');
  });
}
$(document).ready(function(event) {
  addBlankTargetForLinks();
});
</script>
<body   >
  <header role="banner"><hgroup>
  <h1><a href="index.html">æå°äº‰</a></h1>
  
    <h2>è®°å½•å¼€å‘ä¸­é‡åˆ°çš„ä¸€äº›é—®é¢˜</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:www.citynight.cn/Blog" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">

  <li id=""><a target="self" href="index.html">Home</a></li>

  <li id=""><a target="_self" href="archives.html">Archives</a></li>

</ul>

</nav>
  <div id="main">
    <div id="content"> 
<div>
	<article class="hentry" role="article">
	<header>
			  	<h1 class="entry-title">Custom UIViews from XIB files</h1>
				<p class="meta"><time datetime="2017-08-25T17:41:22+08:00" pubdate data-updated="true">2017/8/25</time></p>
			 </header>
		  	<div class="entry-content">
			  	<h2 id="toc_0"><a href="https://stackoverflow.com/documentation/ios/1362/custom-uiviews-from-xib-files/4443/wiring-elements">Wiring elements</a></h2>

<ul>
<li><blockquote>
<p>Create a XIB file</p>
</blockquote>
<p>Xcode Menu Bar &gt; File &gt; New &gt; File.<br/>
Select iOS, User Interface and then &quot;View&quot;:</p>
<p><a href="media/15036540820094/RSkzu.png"><img src="media/15036540820094/RSkzu.png" alt="First step"/></a></p>
<p>Give your XIB a name (yes, we are doing a Pokemon example ğŸ‘¾).<br/>
<strong>Remember to check your target</strong>Â and hit &quot;Create&quot;.</p>
<p><a href="media/15036540820094/oJ1s1.png"><img src="media/15036540820094/oJ1s1.png" alt="Second step"/></a></p>
<blockquote>
<p>Design your view</p>
</blockquote>
<p>To make things easier, set:</p>
<ul>
<li>Size: Freeform</li>
<li>Status Bar: None</li>
<li>Top Bar: None</li>
<li>Bottom Bar: None</li>
</ul>
<p><a href="media/15036540820094/Gy0KD.png"><img src="media/15036540820094/Gy0KD.png" alt="Third step"/></a></p>
<p>Click on the Size Inspector and resize the view.<br/>
For this example we&#39;ll be using width 321 and height 256.</p>
<p><a href="media/15036540820094/PNIek.png"><img src="media/15036540820094/PNIek.png" alt="Fourth step"/></a></p>
<p>Drop some elements into your XIB file like shown below.<br/>
Here we&#39;ll be adding anÂ <strong>Image View</strong>Â (256x256) and aÂ <strong>Switch</strong>.</p>
<p><a href="media/15036540820094/6u3pd.png"><img src="media/15036540820094/6u3pd.png" alt="Fifth step"/></a></p>
<p>Add Auto-Layout constraints by clicking on &quot;Resolve Auto Layout Issues&quot; (bottom-right) and selecting &quot;Add Missing Constraints&quot; under &quot;All Views&quot;.</p>
<p><a href="media/15036540820094/esZhQ.png"><img src="media/15036540820094/esZhQ.png" alt="Sixth step"/></a></p>
<p>Preview the changes you made by clicking on &quot;Show the Assistant Editor&quot; (top-right), then &quot;Preview&quot;.<br/>
You can add iPhone screens by clicking on the &quot;Plus&quot; button.<br/>
The preview should look like this:</p>
<p><a href="media/15036540820094/D3rac.png"><img src="media/15036540820094/D3rac.png" alt="Seventh step"/></a></p>
<blockquote>
<p>Subclass UIView</p>
</blockquote>
<p>Create the class that is going to manage the XIB file.<br/>
Xcode Menu Bar &gt; File &gt; New &gt; File.<br/>
Select iOS / Source / Cocoa Touch Class. Hit &quot;Next&quot;.</p>
<p><a href="media/15036540820094/0EyHy.png"><img src="media/15036540820094/0EyHy.png" alt="Eighth step"/></a></p>
<p>Give the class a name, which must be the same name as the XIB file (Pokemon).<br/>
Select UIView as the subclass type, then hit &quot;Next&quot;.</p>
<p><a href="media/15036540820094/qbo3s.png"><img src="media/15036540820094/qbo3s.png" alt="Nineth step"/></a></p>
<p>On the next window, select your target and hit &quot;Create&quot;.</p>
<p><a href="media/15036540820094/Ks9Tu.png"><img src="media/15036540820094/Ks9Tu.png" alt="Tenth step"/></a></p>
<blockquote>
<p>Connect Pokemon.xib to Pokemon.swift via &quot;Fileâ€™s Owner&quot; attribute</p>
</blockquote>
<p>Click on the Pokemon.xib file in Xcode.<br/>
Click on the &quot;File&#39;s Owner&quot; outlet.<br/>
On the &quot;Identity inspector&quot; (top-right), set the Class to our recently created Pokemon.swift file.</p>
<p><a href="media/15036540820094/4YT3i.png"><img src="media/15036540820094/4YT3i.png" alt="Eleventh step"/></a></p>
<blockquote>
<p>POKEMONS!!!</p>
</blockquote>
<p>Yes! Drag and drop some Pokemons into your project to finish up our &quot;infrastructure&quot;.<br/>
Here we are adding two PGN files, 256x256, transparent.</p>
<p><a href="media/15036540820094/ibqxZ.png"><img src="media/15036540820094/ibqxZ.png" alt="Twelfth step"/></a></p>
<blockquote>
<p>Show me code already.</p>
</blockquote>
<p>All right, all right.<br/>
Time to add some code to our Pokemon.swift class.</p>
<p>It&#39;s actually pretty simple:</p>
<ol>
<li>Implement required initializers</li>
<li>Load the XIB file</li>
<li>Configure the view that will display the XIB file</li>
<li>Show the above view</li>
</ol>
<p>Add the following code to the Pokemon.swift class:</p>
<pre><code class="language-text">import UIKit
class Pokemon: UIView {<br/>
    // MARK: - Initializers<br/>
    override init(frame: CGRect) {<br/>
        super.init(frame: frame)<br/>
        setupView()<br/>
    }<br/>
    required init?(coder aDecoder: NSCoder) {<br/>
        super.init(coder: aDecoder)<br/>
        setupView()<br/>
    }<br/>
    // MARK: - Private Helper Methods<br/>
    // Performs the initial setup.<br/>
    private func setupView() {<br/>
        let view = viewFromNibForClass()<br/>
        view.frame = bounds<br/>
        // Auto-layout stuff.<br/>
        view.autoresizingMask = [<br/>
            UIViewAutoresizing.flexibleWidth,<br/>
            UIViewAutoresizing.flexibleHeight<br/>
        ]<br/>
        // Show the view.<br/>
        addSubview(view)<br/>
    }<br/>
    // Loads a XIB file into a view and returns this view.<br/>
    private func viewFromNibForClass() -&gt; UIView {<br/>
        let bundle = Bundle(for: type(of: self))<br/>
        let nib = UINib(nibName: String(describing: type(of: self)), bundle: bundle)<br/>
        let view = nib.instantiate(withOwner: self, options: nil).first as! UIView<br/>
        /* Usage for swift &lt; 3.x<br/>
        let bundle = NSBundle(forClass: self.dynamicType)<br/>
        let nib = UINib(nibName: String(self.dynamicType), bundle: bundle)<br/>
        let view = nib.instantiateWithOwner(self, options: nil)[0] as! UIView<br/>
        */<br/>
        return view<br/>
    }<br/>
}
</code></pre>
<blockquote>
<p>@IBDesignable and @IBInspectable</p>
</blockquote>
<p>By addingÂ <code>@IBDesignable</code>Â to your class, you make possible for it to live-render in Interface Builder.<br/>
By addingÂ <code>@IBInspectable</code>Â to the properties of your class, you can see your custom views changing in Interface Builder as soon as you modify those properties.</p>
<p>Let&#39;s make theÂ <code>Image View</code>Â of our custom view &quot;Inspectable&quot;.</p>
<p>First, hook up theÂ <code>Image View</code>Â from the Pokemon.xib file to the Pokemon.swift class.</p>
<p><a href="media/15036540820094/Dxyv2.png"><img src="media/15036540820094/Dxyv2.png" alt="Thirteenth step"/></a></p>
<p>Call the outletÂ <code>imageView</code>Â and then add the following code (notice theÂ <code>@IBDesignable</code>Â before the class name):</p>
<pre><code class="language-text">@IBDesignable class Pokemon: UIView {
    // MARK: - Properties<br/>
    @IBOutlet weak var imageView: UIImageView!<br/>
    @IBInspectable var image: UIImage? {<br/>
        get {<br/>
            return imageView.image<br/>
        }<br/>
        set(image) {<br/>
            imageView.image = image<br/>
        }<br/>
    }<br/>
    // MARK: - Initializers<br/>
    ...
</code></pre>
<blockquote>
<p>Using your Custom Views</p>
</blockquote>
<p>Got to your Main storyboard file, drag a UIView into it.<br/>
Resize the view to, say 200x200. Centralize.<br/>
Go to the Identity inspector (top-right) and set the Class to Pokemon.</p>
<p><a href="media/15036540820094/Iah3Y.png"><img src="media/15036540820094/Iah3Y.png" alt="Fourteenth steps"/></a></p>
<p>To select a Pokemon, go to the Attribute Inspector (top-right) and select one of the Pokemon images you previously added using the awesomeÂ <code>@IBInspectable</code>Â image property.</p>
<p><a href="media/15036540820094/727mm.png"><img src="media/15036540820094/727mm.png" alt="Fifteenth step"/></a></p>
<p>Now duplicate your custom Pokemon view.<br/>
Give it a different size, say 150x150.<br/>
Choose another Pokemon image, observe:</p>
<p><a href="media/15036540820094/xrTXw.png"><img src="media/15036540820094/xrTXw.png" alt="Sixteenth step"/></a></p>
<p>Now we are going to add more logic to that self-containing custom UI element.<br/>
The button will allow Pokemons to be enabled/disabled.</p>
<p>Create anÂ <code>IBAction</code>Â from the Switch button to the Pokemon.swift class.<br/>
Call the action something likeÂ <code>switchTapped</code>.<br/>
Add the following code to it:</p>
<pre><code class="language-text">// MARK: - Actions
@IBAction func switchTapped(sender: UISwitch) {<br/>
    imageView.alpha = sender.on ? 1.0 : 0.2<br/>
}<br/>
// MARK: - Initializers<br/>
...
</code></pre>
<p>Final result:</p>
<p><a href="media/15036540820094/DQJvO.gif"><img src="media/15036540820094/DQJvO.gif" alt="Final"/></a></p>
<p>You are done!<br/>
Now you can create complex custom views and reuse them anywhere you want.<br/>
This will increase productivity while isolating code into self-contained UI elements.</p>
<p><a href="https://github.com/singledev/custom-uiviews-from-xib">The final project can be cloned in Github.</a><br/>
(<strong>Updated to Swift 3.1</strong>)</p></li>
</ul>

<h2 id="toc_1"><a href="https://stackoverflow.com/documentation/ios/1362/custom-uiviews-from-xib-files/11599/how-to-make-custom-reusable-uiview-using-xib">How to make custom reusable UIView using XIB</a></h2>

<p>Following example shows steps involved in initializing a view from XIB.</p>

<p>This is not a complex operation but exact steps need to be followed in order to do it right way first time, avoiding exceptions.</p>

<p><a href="http://stackoverflow.com/questions/20323393/how-does-loadnibnamed-work-uiview-outlets-not-initializing-using-loadnibnamed">How does loadNibNamed Works</a></p>

<p>Main steps are:</p>

<ol>
<li>Create XIB</li>
<li>Create class .h and .m</li>
<li>Define outlets in .h</li>
<li><p>Connect outlets between .h and XIB</p>
<p>See attached screenshot:</p>
<p><a href="media/15036540820094/rSBw6.png"><img src="media/15036540820094/rSBw6.png" alt="Label Object connected to myLabel IBOutlet UILabel variable"/></a></p></li>
<li><p>Invoke loadNibNamed inside initWithCoder function of .m file. This is needed to ensure you can directly place UIView object into storyboard / Parent UIView XIB file and define it as your custom view. No other initialization code is needed once you load the storyboard / parent XIB. Your custom view can be added to other views just like other built-in Objective C view objects given in XCode.</p></li>
</ol>

			</div>

		
	  
		<footer>
		 <p class="meta">

			<strong>Categories:</strong>&nbsp; 
			<span class="categories">
			
			    <a class='category' href='Documentation.html'>Documentation</a>&nbsp;
			 
			</span>
		    </p>
		    <p class="meta">
		      
		 </p>
	    
		<div class="sharing">
		  
          

          

		</div>

	    <p class="meta">
	    
	        <a class="basic-alignment left" href="15038463059094.html" 
	        title="Previous Post: CAGradientLayer">&laquo; CAGradientLayer</a>
	    
	    
	        <a class="basic-alignment right" href="15036524793322.html" 
	        title="Next Post: UIBezierPath">UIBezierPath &raquo;</a>
	    
	    </p>
	  </footer>
	</article>
</div>
 <aside class="sidebar"> 

	<section>
	  <h1>Categories</h1>
	  <ul id="recent_posts">
	  
	      <li class="post">
	        <a href="%E5%8E%9F%E7%90%86%E6%8E%A2%E7%A9%B6.html"><strong>åŸç†æ¢ç©¶&nbsp;(8)</strong></a>
	        
	        
	        
	      </li>
	  
	      <li class="post">
	        <a href="%E6%8A%80%E5%B7%A7.html"><strong>æŠ€å·§&nbsp;(34)</strong></a>
	        
	        
	        
	      </li>
	  
	      <li class="post">
	        <a href="%E6%95%99%E7%A8%8B.html"><strong>æ•™ç¨‹&nbsp;(23)</strong></a>
	        
	        
	        
	      </li>
	  
	      <li class="post">
	        <a href="%E9%81%87%E5%88%B0Bug.html"><strong>é‡åˆ°Bug&nbsp;(12)</strong></a>
	        
	        
	        
	      </li>
	  
	      <li class="post">
	        <a href="%E6%9D%82%E8%AE%B0.html"><strong>æ‚è®°&nbsp;(16)</strong></a>
	        
	        
	        
	      </li>
	  
	      <li class="post">
	        <a href="Swift.html"><strong>Swift&nbsp;(23)</strong></a>
	        
	        
	        
	      </li>
	  
	      <li class="post">
	        <a href="C/C++.html"><strong>C/C++&nbsp;(4)</strong></a>
	        
	        
	        
	      </li>
	  
	      <li class="post">
	        <a href="Linux.html"><strong>Linux&nbsp;(3)</strong></a>
	        
	        
	        
	      </li>
	  
	      <li class="post">
	        <a href="Documentation.html"><strong>Documentation&nbsp;(8)</strong></a>
	        
	        
	        
	      </li>
	  
	      <li class="post">
	        <a href="Java.html"><strong>Java&nbsp;(7)</strong></a>
	        
	        
	        
	      </li>
	  
	      <li class="post">
	        <a href="LeetCode.html"><strong>LeetCode&nbsp;(3)</strong></a>
	        
	        
	        
	      </li>
	   
	  </ul>
	</section>
	<section>
	  <h1>Recent Posts</h1>
	  <ul id="recent_posts">
	  
	      
		      <li class="post">
		        <a href="16246203092572.html">flutter å¤šç¯å¢ƒè®¾ç½®</a>
		      </li>
	     
	  
	      
		      <li class="post">
		        <a href="16189060168232.html">iOS å¼€å‘ç¯å¢ƒé…ç½®</a>
		      </li>
	     
	  
	      
		      <li class="post">
		        <a href="16158207840706.html">AR æ¨¡å‹æ ¼å¼è½¬æ¢å’Œå¯¼å…¥</a>
		      </li>
	     
	  
	      
		      <li class="post">
		        <a href="16158207797865.html">èŠ‚æµé˜²æŠ–</a>
		      </li>
	     
	  
	      
		      <li class="post">
		        <a href="16154734553187.html">Flutter ç¯å¢ƒå˜é‡è®¾ç½®</a>
		      </li>
	     
	  
	      
	  
	      
	  
	      
	  
	      
	  
	      
	  
	      
	  
	      
	  
	      
	  
	      
	  
	      
	  
	      
	  
	      
	  
	      
	  
	      
	  
	      
	   
	  </ul>
	</section>
	
</aside> </div></div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 -  -
  <span class="credit">Powered by <a target="_blank" href="http://www.mweb.im">MWeb</a> &nbsp;&nbsp; Theme by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>



  













<script src="asset/prism.js"></script>


<style type="text/css">
  
/* PrismJS 1.14.0
https://prismjs.com/download.html#themes=prism-solarizedlight&languages=markup+css+clike+javascript */
/*
 Solarized Color Schemes originally by Ethan Schoonover
 http://ethanschoonover.com/solarized

 Ported for PrismJS by Hector Matos
 Website: https://krakendev.io
 Twitter Handle: https://twitter.com/allonsykraken)
*/

/*
SOLARIZED HEX
--------- -------
base03    #002b36
base02    #073642
base01    #586e75
base00    #657b83
base0     #839496
base1     #93a1a1
base2     #eee8d5
base3     #fdf6e3
yellow    #b58900
orange    #cb4b16
red       #dc322f
magenta   #d33682
violet    #6c71c4
blue      #268bd2
cyan      #2aa198
green     #859900
*/

code[class*="language-"],
pre[class*="language-"] {
  color: #657b83; /* base00 */
  font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  text-align: left;
  white-space: pre;
  word-spacing: normal;
  word-break: normal;
  word-wrap: normal;

  line-height: 1.5;

  -moz-tab-size: 4;
  -o-tab-size: 4;
  tab-size: 4;

  -webkit-hyphens: none;
  -moz-hyphens: none;
  -ms-hyphens: none;
  hyphens: none;
}

pre[class*="language-"]::-moz-selection, pre[class*="language-"] ::-moz-selection,
code[class*="language-"]::-moz-selection, code[class*="language-"] ::-moz-selection {
  background: #073642; /* base02 */
}

pre[class*="language-"]::selection, pre[class*="language-"] ::selection,
code[class*="language-"]::selection, code[class*="language-"] ::selection {
  background: #073642; /* base02 */
}

/* Code blocks */
pre[class*="language-"] {
  padding: 1em;
  margin: .5em 0;
  overflow: auto;
  border-radius: 0.3em;
}

:not(pre) > code[class*="language-"],
pre[class*="language-"] {
  background-color: #fdf6e3; /* base3 */
}

/* Inline code */
:not(pre) > code[class*="language-"] {
  padding: .1em;
  border-radius: .3em;
}

.token.comment,
.token.prolog,
.token.doctype,
.token.cdata {
  color: #93a1a1; /* base1 */
}

.token.punctuation {
  color: #586e75; /* base01 */
}

.namespace {
  opacity: .7;
}

.token.property,
.token.tag,
.token.boolean,
.token.number,
.token.constant,
.token.symbol,
.token.deleted {
  color: #268bd2; /* blue */
}

.token.selector,
.token.attr-name,
.token.string,
.token.char,
.token.builtin,
.token.url,
.token.inserted {
  color: #2aa198; /* cyan */
}

.token.entity {
  color: #657b83; /* base00 */
  background: #eee8d5; /* base2 */
}

.token.atrule,
.token.attr-value,
.token.keyword {
  color: #859900; /* green */
}

.token.function,
.token.class-name {
  color: #b58900; /* yellow */
}

.token.regex,
.token.important,
.token.variable {
  color: #cb4b16; /* orange */
}

.token.important,
.token.bold {
  font-weight: bold;
}
.token.italic {
  font-style: italic;
}

.token.entity {
  cursor: help;
}


pre[class*="language-"].line-numbers {
    position: relative;
    padding-left: 3.8em;
    counter-reset: linenumber;
}

pre[class*="language-"].line-numbers > code {
    position: relative;
    white-space: inherit;
}

.line-numbers .line-numbers-rows {
    position: absolute;
    pointer-events: none;
    top: 0;
    font-size: 100%;
    left: -3.8em;
    width: 3em; /* works for line-numbers below 1000 lines */
    letter-spacing: -1px;
    border-right: 1px solid #999;

    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;

}

    .line-numbers-rows > span {
        pointer-events: none;
        display: block;
        counter-increment: linenumber;
    }

        .line-numbers-rows > span:before {
            content: counter(linenumber);
            color: #999;
            display: block;
            padding-right: 0.8em;
            text-align: right;
        }

</style>
  
    


</body>
</html>