
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>
    
  æå°äº‰
  

  </title>
  <meta name="author" content="">
  <meta name="description" content="è®°å½•å¼€å‘ä¸­é‡åˆ°çš„ä¸€äº›é—®é¢˜">

  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <link href="asset/css/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="atom.xml" rel="alternate" title="æå°äº‰" type="application/atom+xml">
  <script src="asset/js/modernizr-2.0.js"></script>
  <script src="asset/js/jquery.min.js"></script>
  <style type="text/css">
  .cat-children-p{ padding: 6px 0px;}
  .hljs{background: none;}
  </style>
  <script type="text/javascript">
  var isAddSildbar = true;
  </script>
  <script src="asset/js/octopress.js" type="text/javascript"></script>
</head>
<script type="text/javascript">
//é“¾æ¥æ–°å¼€çª—å£
function addBlankTargetForLinks () {
  $('a[href^="http"]').each(function(){
      $(this).attr('target', '_blank');
  });
}
$(document).ready(function(event) {
  addBlankTargetForLinks();
});
</script>
<body   >
  <header role="banner"><hgroup>
  <h1><a href="index.html">æå°äº‰</a></h1>
  
    <h2>è®°å½•å¼€å‘ä¸­é‡åˆ°çš„ä¸€äº›é—®é¢˜</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:www.citynight.cn/Blog" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">

  <li id=""><a target="self" href="index.html">Home</a></li>

  <li id=""><a target="_self" href="archives.html">Archives</a></li>

</ul>

</nav>
  <div id="main">
    <div id="content"> 
<div class="blog-index">

	<article>
		 <header>
		  	<h1 class="entry-title"><a href="14727863232294.html">runtime(å†…éƒ¨åˆ†äº«è‰ç¨¿)</a></h1>
			<p class="meta"><time datetime="2016-09-02T11:18:43+08:00" 
			pubdate data-updated="true">2016/9/2</time></p>
		 </header>
	  	<div class="entry-content">
		  	
		  	<blockquote>
<p>æœ¬æ–‡æ¶‰åŠåˆ°çš„Demoåœ°å€ <a href="https://github.com/Mekor/runtimeDemo">https://github.com/Mekor/runtimeDemo</a></p>
</blockquote>

<h2 id="toc_0">ç†è§£self,super,class,superclass</h2>

<p>åˆ›å»ºä¸€ä¸ªPersoné‡Œé¢æœ‰ä¸€ä¸ªç±»æ–¹æ³•:</p>

<pre><code class="language-objectivec">#import &quot;Person.h&quot;

@implementation Person
+(void)study {
    NSLog(@&quot;%@ %@ %@ %@&quot;,[self class],[self superclass],[super class],[super superclass]);
}
@end
</code></pre>

<p>Studentç»§æ‰¿è‡ªPerson,é‡å†™çˆ¶ç±»æ–¹æ³•</p>

<pre><code class="language-objectivec">#import &quot;Student.h&quot;

@implementation Student
+(void)study {
    NSLog(@&quot;%@ %@ %@ %@&quot;,[self class],[self superclass],[super class],[super superclass]);
}
@end
</code></pre>

<!--more-->

<p>è¿™ä¸¤ä¸ªè¾“å‡ºçš„éƒ½æ˜¯ä»€ä¹ˆ?<br/>
<img src="media/14727863232294/14729913552743.jpg" alt=""/></p>

<p>è¿™æ—¶,æˆ‘ä»¬åœ¨Studentä¸­ç”¨è¿™æ ·å†™:</p>

<pre><code class="language-objectivec">#import &quot;Student.h&quot;

@implementation Student
+(void)study {
//    NSLog(@&quot;%@ %@ %@ %@&quot;,[self class],[self superclass],[super class],[super superclass]);
    
    [super study];
}
@end
</code></pre>

<p>æ‰“æ–­ç‚¹æˆ‘ä»¬å¯ä»¥çœ‹åˆ°:<br/>
<img src="media/14727863232294/14729934417192.jpg" alt=""/></p>

<p>å¯ä»¥çœ‹å‡º:</p>

<pre><code class="language-objectivec">superï¼šæ˜¯ç¼–è¯‘å™¨æŒ‡ç¤ºç¬¦ï¼Œä»…ä»…æ˜¯ä¸€ä¸ªæ ‡å¿—,å¹¶ä¸æ˜¯æŒ‡é’ˆï¼Œä»…ä»…æ˜¯æ ‡å¿—çš„å½“å‰å¯¹è±¡å»è°ƒç”¨çˆ¶ç±»çš„æ–¹æ³•ï¼Œæœ¬è´¨è¿˜æ˜¯å½“å‰å¯¹è±¡è°ƒç”¨
super:å¹¶ä¸æ˜¯è®©çˆ¶ç±»å¯¹è±¡è°ƒç”¨æ–¹æ³•ï¼Œè°ƒç”¨è€…è¿˜æ˜¯æœ¬èº«
classï¼šè·å–æ–¹æ³•è°ƒç”¨è€…çš„ç±»
superclass:è·å–æ–¹æ³•è°ƒç”¨è€…çš„çˆ¶ç±»
</code></pre>

<p>æ¶ˆæ¯æœºåˆ¶:(æ¥è‡ª:<a href="https://developer.apple.com/library/prerelease/content/documentation/Cocoa/Conceptual/ObjCRuntimeGuide/Articles/ocrtHowMessagingWorks.html">å®˜æ–¹æ–‡æ¡£</a>)<br/>
<img src="media/14727863232294/messaging1.gif" alt="æ¶ˆæ¯æ¡†æ¶"/></p>

<p>å½“å¯¹è±¡æ”¶åˆ°æ¶ˆæ¯æ—¶,æ¶ˆæ¯å‡½æ•°é¦–å…ˆæ ¹æ®è¯¥å¯¹è±¡çš„ isa æŒ‡é’ˆæ‰¾åˆ°è¯¥å¯¹è±¡æ‰€å¯¹åº”çš„ç±»çš„æ–¹æ³•è¡¨,å¹¶ä»è¡¨ä¸­å¯»æ‰¾ è¯¥æ¶ˆæ¯å¯¹åº”çš„æ–¹æ³•é€‰æ ‡ã€‚å¦‚æœæ‰¾ä¸åˆ°,objc_msgSend å°†ç»§ç»­ä»çˆ¶ç±»ä¸­å¯»æ‰¾,ç›´åˆ° NSObject ç±»ã€‚ä¸€æ—¦æ‰¾åˆ°äº†æ–¹æ³•é€‰æ ‡, objc_msgSend åˆ™ä»¥æ¶ˆæ¯æ¥æ”¶è€…å¯¹è±¡ä¸ºå‚æ•°è°ƒç”¨,è°ƒç”¨è¯¥é€‰æ ‡å¯¹åº”çš„æ–¹æ³•å®ç°ã€‚</p>

<h2 id="toc_1">selfæ˜¯ä»å“ªé‡Œæ¥çš„?</h2>

<blockquote>
<p>å®˜æ–¹è§£é‡Š:<a href="https://developer.apple.com/library/prerelease/content/documentation/Cocoa/Conceptual/ObjCRuntimeGuide/Articles/ocrtHowMessagingWorks.html">Objective-C Runtime Programming Guide</a><img src="media/14727863232294/14729941396965.jpg" alt=""/></p>
</blockquote>

<p>ç®€å•è¯´æ¯ä¸ªæ–¹æ³•éƒ½å­˜åœ¨å¹¶ä¸”éšè—çš„ä¸¤ä¸ªå‚æ•°(self,_cmd),éšä¾¿å†™ä¸ªæ–¹æ³•çœ‹ä¸‹:<br/>
Studentä¸­å†™ä¸ªtextæ–¹æ³•,ç„¶åæ‰“å°ä¸‹è¿™ä¸¤ä¸ªéšè—å‚æ•°.<br/>
<img src="media/14727863232294/14729960900273.jpg" alt=""/><br/>
<img src="media/14727863232294/14729961142923.jpg" alt=""/></p>

<h2 id="toc_2">åŠ¨æ€æ·»åŠ æ–¹æ³•</h2>

<p>ä¸Šé¢è¯´äº†ä¸€äº›è²Œä¼¼å’Œruntimeæ²¡æœ‰ä»€ä¹ˆå…³ç³»,runtimeåŸºç¡€çŸ¥è¯†ç±»ä¼¼ç±»çš„æ„æˆ,å¯¹è±¡çš„æ„æˆè¿™é‡Œä¸å†ä»‹ç»,å¯ä»¥è‡ªå·±å»çœ‹å®šä¹‰.å½“ç„¶ä¹Ÿå¯ä»¥å»<a href="http://opensource.apple.com/source/objc4/objc4-680/runtime/">è‹¹æœçš„å¼€æºç½‘ç«™</a>æŸ¥çœ‹,å¦‚æœç½‘ç«™ä¸æ–¹ä¾¿å¯ä»¥å»è‹¹æœçš„<a href="https://github.com/opensource-apple/objc4">github</a>ä¸‹è½½å¼€æºä»£ç ç ”ç©¶...  ...ç»§ç»­...é‚£ä¹ˆæ ¹æ®ä¸Šé¢æ‰€è¯´çš„æ–¹æ³•è¯´ä¸‹åŠ¨æ€æ·»åŠ æ–¹æ³•.</p>

<blockquote>
<p>æ€è€ƒä¸€ä¸‹,å’±ä»¬newé¡¹ç›®ä¸­å°†é‡‡ç”¨è·¯ç”±æ¨¡å¼è¿›è¡Œé¡µé¢è·³è½¬,ä»ç½‘é¡µè·³è½¬è¿›å…¥appè°ƒç”¨ä¸€ä¸ªæ–¹æ³•,ä¸€èˆ¬æƒ…å†µä¸‹éƒ½æ˜¯ç§»åŠ¨ç«¯å’Œåå°åè®®å¥½çš„å†…å®¹,è¿™æ ·è·³è½¬ä¸ä¼šå‡ºç°é—®é¢˜.ä½†æ˜¯å¦‚æœåå°å†™é”™äº†æˆ–è€…ä¼ è¾“ä¸­å‡ºç°é—®é¢˜å¯¼è‡´urlä¸­åŒ…å«çš„æ–¹æ³•åä¸æ˜¯è§„å®šçš„æ–¹æ³•å.è¿™æ—¶æ€ä¹ˆåŠ?</p>
</blockquote>

<pre><code class="language-objectivec">    Student *s = [Student new];
    
    // 1. æ¯”å¦‚æˆ‘ä»¬è¦è°ƒç”¨ Studentä¸­çš„eatæ–¹æ³•, é»˜è®¤è¿™æ ·å†™[s eat]; ä½†æ˜¯ä¸è¡Œ,å› ä¸ºæˆ‘ä»¬æ²¡æœ‰å®šä¹‰.
//    [s eat];
    // 2. ä¹Ÿå¯ä»¥è¿™æ ·è°ƒç”¨[s performSelector:@selector(eat)];è¿™æ ·æ²¡æœ‰é—®é¢˜,@selectorä¸­å‚æ•°æ˜¯å­—ç¬¦ä¸²,è¿™ä¸ªå‚è€ƒswift
//    [s performSelector:@selector(eat)];
    // 3. ä½¿ç”¨stringåˆ›å»ºSEL
    
#pragma clang diagnostic push
#pragma clang diagnostic ignored&quot;-Warc-performSelector-leaks&quot;
    [s performSelector:NSSelectorFromString(@&quot;eat&quot;)];
#pragma clang diagnostic pop
    
    // ä¸Šé¢è¿™æ ·è°ƒç”¨ä¼šæŠ¥é”™,æˆ‘ä»¬åœ¨å¯¹è±¡è°ƒç”¨æœªå®ç°æ–¹æ³•çš„æ—¶å€™åŠ¨æ€çš„åˆ›å»ºä¸€ä¸ªæ–¹æ³•,é¿å…æŠ›å‡ºå¼‚å¸¸.
</code></pre>

<p>æ€ä¹ˆå¿½ç•¥ç¼–è¯‘å™¨è­¦å‘Šå·²ç»åˆ†äº«è¿‡,å¯ä»¥å‚è€ƒ:<a href="http://www.citynight.cn/Blog/14676105703423.html">http://www.citynight.cn/Blog/14676105703423.html</a></p>

<h3 id="toc_3">æ€ä¹ˆåŠ¨æ€æ·»åŠ æ–¹æ³•å‘¢?</h3>

<p><img src="media/14727863232294/14729983827897.jpg" alt=""/><br/>
ä¸Šé¢æ˜¯åŠ¨æ€æ·»åŠ å¯¹è±¡æ–¹æ³•çš„ä¾‹å­,åŠ¨æ€æ·»åŠ ç±»æ–¹æ³•ä¹Ÿæ˜¯ä¸€æ ·çš„<code>+(BOOL)resolveClassMethod:(SEL)sel</code><br/>
<strong>æ³¨æ„:</strong>ä¸Šé¢å‡½æ•°ç±»å‹,æœ‰äººå¯èƒ½å¥½å¥‡è¿™å—ä¸ºä»€ä¹ˆå†™æˆ&quot;v@:&quot;  ?å‚è§:å‡½æ•°ç±»å‹, æ›´å¤šå…³äºè½¬å‘æœºåˆ¶å‚è§:<a href="http://www.citynight.cn/Blog/14733118707964.html">è½¬å‘æœºåˆ¶</a></p>

<h3 id="toc_4">å…³äºå‡½æ•°ç±»å‹</h3>

<p>å…ˆçœ‹æ–‡æ¡£:<br/>
<img src="media/14727863232294/14730056768742.jpg" alt=""/><br/>
æŸ¥çœ‹<code>Objective-C type encodings</code> <img src="media/14727863232294/14730058881001.jpg" alt=""/><br/>
æ‰€ä»¥ä¸Šé¢void eat(...)åº”è¯¥è¡¨è¿°æˆ <code>&quot;v@:&quot;</code></p>

<p><strong>è¡¥å……:</strong> åŠ¨æ€è°ƒç”¨æ–¹æ³•ç³»ç»Ÿé»˜è®¤æä¾›ä¸€åˆ°ä¸¤ä¸ªå‚æ•°çš„æ–¹æ³•è°ƒç”¨, <del>è¿™é‡Œå°è£…äº†ä¸€ä¸ªæ— é™å‚æ•°çš„æ–¹æ³•è°ƒç”¨.<a href="https://github.com/Mekor/NSObject-SEL">NSObject-SEL****</a></del>  æˆ‘æŠŠä¸€äº›æ‰©å±•è¿›è¡Œäº†æ€»ç»“,è¿˜ä¸å®Œå–„,åœ°å€<a href="https://github.com/Mekor/MKExtension">MKExtension</a></p>

<h3 id="toc_5">å…³äºIMP(å‡½æ•°æŒ‡é’ˆ)</h3>

<pre><code class="language-objectivec">/// A pointer to the function of a method implementation. 
#if !OBJC_OLD_DISPATCH_PROTOTYPES
typedef void (*IMP)(void /* id, SEL, ... */ ); 
#else
typedef id (*IMP)(id, SEL, ...); 
#endif
</code></pre>

<p>å½“å‰ç‰ˆæœ¬Xcodeå¦‚æœä½¿ç”¨IMPçš„è¯,é»˜è®¤æ˜¯é€‰æ‹©ç¬¬ä¸€ä¸ªä¹Ÿå°±æ˜¯æ— å‚æ— è¿”å›å€¼.å¦‚æœéœ€è¦å‚æ•°æœ‰è¿”å›å€¼çš„è¯,éœ€è¦ä¿®æ”¹é…ç½®æ–‡ä»¶.å¦‚ä¸‹:</p>

<h2 id="toc_6">æ–¹æ³•äº¤æ¢(Method Swizzling:ä¼ è¯´ä¸­çš„é»‘é­”æ³•)</h2>

<p>ä¸€èˆ¬ä½¿ç”¨æ–¹æ³•äº¤æ¢éƒ½æ˜¯æƒ³ç»™ç³»ç»Ÿæä¾›çš„æ–¹æ³•æ·»åŠ ä¸€äº›å…¶ä»–çš„åŠŸèƒ½çš„æ—¶å€™ä½¿ç”¨.newä¸­ä½¿ç”¨æ–¹æ³•äº¤æ¢çš„ä¾‹å­:</p>

<pre><code class="language-objectivec">#import &quot;UIActionSheet+Front.h&quot;

#import &lt;objc/runtime.h&gt;

@implementation UIActionSheet (Front)
- (void)customShowInView:(UIView *)view{
    for(UIWindow * tmpWin in [[UIApplication sharedApplication] windows]){
        [tmpWin endEditing:NO];
    }
    [self customShowInView:view];
}
+ (void)load{
    swizzleAllActionSheet();
}
@end

void swizzleAllActionSheet(){
    Class c = [UIActionSheet class];
    SEL origSEL = @selector(showInView:);
    SEL newSEL = @selector(customShowInView:);
    Method origMethod = class_getInstanceMethod(c, origSEL);
    Method newMethod = class_getInstanceMethod(c, newSEL);
    method_exchangeImplementations(origMethod, newMethod);
}
</code></pre>

<p>å…³äºæ–¹æ³•äº¤æ¢,åœ¨newé¡¹ç›®ä¸­å·²ç»å°è£…å¥½äº†,ä»£ç å¦‚ä¸‹:</p>

<pre><code class="language-objectivec">// ObjcRuntime.hæ–‡ä»¶
void Swizzle(Class c, SEL origSEL, SEL newSEL);

//ObjcRuntime.mæ–‡ä»¶
//é™æ€å°±äº¤æ¢é™æ€ï¼Œå®ä¾‹æ–¹æ³•å°±äº¤æ¢å®ä¾‹æ–¹æ³•
void Swizzle(Class c, SEL origSEL, SEL newSEL)
{
    Method origMethod = class_getInstanceMethod(c, origSEL);
    Method newMethod = nil;
    if (!origMethod) {
        origMethod = class_getClassMethod(c, origSEL);
        if (!origMethod) {
            return;
        }
        newMethod = class_getClassMethod(c, newSEL);
        if (!newMethod) {
            return;
        }
    }else{
        newMethod = class_getInstanceMethod(c, newSEL);
        if (!newMethod) {
            return;
        }
    }
    
    //è‡ªèº«å·²ç»æœ‰äº†å°±æ·»åŠ ä¸æˆåŠŸï¼Œç›´æ¥äº¤æ¢å³å¯
    if(class_addMethod(c, origSEL, method_getImplementation(newMethod), method_getTypeEncoding(newMethod))){
        class_replaceMethod(c, newSEL, method_getImplementation(origMethod), method_getTypeEncoding(origMethod));
    }else{
        method_exchangeImplementations(origMethod, newMethod);
    }
}
</code></pre>

<p>ç”¨æ³•(è¿˜æ˜¯ä»¥Studentä¸ºä¾‹):<br/>
Studentä¸­æ·»åŠ ä¸¤ä¸ªå¯¹è±¡æ–¹æ³•,ä¸€ä¸ªrun,ä¸€ä¸ªsleep.æˆ‘ä»¬çš„ç›®çš„æ˜¯äº¤æ¢ä¸¤ä¸ªæ–¹æ³•çš„å®ç°</p>

<pre><code class="language-objectivec">-(void)run {
    NSLog(@&quot;è·‘ğŸƒ&quot;);
}
-(void)sleep {
    NSLog(@&quot;ç¡è§‰ğŸ˜´&quot;);
}
+(void)load {
    Swizzle(self, @selector(run), @selector(sleep));
}
</code></pre>

<p>æ§åˆ¶å™¨è°ƒç”¨çš„ç»“æœ:<br/>
<img src="media/14727863232294/14730042652865.jpg" alt=""/></p>

<h2 id="toc_7">æ·»åŠ å±æ€§</h2>

<p>åŠ¨æ€æ·»åŠ å±æ€§ç”¨çš„æœ€å¤šçš„åœ°æ–¹åº”è¯¥æ˜¯ç»™åˆ†ç±»æ·»åŠ å±æ€§.  <del>æˆ‘åœ¨é¡¹ç›®ä¸­æ·»åŠ è¿‡ä¸€ä¸ªåˆ†ç±»<code>UIView+Tap</code>è¿™ä¸ªä¹Ÿå¯ä»¥åœ¨è¿™é‡ŒæŸ¥çœ‹<a href="https://github.com/Mekor/UIView-Tap">UIView-Tap</a></del>  æˆ‘æŠŠä¸€äº›æ‰©å±•è¿›è¡Œäº†æ€»ç»“,è¿˜ä¸å®Œå–„,åœ°å€<a href="https://github.com/Mekor/MKExtension">MKExtension</a></p>

<pre><code class="language-objectivec">#import &quot;UIView+Tap.h&quot;
#import &lt;objc/runtime.h&gt;

static const void* tagValue = &amp;tagValue;

@interface UIView ()
@property (nonatomic, copy) void(^tapAction)(id);
@end

@implementation UIView (Tap)
- (void)tap{
    if (self.tapAction) {
        self.tapAction(self);
    }
}
- (void)addTapBlock:(void(^)(id obj))tapAction{
    self.tapAction = tapAction;
    if (![self gestureRecognizers]) {
        self.userInteractionEnabled = YES;
        UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(tap)];
        [self addGestureRecognizer:tap];
    }
}

-(void)setTapAction:(void (^)(id))tapAction {
    objc_setAssociatedObject(self, tagValue, tapAction, OBJC_ASSOCIATION_COPY_NONATOMIC);
}
-(void (^)(id))tapAction {
    return objc_getAssociatedObject(self, tagValue);
}
@end
</code></pre>

<p>ä¸»è¦æ˜¯set&amp;getæ–¹æ³•,è¿™ç‚¹æ³¨æ„äº†ä¹Ÿå°±æ²¡å•¥äº†..</p>

<h2 id="toc_8">å…¶ä»–</h2>

<ol>
<li>ç³»ç»Ÿä¸­å¸¸è§çš„ä½¿ç”¨åˆ°runtimeçš„åœ°æ–¹:
<a href="http://www.citynight.cn/Blog/14726525723684.html">KVOå†…éƒ¨å®ç°åŸç†</a></li>
<li>æ—¥å¸¸å¼€å‘ä¸­ä½¿ç”¨åˆ°runtimeçš„åœ°æ–¹:</li>
<li>å­—å…¸è½¬æ¨¡å‹: å¯ä»¥å‚çœ‹<code>MJExtension</code> å®ƒçš„æ ¸å¿ƒä»£ç åœ¨:<code>NSObject+MJProperty.m</code>ç¬¬150è¡Œå¼€å§‹</li>
</ol>

<pre><code class="language-objectivec">#pragma mark - å…¬å…±æ–¹æ³•
+ (NSMutableArray *)properties
{
    NSMutableArray *cachedProperties = [self dictForKey:&amp;MJCachedPropertiesKey][NSStringFromClass(self)];
    
    if (cachedProperties == nil) {
        cachedProperties = [NSMutableArray array];
        
        [self mj_enumerateClasses:^(__unsafe_unretained Class c, BOOL *stop) {
            // 1.è·å¾—æ‰€æœ‰çš„æˆå‘˜å˜é‡
            unsigned int outCount = 0;
            objc_property_t *properties = class_copyPropertyList(c, &amp;outCount);
            
            // 2.éå†æ¯ä¸€ä¸ªæˆå‘˜å˜é‡
            for (unsigned int i = 0; i&lt;outCount; i++) {
                MJProperty *property = [MJProperty cachedPropertyWithProperty:properties[i]];
                // è¿‡æ»¤æ‰Foundationæ¡†æ¶ç±»é‡Œé¢çš„å±æ€§
                if ([MJFoundation isClassFromFoundation:property.srcClass]) continue;
                property.srcClass = c;
                [property setOriginKey:[self propertyKey:property.name] forClass:self];
                [property setObjectClassInArray:[self propertyObjectClassInArray:property.name] forClass:self];
                [cachedProperties addObject:property];
            }
            
            // 3.é‡Šæ”¾å†…å­˜
            free(properties);
        }];
        
        [self dictForKey:&amp;MJCachedPropertiesKey][NSStringFromClass(self)] = cachedProperties;
    }
    
    return cachedProperties;
}
</code></pre>

<p>è‡ªå®šä¹‰å­—å…¸è½¬æ¨¡å‹ä¸­logçš„è¾“å‡ºå¯ä»¥å‚è§Xcodeæ’ä»¶<code>ESJsonFormat</code>ä¸­<code>ESJsonFormatManager.m</code>ç¬¬47è¡Œ:</p>

<pre><code class="language-objectivec">/**
 *  æ ¼å¼åŒ–OCå±æ€§å­—ç¬¦ä¸²
 *
 *  @param key       JSONé‡Œé¢keyå­—æ®µ
 *  @param value     JSONé‡Œé¢keyå¯¹åº”çš„NSDictionæˆ–è€…NSArray
 *  @param classInfo ç±»ä¿¡æ¯
 *
 *  @return
 */
+ (NSString *)formatObjcWithKey:(NSString *)key value:(NSObject *)value classInfo:(ESClassInfo *)classInfo{
    NSString *qualifierStr = @&quot;copy&quot;;
    NSString *typeStr = @&quot;NSString&quot;;
    //åˆ¤æ–­å¤§å°å†™
    if ([ESUppercaseKeyWords containsObject:key] &amp;&amp; [ESJsonFormatSetting defaultSetting].uppercaseKeyWordForId) {
        key = [key uppercaseString];
    }
    if ([value isKindOfClass:[NSString class]]) {
        return [NSString stringWithFormat:@&quot;@property (nonatomic, %@) %@ *%@;&quot;,qualifierStr,typeStr,key];
    }else if([value isKindOfClass:[@(YES) class]]){
        //the &#39;NSCFBoolean&#39; is private subclass of &#39;NSNumber&#39;
        qualifierStr = @&quot;assign&quot;;
        typeStr = @&quot;BOOL&quot;;
        return [NSString stringWithFormat:@&quot;@property (nonatomic, %@) %@ %@;&quot;,qualifierStr,typeStr,key];
    }else if([value isKindOfClass:[NSNumber class]]){
        qualifierStr = @&quot;assign&quot;;
        NSString *valueStr = [NSString stringWithFormat:@&quot;%@&quot;,value];
        if ([valueStr rangeOfString:@&quot;.&quot;].location!=NSNotFound){
            typeStr = @&quot;CGFloat&quot;;
        }else{
            NSNumber *valueNumber = (NSNumber *)value;
            if ([valueNumber longValue]&lt;2147483648) {
                typeStr = @&quot;NSInteger&quot;;
            }else{
                typeStr = @&quot;long long&quot;;
            }
        }
        return [NSString stringWithFormat:@&quot;@property (nonatomic, %@) %@ %@;&quot;,qualifierStr,typeStr,key];
    }else if([value isKindOfClass:[NSArray class]]){
        NSArray *array = (NSArray *)value;
        
        //May be &#39;NSString&#39;ï¼Œwill crash
        NSString *genericTypeStr = @&quot;&quot;;
        NSObject *firstObj = [array firstObject];
        if ([firstObj isKindOfClass:[NSDictionary class]]) {
            ESClassInfo *childInfo = classInfo.propertyArrayDic[key];
            genericTypeStr = [NSString stringWithFormat:@&quot;&lt;%@ *&gt;&quot;,childInfo.className];
        }else if ([firstObj isKindOfClass:[NSString class]]){
            genericTypeStr = @&quot;&lt;NSString *&gt;&quot;;
        }else if ([firstObj isKindOfClass:[NSNumber class]]){
            genericTypeStr = @&quot;&lt;NSNumber *&gt;&quot;;
        }
        
        qualifierStr = @&quot;strong&quot;;
        typeStr = @&quot;NSArray&quot;;
        if ([ESJsonFormatSetting defaultSetting].useGeneric &amp;&amp; [ESUtils isXcode7AndLater]) {
            return [NSString stringWithFormat:@&quot;@property (nonatomic, %@) %@%@ *%@;&quot;,qualifierStr,typeStr,genericTypeStr,key];
        }
        return [NSString stringWithFormat:@&quot;@property (nonatomic, %@) %@ *%@;&quot;,qualifierStr,typeStr,key];
    }else if ([value isKindOfClass:[NSDictionary class]]){
        qualifierStr = @&quot;strong&quot;;
        ESClassInfo *childInfo = classInfo.propertyClassDic[key];
        typeStr = childInfo.className;
        if (!typeStr) {
            typeStr = [key capitalizedString];
        }
        return [NSString stringWithFormat:@&quot;@property (nonatomic, %@) %@ *%@;&quot;,qualifierStr,typeStr,key];
    }
    return [NSString stringWithFormat:@&quot;@property (nonatomic, %@) %@ *%@;&quot;,qualifierStr,typeStr,key];
}

</code></pre>


		</div>

		

	</article>
 
	<article>
		 <header>
		  	<h1 class="entry-title"><a href="14727432716172.html">åŸºç¡€æ‹¾é—</a></h1>
			<p class="meta"><time datetime="2016-09-01T23:21:11+08:00" 
			pubdate data-updated="true">2016/9/1</time></p>
		 </header>
	  	<div class="entry-content">
		  	
		  	<p><img src="media/14727432716172/14727432899236.jpg" alt=""/></p>

<h2 id="toc_0">selfå’ŒsuperåŒºåˆ«</h2>

<p>è¦ç‚¹ï¼š</p>

<ol>
<li>selfè°ƒç”¨è‡ªå·±æ–¹æ³•ï¼Œsuperè°ƒç”¨çˆ¶ç±»æ–¹æ³•</li>
<li>selfæ˜¯ç±»ï¼Œsuperæ˜¯é¢„ç¼–è¯‘æŒ‡ä»¤</li>
<li>ã€self classã€‘å’Œã€super classã€‘è¾“å‡ºæ˜¯ä¸€æ ·çš„</li>
</ol>

<p>selfå’Œsuperåº•å±‚å®ç°åŸç†ï¼š</p>

<ol>
<li>å½“ä½¿ç”¨ self è°ƒç”¨æ–¹æ³•æ—¶ï¼Œä¼šä»å½“å‰ç±»çš„æ–¹æ³•åˆ—è¡¨ä¸­å¼€å§‹æ‰¾ï¼Œå¦‚æœæ²¡æœ‰ï¼Œå°±ä»çˆ¶ç±»ä¸­å†æ‰¾ï¼›è€Œå½“ä½¿ç”¨ super æ—¶ï¼Œåˆ™ä»çˆ¶ç±»çš„æ–¹æ³•åˆ—è¡¨ä¸­å¼€å§‹æ‰¾ï¼Œç„¶åè°ƒç”¨çˆ¶ç±»çš„è¿™ä¸ªæ–¹æ³•ã€‚</li>
<li>å½“ä½¿ç”¨ self è°ƒç”¨æ—¶ï¼Œä¼šä½¿ç”¨ <code>objc_msgSend</code> å‡½æ•°ï¼š<code>id objc_msgSend(id theReceiver, SEL theSelector, ...)</code>ã€‚ç¬¬ ä¸€ä¸ªå‚æ•°æ˜¯æ¶ˆæ¯æ¥æ”¶è€…ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯è°ƒç”¨çš„å…·ä½“ç±»æ–¹æ³•çš„ <code>selector</code>ï¼Œåé¢æ˜¯ <code>selector</code> æ–¹æ³•çš„å¯å˜å‚æ•°ã€‚ä»¥ <code>[self setName:]</code> ä¸ºä¾‹ï¼Œç¼–è¯‘å™¨ä¼šæ›¿æ¢æˆè°ƒç”¨ <code>objc_msgSend</code> çš„å‡½æ•°è°ƒç”¨ï¼Œå…¶ä¸­ <code>theReceiver</code> æ˜¯ <code>self</code>ï¼Œ<code>theSelector</code> æ˜¯ <code>@selector(setName:)</code>ï¼Œè¿™ä¸ª <code>selector</code> æ˜¯ä»å½“å‰ <code>self</code> çš„ <code>class</code> çš„æ–¹æ³•åˆ—è¡¨å¼€å§‹æ‰¾çš„ <code>setName</code>ï¼Œå½“æ‰¾åˆ°åæŠŠå¯¹åº”çš„ <code>selector</code> ä¼ é€’è¿‡å»ã€‚</li>
<li>å½“ä½¿ç”¨ <code>super</code> è°ƒç”¨æ—¶ï¼Œä¼šä½¿ç”¨ <code>objc_msgSendSuper</code> å‡½æ•°ï¼š<code>id objc_msgSendSuper(struct objc_super *super, SEL op, ...)</code>ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸ª<code>objc_super</code>çš„ç»“æ„ä½“ï¼Œç¬¬äºŒä¸ªå‚æ•°è¿˜æ˜¯ç±»ä¼¼ä¸Šé¢çš„ç±»æ–¹æ³•çš„<code>selector</code>ï¼Œ</li>
</ol>

<pre><code class="language-text">struct objc_super {
Â  Â  Â  id receiver;
Â  Â  Â  Class superClass;
};
</code></pre>

<p>å½“ç¼–è¯‘å™¨é‡åˆ°Â  <code>[super setName:]</code> æ—¶ï¼Œå¼€å§‹åšè¿™å‡ ä¸ªäº‹ï¼š</p>

<p>1ï¼‰æ„å»º <code>objc_super</code> çš„ç»“æ„ä½“ï¼Œæ­¤æ—¶è¿™ä¸ªç»“æ„ä½“çš„ç¬¬ä¸€ä¸ªæˆå‘˜å˜é‡ <code>receiver</code> å°±æ˜¯å­ç±»ï¼Œå’Œ <code>self</code> ç›¸åŒã€‚è€Œç¬¬äºŒä¸ªæˆå‘˜å˜é‡ <code>superClass</code> å°±æ˜¯æŒ‡çˆ¶ç±»<br/>
è°ƒç”¨ <code>objc_msgSendSuper</code> çš„æ–¹æ³•ï¼Œå°†è¿™ä¸ªç»“æ„ä½“å’Œ <code>setName</code> çš„ <code>sel</code> ä¼ é€’è¿‡å»ã€‚</p>

<p>2ï¼‰å‡½æ•°é‡Œé¢åœ¨åšçš„äº‹æƒ…ç±»ä¼¼è¿™æ ·ï¼šä» <code>objc_super</code> ç»“æ„ä½“æŒ‡å‘çš„ <code>superClass</code> çš„æ–¹æ³•åˆ—è¡¨å¼€å§‹æ‰¾ <code>setName</code> çš„ <code>selector</code>ï¼Œæ‰¾åˆ°åå†ä»¥ <code>objc_super-&gt;receiver</code> å»è°ƒç”¨è¿™ä¸ª <code>selector</code></p>


		</div>

		

	</article>
 
	<article>
		 <header>
		  	<h1 class="entry-title"><a href="14726525723684.html">KVOå†…éƒ¨å®ç°åŸç†</a></h1>
			<p class="meta"><time datetime="2016-08-31T22:09:32+08:00" 
			pubdate data-updated="true">2016/8/31</time></p>
		 </header>
	  	<div class="entry-content">
		  	
		  	<ol>
<li>KVOæ˜¯åŸºäºruntimeæœºåˆ¶å®ç°çš„</li>
<li>å½“æŸä¸ªç±»çš„å¯¹è±¡ç¬¬ä¸€æ¬¡è¢«è§‚å¯Ÿæ—¶,ç³»ç»Ÿå°±ä¼šåœ¨è¿è¡ŒæœŸåŠ¨æ€åœ°åˆ›å»ºè¯¥ç±»çš„ä¸€ä¸ªæ´¾ç”Ÿç±»,åœ¨è¿™ä¸ªæ´¾ç”Ÿç±»ä¸­é‡å†™åŸºç±»ä¸­ä»»ä½•è¢«è§‚å¯Ÿå±æ€§çš„setteræ–¹æ³•.æ´¾ç”Ÿç±»åœ¨è¢«é‡å†™çš„setteræ–¹æ³•å®ç°çœŸæ­£çš„é€šçŸ¥æœºåˆ¶.</li>
</ol>

<p>æ·»åŠ ç›‘å¬å‰:<br/>
<img src="media/14726525723684/14726530320712.jpg" alt=""/></p>

<p>æ·»åŠ ç›‘å¬å:(æ´¾ç”Ÿå‡º:NSKVONotifying_Person)<br/>
<img src="media/14726525723684/14726532061641.jpg" alt=""/></p>

<p>æŠŠå‰åä¸¤ä»½ä»£ç å…¨éƒ¨è½¬æ¢æˆcppæ–‡ä»¶,è¿™æ—¶æˆ‘ä»¬æŸ¥æ‰¾ä¸¤ä¸ªæ–‡ä»¶ä¸åŒçš„åœ°æ–¹.</p>

<p><img src="media/14726525723684/14726564797185.jpg" alt=""/></p>

<p>ç»è¿‡ç®€å•æ•´ç†çš„ä¸¤ä»½ä»£ç :<br/>
<img src="media/14726525723684/14726568603743.jpg" alt=""/></p>

<p>å¯ä»¥çœ‹å‡ºmi_0 &amp; mi_1ä¹‹é—´å°±æ˜¯Person &amp; NSKVONotifying_Personä¹‹é—´çš„å…³ç³».</p>

<p>-------------------2018.1.20æ›´æ–°(è¯»&lt;ç¼–å†™é«˜è´¨é‡ä»£ç &gt;)--------------------<br/>
KVC é€šè¿‡å®ç°åä¸ºNSKeyValueCodingçš„éæ­£å¼åè®®,ä½¿å¼€å‘è€…å¯ä»¥é€šè¿‡é”®ç›´æ¥è®¾ç½®å’Œè·å–å¯¹è±¡å±æ€§,è€Œä¸éœ€è¦è°ƒç”¨å¯¹è±¡çš„å­˜å–æ–¹æ³•(Cocoaä¸ºè¯¥åè®®æä¾›äº†é»˜è®¤çš„å®ç°).é”®é€šå¸¸å’Œè¢«è®¿é—®å¯¹è±¡ä¸­çš„å®ä¾‹å˜é‡æˆ–å­˜å–æ–¹æ³•çš„åç§°ç›¸å¯¹åº”.</p>

<p>KVCä¸»è¦åˆ©ç”¨ä¸€ç§ä½¿ç”¨å­—ç¬¦ä¸²æ ‡è¯†ç¬¦,ç®€ä»‹è®¿é—®å±æ€§çš„æœºåˆ¶,ä»–æ˜¯å¾ˆå¤šæŠ€æœ¯çš„åŸºç¡€.ä¸»è¦æœ‰<code>setValue: forKey</code>,<code>valueForKey</code>å’Œ<code>setValue: forKeyPath</code>,<code>valueForKeyPath</code></p>

<p>key ä¸keyPath åŸºæœ¬ä¸€æ ·,åªæ˜¯keyPathçš„å€¼æ˜¯ä¸€ä¸ªè·¯å¾„,è·¯å¾„ä¹‹é—´ç”¨<code>.</code>åˆ†å‰²,æ¯”å¦‚æ•°æ®æˆå‘˜å°±æ˜¯å¯¹è±¡è‡ªå·±,å¯»å€¼è¿‡ç¨‹å°±ä¼šå‘ä¸‹æ·±å…¥ä¸‹å».<img src="media/14726525723684/WechatIMG26.png" alt="WechatIMG26"/></p>


		</div>

		

	</article>
 
	<article>
		 <header>
		  	<h1 class="entry-title"><a href="14726092302553.html">è½¬è½½iOS MJè®²è§£é¢è¯•é¢˜,å¹¶ä¿®æ”¹é‡Œé¢é”™è¯¯</a></h1>
			<p class="meta"><time datetime="2016-08-31T10:07:10+08:00" 
			pubdate data-updated="true">2016/8/31</time></p>
		 </header>
	  	<div class="entry-content">
		  	
		  	<blockquote>
<p>åŸæ–‡é“¾æ¥:<a href="http://www.jianshu.com/p/9050e523e278">http://www.jianshu.com/p/9050e523e278</a></p>
</blockquote>

<h4 id="toc_0">1ã€KVOå†…éƒ¨å®ç°åŸç†</h4>

<ul>
<li>1.KVOæ˜¯åŸºäºruntimeæœºåˆ¶å®ç°çš„</li>
<li>2.å½“æŸä¸ªç±»çš„å¯¹è±¡ç¬¬ä¸€æ¬¡è¢«è§‚å¯Ÿæ—¶ï¼Œç³»ç»Ÿå°±ä¼šåœ¨è¿è¡ŒæœŸåŠ¨æ€åœ°åˆ›å»ºè¯¥ç±»çš„ä¸€ä¸ªæ´¾ç”Ÿç±»ï¼Œåœ¨è¿™ä¸ªæ´¾ç”Ÿç±»ä¸­é‡å†™åŸºç±»ä¸­ä»»ä½•è¢«è§‚å¯Ÿå±æ€§çš„setteræ–¹æ³•ã€‚<br/>
æ´¾ç”Ÿç±»åœ¨è¢«é‡å†™çš„setteræ–¹æ³•å®ç°çœŸæ­£çš„é€šçŸ¥æœºåˆ¶ï¼ˆPerson-&gt;NSKVONotifying_Personï¼‰</li>
</ul>

<h4 id="toc_1">2ã€æ˜¯å¦å¯ä»¥æŠŠæ¯”è¾ƒè€—æ—¶çš„æ“ä½œæ”¾åœ¨NSNotificationCenterä¸­</h4>

<ul>
<li>é€šçŸ¥ä¸­å¿ƒæ‰€åšçš„æ“ä½œåœ¨ä¸»çº¿ç¨‹ï¼Œæ¯”è¾ƒè€—æ—¶çš„ä¸€èˆ¬å¼€å¯ä¸€ä¸ªçº¿ç¨‹å•ç‹¬å»è·‘</li>
</ul>

<h4 id="toc_2">3ã€KVOã€NSNotificationã€ä»£ç†çš„åŒºåˆ«å’Œç”¨æ³•æ˜¯ä»€ä¹ˆï¼Ÿä»€ä¹ˆæ—¶å€™è¯¥ç”¨é‚£ä¸ªï¼Ÿå¦‚æœç”¨protocolå’Œdelegateï¼ˆæˆ–è€…delegateçš„Arrayï¼‰æ¥å®ç°ç±»ä¼¼çš„åŠŸèƒ½å¯èƒ½å—ï¼Ÿå¦‚æœèƒ½ï¼Œä¼šæœ‰ä»€ä¹ˆæ½œåœ¨çš„é—®é¢˜ï¼Ÿå¦‚æœä¸èƒ½ï¼Œä¸ºä»€ä¹ˆï¼Ÿ</h4>

<h5 id="toc_3">ç­”æ¡ˆï¼š</h5>

<p>å‚è€ƒï¼š<a href="http://blog.csdn.net/dqjyong/article/details/7685933">http://blog.csdn.net/dqjyong/article/details/7685933</a></p>

<h6 id="toc_4">é€šçŸ¥ï¼ˆNSNotificationï¼‰ï¼š</h6>

<ul>
<li>æ¯”è¾ƒçµæ´»ï¼ˆ1ä¸ªé€šçŸ¥èƒ½è¢«å¤šä¸ªå¯¹è±¡æ¥å—ï¼Œå¤šä¸ªå¯¹è±¡èƒ½æ¥å—å¤šä¸ªé€šçŸ¥ï¼‰</li>
<li>æ²¡æœ‰è€¦åˆæ€§ï¼ˆï¼¡å‘å‡ºçš„é€šçŸ¥ï¼Œè°å»æ¥æ”¶å¹¶ä¸çŸ¥é“ï¼‰</li>
<li>ç¼ºç‚¹é€šçŸ¥çš„Keyå®¹æ˜“è¢«å†™é”™</li>
</ul>

<h6 id="toc_5">KVO</h6>

<ul>
<li>æ€§èƒ½ä¸å¥½ï¼ˆåº•å±‚å¯¹ä¼šRuntimeåŠ¨æ€äº§æˆæ–°çš„ç±»NSNotifying_xxï¼‰</li>
<li>å±€é™æ€§ï¼ˆåªèƒ½ç›‘å¬æŸä¸ªå¯¹è±¡å±æ€§çš„æ”¹å˜ï¼Œä¸æ¨èå®ç”¨ï¼‰</li>
<li>1ä¸ªå¯¹è±¡çš„å±æ€§èƒ½è¢«å¤šä¸ªå¯¹è±¡ç›‘å¬ï¼Œ1ä¸ªå¯¹è±¡èƒ½ç›‘å¬å¤šä¸ªå¯¹è±¡çš„å…¶ä»–å±æ€§</li>
</ul>

<h6 id="toc_6">ä»£ç†</h6>

<ul>
<li>æ¯”è¾ƒè§„èŒƒï¼Œæ‰€ä»¥å®‰å…¨æ€§é«˜</li>
<li>é»˜è®¤æ˜¯1å¯¹1ç›‘å¬ï¼Œå¯ä»¥ç”¨ä»£ç†æ•°ç»„ a.delegates = @[b, c, d];(åƒä¸‡åˆ«è¿™æ ·å†™ï¼Œè¿èƒŒçš„è®¾è®¡æ¨¡å¼ï¼Œè¿™æ ·å†™è¿˜ä¸å¦‚åŒæ¶ˆæ¯é€šçŸ¥)</li>
</ul>

<h4 id="toc_7">4ã€Runtimeå®ç°çš„æœºåˆ¶æ˜¯ä»€ä¹ˆï¼Œæ€ä¹ˆç”¨ï¼Œä¸€èˆ¬ç”¨äºå¹²å˜›ï¼Œä½ è¿˜è®°å¾—ä½ æ‰€ä½¿ç”¨çš„ç›¸å…³çš„å¤´æ–‡ä»¶æˆ–è€…æŸäº›æ–¹æ³•çš„åç§°å—ï¼Ÿ</h4>

<p>è¿è¡Œæ—¶æœºåˆ¶ï¼Œruntimeåº“é‡Œé¢åŒ…å«äº†è·Ÿç±»ã€æˆå‘˜å˜é‡ã€æ–¹æ³•ç›¸å…³çš„APIï¼Œæ¯”å¦‚è·å–ç±»é‡Œé¢çš„æ‰€æœ‰æˆå‘˜å˜é‡ï¼Œä¸ºç±»åŠ¨æ€æ·»åŠ æˆå‘˜å˜é‡ï¼ŒåŠ¨æ€æ”¹å˜ç±»çš„æ–¹æ³•å®ç°ï¼Œä¸ºç±»åŠ¨æ€æ·»åŠ æ–°çš„æ–¹æ³•ç­‰ï¼Œéœ€è¦å¯¼å…¥</p>

<h5 id="toc_8">1.ä»€ä¹ˆæ˜¯Runtime</h5>

<ul>
<li>runtimeæ˜¯ä¸€å¥—æ¯”è¾ƒä½å±‚çš„çº¯Cè¯­è¨€APIï¼Œå±äº1ä¸ªCè¯­è¨€åº“ï¼ŒåŒ…å«è®¸å¤šCåº•å±‚çš„Cè¯­è¨€çš„API</li>
<li>å¹³æ—¶ç¼–å†™çš„OCä»£ç ï¼Œåœ¨ç¨‹åº è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œå…¶å®æœ€ç»ˆéƒ½è½¬æ¢æˆäº†runtimeçš„Cè¯­è¨€ä»£ç ï¼Œruntimeç®—æ˜¯OCçš„å¹•åå·¥ä½œè€…<br/>
ä¸¾ä¾‹ï¼š<br/>
OC:
<code>[MJPerson alloc]init];</code>
runtimeï¼š
<code>objc_msgSend(objc_msgSend(&quot;MJPerson&quot;, &quot;alloc&quot;), &quot;init&quot;)</code></li>
</ul>

<h5 id="toc_9">2.ç”¨è¿‡ä¹ˆï¼Ÿæ€ä¹ˆç”¨ï¼Ÿ</h5>

<ul>
<li>1.runtimeæ˜¯å±äºOCåº•å±‚ï¼Œå¯ä»¥è¿›è¡Œ ä¸€äº›éå¸¸çš„æ“ä½œï¼ˆOCæ— æ³•å®ç°çš„ï¼Œä¸å®¹æ˜“å®ç°çš„ï¼‰
<ul>
<li>åœ¨ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­ï¼ŒåŠ¨æ€åˆ›å»ºä¸€ä¸ªç±»ï¼ˆæ¯”å¦‚KVOåº•å±‚å®ç°ï¼‰</li>
<li>åœ¨ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­ï¼ŒåŠ¨æ€åœ°ä¸ºæŸä¸ªç±» æ·»åŠ å±æ€§ã€æ–¹æ³•ï¼Œä¿®æ”¹å±æ€§å€¼ã€æ–¹æ³•</li>
<li>ä¾¿åˆ©ä¸€ä¸ªç±»çš„ æ‰€ä»¥æˆå‘˜å˜é‡ï¼ˆå±æ€§ï¼‰ã€æ–¹æ³•</li>
</ul></li>
</ul>

<h5 id="toc_10">3.ç›¸å…³åº”ç”¨</h5>

<ul>
<li><p>1.å¤´æ–‡ä»¶</p>
<p>è°ƒç”¨åº•å±‚çš„æ¶ˆæ¯å‘é€æ–¹æ³•</p></li>
<li><p>2.ç›¸å…³åº”ç”¨</p>
<ul>
<li>NSCodingï¼ˆå½’æ¡£å’Œè§£æ¡£ï¼Œåˆ©ç”¨runtimeéå†æ¨¡å‹å¯¹è±¡çš„æ‰€æœ‰å±æ€§ï¼‰</li>
<li>å­—å…¸ -&gt;æ¨¡å‹ ï¼ˆåˆ©ç”¨runtimeéå†æ¨¡å‹å¯¹è±¡çš„æ‰€æœ‰å±æ€§ï¼Œæ ¹æ®å±æ€§åä»å­—å…¸ä¸­å–å‡ºå¯¹åº”çš„å€¼ï¼Œè®¾ç½®åˆ°æ¨¡å‹çš„å±æ€§ä¸Šï¼‰</li>
<li>KVOï¼ˆåˆ©ç”¨runtimeåŠ¨æ€äº§ç”Ÿä¸€ä¸ªç±»ï¼‰</li>
<li>ç”¨äºå°è£…æ¡†æ¶ï¼ˆæƒ³æ€ä¹ˆæ”¹ï¼Œå°±æ€ä¹ˆæ”¹ï¼‰</li>
</ul></li>
<li><p>3.ç›¸å…³å‡½æ•°</p>
<ul>
<li>objc_msgSend ï¼š ç»™å¯¹è±¡å‘é€æ¶ˆæ¯</li>
<li>class_copyMethodList ï¼š éå†æŸä¸ªæ‰€æœ‰æ–¹æ³•</li>
<li>class_copyIvarList ï¼š éå†æŸä¸ªç±»æ‰€ä»¥çš„æˆå‘˜å˜é‡</li>
<li>class_addMethod ï¼š åŠ¨æ€æ·»åŠ æ–¹æ³•</li>
<li>class_addIval ï¼šåŠ¨æ€æ·»åŠ æˆå‘˜å˜é‡</li>
<li>class_.... class_å¼€å¤´çš„æ–¹æ³•,æ˜¯æ“ä½œç±»çš„</li>
</ul></li>
</ul>

<h6 id="toc_11">ä¾‹ï¼šåˆ©ç”¨Runtimeå½’æ¡£å’Œè§£æ¡£</h6>

<pre><code class="language-text">//  MJPerson.m
//  runtimeè¿›è¡Œå½’æ¡£å’Œè§£æ¡£
//
//  Created by Zhanbo on 16/7/7.
//  Copyright Â© 2016å¹´ Zhanbo. All rights reserved.
//

#import &quot;MJPerson.h&quot;
#import &lt;objc/runtime.h&gt;
@implementation MJPerson

- (void)encodeWithCoder:(NSCoder *)aCoder {

   unsigned int count = 0;
  //å‚æ•°1ï¼šé‚£ä¸ªç±»
  //å‚æ•°2ï¼šæœ‰å‡ ä¸ªæˆå‘˜å˜é‡
   Ivar *ivars = class_copyIvarList([MJPerson class], &amp;count);

    for (int i = 0; i &lt;count; i++) {
        //å–å‡ºiä½ç½®å¯¹åº”çš„æˆå‘˜å˜é‡
        Ivar ivar = ivars[i];

        //æŸ¥çœ‹æˆå‘˜å˜é‡
        const char *name = ivar_getName(ivar);
        NSLog(@&quot;%s&quot;, name);

        //å½’æ¡£
        NSString *key = [NSString stringWithUTF8String:name];
        id value = [self valueForKey:key];
        [aCoder encodeObject:value forKey:key];

    }
    //åœ¨Cè¯­è¨€ä¸­ä½¿ç”¨copyè¦é‡Šæ”¾
    free(ivars);
}

- (instancetype)initWithCoder:(NSCoder *)aDecoder {

    if (self = [super init]) {

        unsigned int count = 0;
        Ivar *ivars = class_copyIvarList([MJPerson class], &amp;count);

        for (int i = 0; i &lt;count; i++) {
            //å–å‡ºiä½ç½®å¯¹åº”çš„æˆå‘˜å˜é‡
            Ivar ivar = ivars[i];

            //æŸ¥çœ‹æˆå‘˜å˜é‡
            const char *name = ivar_getName(ivar);
            NSLog(@&quot;%s&quot;, name);

            //è§£æ¡£
            NSString *key = [NSString stringWithUTF8String:name];
            id value = [aDecoder decodeObjectForKey:key];

            //è®¾ç½®åˆ°æˆå‘˜å˜é‡èº«ä¸Š
            [self setValue:value forKey:key];

        }
        //åœ¨Cè¯­è¨€ä¸­ä½¿ç”¨copyè¦é‡Šæ”¾
        free(ivars);
    }
    return self;
}

@end
</code></pre>

<h5 id="toc_12">4.å¿…å¤‡å¸¸è¯†</h5>

<ul>
<li>1.Ivar ï¼š æˆå‘˜å˜é‡</li>
<li>1. Method ï¼š æˆå‘˜æ–¹æ³•</li>
</ul>

<h4 id="toc_13">5ã€Foundationå¯¹è±¡ä¸Core Foundationå¯¹è±¡æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h4>

<ul>
<li>1.Foundationå¯¹è±¡æ˜¯OCçš„ï¼ŒCore Foundationå¯¹è±¡æ˜¯Cå¯¹è±¡</li>
<li><p>2.æ•°æ®ç±»å‹ä¹‹é—´çš„è½¬æ¢(æ¡¥æ¥)</p>
<ul>
<li><p>ARCï¼šbridge_retainedã€ _bridge_transfer</p>
<pre><code class="language-text">CFArrayRef array3 = CFArrayCreate(NULL, NULL, 10, NULL);
//Foundetion -&gt; Core Fountdation<br/>
(__bridge_retained )<br/>
//Core Fountdation -&gt; Foundetion<br/>
(__bridge_transfer )<br/>
NSArray *array4 = (__bridge_transfer NSArray *)array3);
</code></pre></li>
<li><p>MRC: _bridge</p>
<pre><code class="language-text">Foundation -&gt; Core Foundation
NSArray *array1 = [NSArray array];<br/>
CFArrayRef array2 = (__bridge CFArrayRef)array1;<br/>
//è®°å¾—é‡Šæ”¾å†…å­˜<br/>
[array1 release];
</code></pre></li>
</ul></li>
</ul>

<h4 id="toc_14">6ã€ä¸ç”¨ä¸­é—´å˜é‡ï¼Œç”¨ä¸¤ç§æ–¹æ³•äº¤æ¢Aå’ŒBçš„å€¼</h4>

<ul>
<li>1. A = A + B<br/>
    B = A - B<br/>
    A = A- B</li>
<li>2.ä½¿ç”¨ä½è¿ç®—<sup>èƒ½äº¤æ¢ä¸¤ä¸ªå˜é‡çš„å€¼</sup></li>
</ul>

<h4 id="toc_15">7ã€ ä»€ä¹ˆæ˜¯åŠ¨æ€ï¼Œä¸¾ä¾‹è¯´å</h4>

<ul>
<li>1.åœ¨çº¿ç¨‹è¿è¡Œè¿‡ç¨‹æ‰æ‰§è¡Œçš„æ“ä½œï¼Œå¦‚RuntimeåŠ¨æ€åˆ›å»ºæˆå‘˜å˜é‡å’Œæ–¹æ³•</li>
</ul>

<h4 id="toc_16">8ã€ä»€ä¹ˆæ˜¯å¤šæ€</h4>

<ul>
<li><p>1.çˆ¶ç±»æŒ‡é’ˆæŒ‡å‘å­ç±»å¯¹è±¡</p>
<pre><code class="language-text">NSObject *obj = [NSArray array];
</code></pre></li>
</ul>

<h4 id="toc_17">9ã€æ€ä¹ˆè§£å†³ç¼“å­˜æ± æ»¡çš„é—®é¢˜ï¼ˆcellï¼‰</h4>

<ul>
<li>iOSä¸­ä¸å­˜åœ¨ç¼“å­˜æ± æ»¡çš„æƒ…å†µï¼Œåº”ä¸ºé€šå¸¸æˆ‘ä»¬åœ¨iOSå¼€å‘ï¼Œå¯¹è±¡éƒ½æ˜¯åœ¨éœ€è¦çš„æ—¶å€™æ‰ä¼šåˆ›å»ºï¼Œæœ‰ç§å¸¸ç”¨çš„è¯´æ³•å«æ‡’åŠ è½½ï¼Œè¿˜æœ‰åœ¨UITableViewä¸­ä¸€èˆ¬åªä¼šåˆ›å»ºåˆšå¼€å§‹å‡ºç°åœ¨å±å¹•ä¸­çš„cellï¼Œä¹‹åéƒ½æ˜¯ä»ç¼“å­˜æ± é‡Œå–ï¼Œä¸ä¼šåˆ›å»ºæ–°å¯¹è±¡ï¼Œç¼“å­˜æ± é‡Œæœ€å¤šå°±ä¸€ä¸¤ä¸ªå¯¹è±¡ï¼Œç¼“å­˜æ± æ»¡çš„è¿™ä¸­æƒ…å†µä¸€èˆ¬åœ¨å¼€å‘Javaä¸­æ¯”è¾ƒå¸¸è§ï¼ŒJavaä¸­ä¸€èˆ¬æŠŠæœ€è¿‘æœ€å°‘ä½¿ç”¨çš„å¯¹è±¡å…ˆé‡Šæ”¾</li>
<li>å¦‚æœç¼“å­˜æ± æ»¡äº†ï¼Œåˆ¤æ–­å“ªä¸ªä½ç½®çš„cellæ˜¯ä¸ç»å¸¸ä½¿ç”¨çš„ï¼Œå…ˆé‡Šæ”¾æ‰</li>
</ul>

<h3 id="toc_18">10ã€å¦‚ä½•æ¸²æŸ“è‡ªå®šä¹‰æ ¼å¼å­—ç¬¦ä¸²çš„UILabel</h3>

<ul>
<li><p>1.é€šè¿‡NSAttributedStringç±»</p>
<pre><code class="language-text">  //1ç§å†™æ³•ï¼Œä¹Ÿå¯ä»¥ç”¨å­—å…¸
NSMutableAttributedString *str = [[NSMutableAttributedString alloc]initWithString:@&quot;å“ˆå“ˆå“ˆå•¦å•¦å•¦å“‡å“‡å“‡&quot;];<br/>
  //è®¾ç½®æ–‡å­—é¢œè‰²<br/>
  [str addAttribute:NSForegroundColorAttributeName value:[UIColor redColor] range:NSMakeRange(0, 3)];<br/>
  [str addAttribute:NSForegroundColorAttributeName value:[UIColor blueColor] range:NSMakeRange(6, 3)];<br/>
  //è®¾ç½®å­—ä½“<br/>
  [str addAttribute:NSFontAttributeName value:[UIFont systemFontOfSize:30] range:NSMakeRange(3, 3)];<br/>
  _label.attributedText = str;
</code></pre></li>
</ul>

<p><img src="media/14726092302553/1240." alt=""/></p>

<p>æ•ˆæœ</p>

<h4 id="toc_19">11ã€scrollViewçš„contentSizeèƒ½åœ¨ViewDidLoadé‡Œè®¾ç½®å—ï¼Œä¸ºä»€ä¹ˆï¼Ÿ</h4>

<ul>
<li>1.èƒ½ï¼Œåœ¨å“ªé‡Œéƒ½èƒ½è®¾ç½®</li>
<li>2.ä½†æ˜¯æœ€å¥½ä¸è¦åœ¨viewDidLoadé‡Œè®¾ç½®ï¼Œå› ä¸ºè§†å›¾åˆšåˆ›å»ºä¸ä¸€å®šæ˜¯æˆ‘ä»¬æƒ³è¦çš„å°ºå¯¸ï¼Œåœ¨iPadå¼€å‘ä¸­æ¨ªç«–å±æ˜¯å¾ˆå¥½çš„ä¾‹å­</li>
</ul>

<h4 id="toc_20">12ã€æ§åˆ¶å™¨Viewçš„ç”Ÿå‘½å‘¨æœŸåŠç›¸å…³å‡½æ•°ä»€ä¹ˆï¼Ÿä½ åœ¨å¼€å‘ä¸­æ˜¯å¦‚ä½•ç”¨çš„ï¼Ÿ</h4>

<ul>
<li>1.é¦–å…ˆåˆ¤æ–­æ§åˆ¶å™¨æ˜¯å¦æœ‰è§†å›¾ï¼Œå¦‚æœæ²¡æœ‰å°±è°ƒç”¨<strong>loadView</strong>æ–¹æ³•åˆ›å»ºï¼šé€šè¿‡storyboardæˆ–è€…ä»£ç </li>
<li>2.éšåè°ƒç”¨<strong>viewDidLoad</strong>ï¼Œå¯ä»¥è¿›è¡Œä¸‹ä¸€æ­¥çš„åˆå§‹åŒ–æ“ä½œï¼šåªä¼šè¢«è°ƒç”¨ä¸€æ¬¡</li>
<li>3.åœ¨è§†å›¾æ˜¾ç¤ºä¹‹å‰ï¼ˆå³å°†æ˜¾ç¤ºï¼‰è°ƒç”¨<strong>viewWillAppear</strong>ï¼Œè¯¥å‡½æ•°å¯ä»¥å¤šæ¬¡è°ƒç”¨</li>
<li>4.åœ¨è§†å›¾æ˜¾ç¤ºï¼Œä¼šè°ƒç”¨<strong>viewDidAppear</strong></li>
<li>5.è§†å›¾å³å°†æ¶ˆå¤±ï¼Œè°ƒç”¨<strong>viewWillDisappear</strong></li>
<li>6.è§†å›¾å·²ç»æ¶ˆå¤±ï¼Œè°ƒç”¨<strong>viewDidDisappear</strong></li>
<li>7.åœ¨å¸ƒå±€å˜åŒ–å‰åï¼Œè°ƒç”¨<strong>viewWillDidLayoutSubviews</strong>å¤„ç†ç›¸å…³ä¿¡æ¯</li>
</ul>

<h4 id="toc_21">13ã€Blockçš„å†…å­˜ç®¡ç†</h4>

<ul>
<li>1.é»˜è®¤æƒ…å†µä¸‹ï¼Œblockçš„å†…å­˜æ˜¯åœ¨æ ˆä¸­
<ul>
<li>å®ƒä¸ä¼šå¯¹æ‰€å¼•ç”¨çš„å¯¹è±¡è¿›è¡Œä»»ä½•æ“ä½œ</li>
</ul></li>
<li>2.å¦‚æœå¯¹blockåšä¸€æ¬¡copyæ“ä½œï¼Œblockçš„å†…å­˜å°±ä¼šåœ¨å †ä¸­
<ul>
<li>å®ƒä¼šå¯¹æ‰€å¼•ç”¨çš„å¯¹è±¡åšä¸€æ¬¡retainæ“ä½œ</li>
<li>ARC ï¼šå¦‚æœæ‰€å¼•ç”¨çš„å¯¹è±¡ç”¨äº†<strong>__unsafe_unretained</strong>æˆ–è€…<strong>__weak</strong>ä¿®é¥°ï¼Œå°±ä¸ä¼šåšretainæ“ä½œ</li>
<li>éARC(MRC) ï¼š å¦‚æœæ‰€å¼•ç”¨çš„å¯¹è±¡ç”¨<strong>__block</strong>ä¿®é¥°ï¼Œå°±ä¸ä¼šåšretainæ“ä½œï¼›MRCè®°å¾—é‡Šæ”¾blockBlock_release(_block);</li>
</ul></li>
</ul>

<pre><code class="language-text">- (void)dealloc {
    //MRCè®°å¾—åœ¨deallocé‡Šæ”¾blcokï¼Œ[super dealloc];è¦å†™æœ€å
    Block_release(_block);
    [super dealloc];
}
</code></pre>

<h4 id="toc_22">14ã€MRCä¸­å¦‚ä½•åšå¼€å‘</h4>

<p>1.MRCä¸­retainç›¸å½“äºARCä¸­strong<br/>
assignç›¸å½“äºARCä¸­weak<br/>
2.åªè¦å£°æ˜å¯¹è±¡å±æ€§å°±è¦å†™retain</p>

<pre><code class="language-text">@property (nonatomic, retain)NSArray *array; +1(è®¡æ•°å™¨ = 1)
</code></pre>

<p>3.å£°æ˜æ§ä»¶ã€åè®®ç”¨assgin</p>

<p>4.MRCçš„å†…å­˜ç®¡ç†åŸåˆ™</p>

<ul>
<li>å¦‚æœè°ƒç”¨äº†allocã€newã€copyäº§ç”Ÿäº†ä¸€ä¸ªæ–°å¯¹è±¡ï¼Œæœ€åè‚¯å®šè¦è°ƒç”¨1æ¬¡releaceæˆ–è€…autorelease</li>
<li>å¦‚æœè®©ä¸€ä¸ªå¯¹è±¡åšäº†retainæ“ä½œï¼ˆè®¡æ•°å™¨+1ï¼‰ï¼Œæœ€åè‚¯å®šè¦è°ƒç”¨1æ¬¡releaseæˆ–è€…autorelease</li>
<li>åŸåˆ™ï¼šæœ‰+ å°±æœ‰-</li>
</ul>

<pre><code class="language-text">self.array = [NSArray alloc]init]autorelease];
allocå +1(è®¡æ•°å™¨ = 2)ï¼› autoreleaseå -1(è®¡æ•°å™¨ = 1)
//æˆ–è€…è¿™æ ·å†™ï¼Œå°±ä¸éœ€è¦å†™autoreleaseï¼Œç³»ç»Ÿå†…éƒ¨è‡ªåŠ¨å†™å¥½
self.array = [NSArray array];
</code></pre>

<ul>
<li>æœ€åè¦åœ¨deallocé‡Šæ”¾å†…å­˜</li>
</ul>

<pre><code class="language-text">//å½“æ§åˆ¶å™¨å°†è¢«é‡Šæ”¾çš„æ—¶å€™å¯¹è°ƒç”¨
- (void)dealloc {
//æœ€å¥½è¿™æ ·å†™
self.array = nil;
-1(è®¡æ•°å™¨ = 0)

//ä¹Ÿå¯ä»¥è¿™æ ·å†™
self.array = [array release];
//æœ€åè°ƒç”¨
[supe dealloc];
}
</code></pre>

<p>å¦‚æœæ˜¯iOSç‰ˆæœ¬åœ¨5.0ä¹‹å‰è¦åœ¨3ä¸ªåœ°æ–¹é‡Šæ”¾å†…å­˜</p>

<pre><code class="language-text">//æ§åˆ¶å™¨çš„Viewè¢«å¸è½½ï¼Œä¼šè°ƒç”¨
- (void)viewDidUnload {

    [super viewDidUnload];
    self.array = nil;
}

//æ¥æ”¶åˆ°å†…å­˜è­¦å‘Šï¼Œä¼šè°ƒç”¨
- (void)didReceiveMemoryWarning {

    [super didReceiveMemoryWarning];
    self.array = nil;
}

- (void)dealloc {

    self.array = nil;

    [super dealloc];
}
</code></pre>

<h4 id="toc_23">15ã€å¤šçº¿ç¨‹å¦‚ä½•è¿›è¡Œçº¿ä¹‹é—´é€šè®¯ï¼Ÿ</h4>

<pre><code class="language-text">//åœ¨ä¸»çº¿ç¨‹æ‰§è¡ŒæŸä¸ªæ–¹æ³•ï¼Œä¼ å‚ï¼ˆè¯¥æ–¹æ³•ç”¨äºå­çº¿ç¨‹å¯¹ä¸»çº¿ç¨‹è¿›è¡Œé€šè®¯ï¼‰
[self performSelectorOnMainThread: withObject: waitUntilDone:]

//æŒ‡å®šçº¿ç¨‹ï¼Œè°ƒç”¨æ–¹æ³•ï¼Œä¼ å‚
[self performSelector: onThread: withObject: waitUntilDone: modes: *)#&gt;

//GCDåœ¨å¼‚æ­¥çº¿ç¨‹åšäº‹æƒ…
dispatch_async(, )
</code></pre>

<h4 id="toc_24">16ã€ç”¨NSOperationå’ŒNSOperationQueueå¤„ç†A,B,Cä¸‰ä¸ªçº¿ç¨‹ï¼Œè¦æ±‚æ‰§è¡Œå®ŒA,Bæ‰èƒ½æ‰§è¡ŒCï¼Œæ€ä¹ˆåšï¼Ÿ</h4>

<ul>
<li>1.ç¬¬ä¸€ç§æ–¹æ³•æ·»åŠ ä¾èµ–</li>
</ul>

<pre><code class="language-text">//åˆ›å»ºåˆ—é˜Ÿ
NSOperationQueue *queue = [NSOperationQueue alloc]init];
//åˆ›å»º3ä¸ªæ“ä½œ
NSOperation *a = [NSBlockOperation blockOperationWithBlock:^{
    NSLog(@&quot;operation1....&quot;);
}];

NSOperation *c = [NSBlockOperation blockOperationWithBlock:^{
    NSLog(@&quot;operation2....&quot;);
}];

NSOperation *b = [NSBlockOperation blockOperationWithBlock:^{
    NSLog(@&quot;operation3....&quot;);
}];
//======æ·»åŠ ä¾èµ–=======
//åªæœ‰å½“aæ“ä½œæ‰§è¡Œå®Œæ¯•åï¼Œæ‰ä¼šæ‰§è¡Œcæ“ä½œ
[c addDependency:a];
//åªæœ‰å½“bæ“ä½œæ‰§è¡Œå®Œæ¯•åï¼Œæ‰ä¼šæ‰§è¡Œcæ“ä½œ
[c addDependency:b];

[queue addOperation:a];
[queue addOperation:b];
[queue addOperation:c];
</code></pre>

<ul>
<li>2.ç¬¬äºŒç§æ–¹æ³• å¯ ä»¥è®¾ç½®ä¼˜å…ˆçº§</li>
</ul>

<pre><code class="language-text">- (NSOperationQueuePriority)queuePriority;
</code></pre>

<h4 id="toc_25">17ã€GCDå†…éƒ¨æ€ä¹ˆå®ç°çš„</h4>

<ul>
<li>1.iSOå’ŒOS Xçš„æ ¸å¿ƒæ˜¯XNUå†…æ ¸ï¼ŒGCDæ˜¯åŸºäºXNUå†…æ ¸å®ç°çš„</li>
<li>2.GCDçš„APIå…¨éƒ¨åœ¨libdispatchåº“ä¸­</li>
<li>3.GCDçš„åº•å±‚å®ç°ä¸»è¦æœ‰Dispatch Queueå’Œ Dispatch Source
<ul>
<li>Disatch Queue ï¼šç®¡ç†blockï¼ˆæ“ä½œï¼Œblocké‡Œçš„ä»£ç å—ï¼Œæ ¹æ®ç±»å‹åœ¨å“ªä¸ªçº¿ç¨‹æ‰§è¡Œï¼‰</li>
<li>Disatch Source ï¼š å¤„ç†äº‹ä»¶ï¼ˆåº•å±‚å®ç°ï¼Œå¤„ç†çº¿ç¨‹ä¹‹é—´çš„äº‹ä»¶ï¼Œå¦‚ä¸»çº¿ç¨‹ä¼šåˆ°ä»€ä¹ˆçº¿ç¨‹ï¼Œå¼‚æ­¥çº¿ç¨‹å›åˆ°ä»€ä¹ˆçº¿ç¨‹ï¼‰</li>
</ul></li>
</ul>

<h4 id="toc_26">18ã€NSOperatinQueueå’ŒCGDçš„åŒºåˆ«ï¼Œä»€ä¹ˆæƒ…å†µä¸‹ç”¨NSOperationQueueï¼Œä»€ä¹ˆæƒ…å†µä¸‹ç”¨GCD</h4>

<ul>
<li>1.GCDæ˜¯çº¯Cè¯­è¨€çš„APIï¼ŒNSOperationQueueæ˜¯åŸºäºGCDçš„OCç‰ˆæœ¬å°è£…</li>
<li>2.GCDåªæ”¯æŒFIFOçš„åˆ—é˜Ÿï¼ˆå…ˆè¿›å…ˆå‡ºï¼‰ï¼ŒNSOperationQueueå¯ä»¥å¾ˆæ–¹ä¾¿åœ°è°ƒæ•´æ‰§è¡Œé¡ºåºï¼ˆè®¾ç½®ä¼˜å…ˆçº§ ï¼‰ï¼Œè®¾ç½®æœ€å¤§å¹¶å‘æ•°é‡</li>
<li>3.NSOperatinQueueå¯ä»¥è½»æ¾åœ¨Operationé—´è®¾ç½®ä¾èµ–å…³ç³»ï¼Œè€ŒGCDéœ€è¦äº›å¾ˆå¤šä»£ç æ‰èƒ½å®ç°</li>
<li>4.NSOperationQueueæ”¯æŒKVOï¼Œå¯ä»¥ç›‘å¬operationæ˜¯å¦æ­£åœ¨æ‰§è¡Œï¼ˆisExecutedï¼‰ã€æ˜¯å¦ç»“æŸï¼ˆisFinishedï¼‰ï¼Œæ˜¯å¦å–æ¶ˆï¼ˆisCanceldï¼‰ï¼›ç³»ç»Ÿå†…éƒ¨å·²ç»åšå¥½çš„KVO</li>
<li>5.GCDçš„æ‰§è¡Œé€Ÿåº¦æ¯”NSOperationQueueå¿«</li>
<li>ä»€ä¹ˆæ—¶å€™ï¼Œç”¨å“ªä¸ª
<ul>
<li>1.ä»»åŠ¡ä¹‹é—´æœ‰ä¾èµ–/æˆ–è€…è¦ç›‘å¬ä»»åŠ¡çš„æ‰§è¡Œæƒ…å†µï¼šNSOperatinQueueï¼ˆä»»åŠ¡éœ€è¦æ—¶åˆ»ç›‘å¬ï¼›ä»»åŠ¡ä¸¥æ ¼éœ€è¦æŒ‰é¡ºåºæ‰§è¡Œï¼‰</li>
<li>2.ä»»åŠ¡ä¹‹é—´ä¸å¤ªç›¸äº’ä¾èµ–å°±ç”¨ï¼šCGD</li>
</ul></li>
</ul>

<h4 id="toc_27">19ã€æ—¢ç„¶è¯´åˆ°GCDï¼Œé‚£ä¹ˆé—®ä¸‹åœ¨ä½¿ç”¨GCDå·²ç»blockéœ€è¦æ³¨æ„ä»€ä¹ˆï¼Ÿ</h4>

<ul>
<li>1.GCDçš„æ³¨æ„18é¢˜å·²æœ‰è¯´æ˜</li>
<li>2.Blockçš„ä½¿ç”¨æ³¨æ„
<ul>
<li>1.blockçš„å†…å­˜ç®¡ç†(13é¢˜å·²æœ‰è¯´æ˜)</li>
<li>2.é˜²æ­¢å¾ªç¯retain
<ul>
<li>ARCï¼š<strong>weak/</strong>unsafe_unretained</li>
<li>MRC: __block 0</li>
</ul></li>
</ul></li>
</ul>

<h4 id="toc_28">20ã€å¦‚æœåæœŸéœ€è¦å¢åŠ æ•°æ®åº“ä¸­çš„å­—æ®µæ€ä¹ˆå®ç°ï¼Œå¦‚æœä¸ä½¿ç”¨CoreDataå‘¢ï¼Ÿ</h4>

<p>ç¼–å†™SQLè¯­å¥æ¥æ“ä½œåŸæ¥è¡¨ä¸­çš„å­—æ®µ</p>

<ul>
<li>1.å¢åŠ è¡¨å­—æ®µ<br/>
ALTER TABLE è¡¨å DROP COLUMN å­—æ®µå å­—æ®µç±»å‹</li>
<li>2.åˆ é™¤è¡¨å­—æ®µ<br/>
ALTER TABLE è¡¨å DROP COLUMN å­—æ®µå</li>
<li>3.ä¿®æ”¹è¡¨å­—æ®µ<br/>
ALTER TABLE è¡¨å RENAME COLUMN æ—§å­—æ®µå TO æ–°å­—æ®µå</li>
</ul>

<h4 id="toc_29">21ã€ç®€å•æè¿°ä¸‹å®¢æˆ·ç«¯çš„ç¼“å­˜æœºåˆ¶</h4>

<ul>
<li>1.ç¼“å­˜å¯ä»¥åˆ†ä¸ºï¼šå†…å­˜æ•°æ®ç¼“å­˜ã€æ•°æ®åº“ç¼“å­˜ã€æ–‡ä»¶ç¼“å­˜</li>
<li>2.æ¯æ¬¡æƒ³è·å–æ•°æ®çš„æ—¶å€™
<ul>
<li>å…ˆæ£€æµ‹å†…å­˜ä¸­æœ‰æ— ç¼“å­˜</li>
<li>åœ¨æ£€æµ‹æœ¬åœ°æœ‰æ— ç¼“å­˜ï¼ˆæ•°æ®åº“/æ–‡ä»¶ï¼‰</li>
<li>æœ€ç»ˆå‘é€ç½‘ç»œè¯·æ±‚</li>
<li>å°†æœåŠ¡å™¨è¿”å›çš„ç½‘ç»œæ•°æ®è¿›è¡Œç¼“å­˜ï¼ˆå†…å­˜ã€æ•°æ®åº“ã€æ–‡ä»¶ï¼‰ï¼Œå·²ä¾¿ä¸‹æ¬¡è¯»å–</li>
</ul></li>
</ul>

<h4 id="toc_30">22ã€æœ‰äº›å›¾ç‰‡åŠ è½½çš„æ¯”è¾ƒæ…¢æ€ä¹ˆå¤„ç†ï¼Ÿä½ æ˜¯æ€ä¹ˆä¼˜åŒ–ç¨‹åºçš„æ€§èƒ½çš„ï¼Ÿ</h4>

<ul>
<li>1.å›¾ç‰‡ä¸‹è½½æ”¾åœ¨å¼‚æ­¥çº¿ç¨‹</li>
<li>2.å›¾ç‰‡ä¸‹è½½è¿‡ç¨‹ä¸­ä½¿ç”¨å ä½å›¾ï¼Œæé«˜ç”¨æˆ·çš„å¤©</li>
<li>3.å¦‚æœå›¾ç‰‡æ¯”è¾ƒå¤§ï¼Œå¯ä»¥è€ƒè™‘å¤šçº¿ç¨‹æ–­ç‚¹ä¸‹è½½ï¼ˆå¼€è¾Ÿå¤šä¸ªçº¿ç¨‹ä¸‹è½½ä¸€å¼ å›¾ç‰‡ï¼Œéœ€è¦æœåŠ¡å™¨è®¾ç½®è¯·æ±‚ä½“ä¿¡æ¯ï¼‰</li>
</ul>

<h4 id="toc_31">23ã€ä½ å®ç°è¿‡ä¸€ä¸ªæ¡†æ¶æˆ–è€…åº“ä»¥ä¾›åˆ«äººä½¿ç”¨å—ï¼Ÿå¦‚æœæœ‰ï¼Œè¯·è°ˆä¸€è°ˆæ„å»ºæ¡†æ¶æˆ–è€…åº“æ—¶å€™çš„ç»éªŒï¼›å¦‚æœæ²¡æœ‰ï¼Œè¯·è®¾æƒ³å’Œè®¾è®¡æ¡†æ¶çš„publicçš„APIï¼Œå¹¶æŒ‡å‡ºå¤§æ¦‚éœ€è¦å¦‚ä½•åšã€éœ€è¦æ³¨æ„ä¸€äº›ä»€ä¹ˆæ–¹é¢ï¼Œæ¥ä½¿åˆ«äººå®¹æ˜“åœ°ä½¿ç”¨ä½ çš„æ¡†æ¶ã€‚</h4>

<ul>
<li>1.æä¾›ç»™å¤–ç•Œçš„æ¥å£åŠŸèƒ½æ˜¯å¦å®ç”¨ã€å¤Ÿç”¨</li>
<li>2.åˆ«äººä½¿ç”¨æˆ‘çš„æ¡†æ¶æ—¶ï¼Œèƒ½ä¸èƒ½æ ¹æ®ç±»åã€æ–¹æ³•åå°±çŒœå‡ºæ¥å£çš„å…·ä½“ä½œç”¨</li>
<li>3.åˆ«äººè°ƒç”¨æ¥å£æ—¶ï¼Œæä¾›çš„å‚æ•°æ˜¯å¦å¤Ÿç”¨ã€è°ƒç”¨èµ·æ¥æ˜¯å¦ç®€å•</li>
<li>4.åˆ«äººä½¿ç”¨æˆ‘çš„æ¡†æ¶æ—¶ï¼Œè¦ä¸è¦å†å¯¼å…¥ä¾èµ–å…¶ä»–çš„æ¡†æ¶</li>
</ul>

<h4 id="toc_32">24ã€æ˜¯å¦å¯ä»¥æŠŠæ¯”è¾ƒè€—æ—¶çš„æ“ä½œæ”¾åœ¨NSNotificationCenterä¸­ï¼Ÿ</h4>

<ul>
<li>1.å¦‚æœåœ¨å¼‚æ­¥çº¿ç¨‹å‘çš„é€šçŸ¥ï¼Œé‚£ä¹ˆå¯ä»¥æ‰§è¡Œæ¯”è¾ƒè€—æ—¶çš„æ“ä½œ</li>
<li>2.å¦‚æœåœ¨ä¸»çº¿ç¨‹å‘çš„é€šçŸ¥ï¼Œé‚£ä¹ˆå°±ä¸å¯ä»¥æ‰§è¡Œæ¯”è¾ƒè€—æ—¶çš„æ“ä½œ<br/>
è¡¥å……ï¼šNSNotificationCenteré»˜è®¤æ˜¯ä¸»çº¿ç¨‹çš„ï¼Œä½†æ˜¯åœ¨å¼‚æ­¥çº¿ç¨‹å‘é€šçŸ¥ï¼Œé‚£ä¹ˆNSNotificationCenterå°±ä¼šå˜æˆå¼‚æ­¥çº¿ç¨‹</li>
</ul>

<h4 id="toc_33">25ã€SDWebImageå…·ä½“å¦‚ä½•å®ç°</h4>

<ul>
<li>1.åˆ©ç”¨NSOperationQueueå’ŒNSOperationä¸‹è½½å›¾ç‰‡ï¼Œè¿˜ä½¿ç”¨äº†GCDçš„ä¸€äº›å‡½æ•°ï¼ˆè§£ç GIFå›¾ç‰‡ï¼‰</li>
<li>2.åˆ©ç”¨URLä½œä¸ºkeyï¼ŒNSOperationä½œä¸ºvalue</li>
<li>3.åˆ©ç”¨URLä½œä¸ºkeyï¼ŒUIImageä½œä¸ºvalue</li>
</ul>

<h4 id="toc_34">26ã€æ€ä¹ˆè§£å†³sqliteé”å®šçš„é—®é¢˜</h4>

<ul>
<li>1.è®¾ç½®æ•°æ®åº“é”å®šçš„å¤„ç†å‡½æ•°</li>
</ul>

<pre><code class="language-text">å½“æ•°æ®åº“è¢«é”æ—¶ï¼Œä¼šè°ƒç”¨è¯¥æ–¹æ³•
//å‚æ•°1ä¼ å…¥æ•°æ®åº“ï¼Œ
//å‚æ•°2ä¼ å…¥å‡½æ•°å(åœ¨è¯¥å‡½æ•°ä¸­åšæ“ä½œ)
int sqlite3_busy_handler(sqlite3*, test);
</code></pre>

<ul>
<li><p>2.è®¾ç½®é”å®šæ—¶çš„ç­‰å¾…æ—¶é—´</p>
<pre><code class="language-text">int sqlite3_busy_timeout(sqlite3*, int ms);
</code></pre></li>
</ul>

<h4 id="toc_35">27ã€cocoaä¸­å¸¸è§å¯¹å‡ ç§å¤šçº¿ç¨‹çš„å®ç°ï¼Œå¹¶è°ˆè°ˆå¤šçº¿ç¨‹å®‰å…¨çš„å‡ ç§è§£å†³åŠæ³•åŠå¤šçº¿ç¨‹å®‰å…¨æ€ä¹ˆæ§åˆ¶ï¼Ÿ</h4>

<ul>
<li>1.åªåœ¨ä¸»çº¿ç¨‹åˆ·æ–°è®¿é—®UI</li>
<li>2.å¦‚æœè¦é˜²æ­¢èµ„æºæŠ¢å¤ºï¼Œå¾—ç”¨synchroizedè¿›è¡ŒåŠ é”ä¿æŠ¤</li>
<li>3.å¦‚æœå¼‚æ­¥æ“ä½œè¦ä¿è¯çº¿ç¨‹å®‰å…¨ç­‰é—®é¢˜ï¼Œå°½é‡ä½¿ç”¨GCDï¼ˆæœ‰äº›å‡½æ•°é»˜è®¤å°±æ˜¯å®‰å…¨çš„ï¼‰</li>
</ul>

<h4 id="toc_36">28ã€ä»€ä¹ˆæ˜¯run loopï¼Ÿ</h4>

<ul>
<li>1.runloopæ˜¯æ¶ˆæ¯å¾ªç¯ï¼Œå†…éƒ¨æœ‰å®šæ—¶æºå’Œè¾“å…¥æºæ¥è¿ä½œ</li>
<li>2.åœ¨åˆ›å»ºçš„ç¨‹åºä¸éœ€è¦æ˜¾ç¤ºçš„åˆ›å»ºrun loopï¼›æ¯ä¸ªçº¿ç¨‹ï¼ŒåŒ…æ‹¬ç¨‹åºçš„ä¸»çº¿ç¨‹ï¼ˆmain threadï¼‰éƒ½æœ‰ä¸ä¹‹ç›¸åº”çš„run loopå¯¹è±¡ï¼Œä¸»çº¿ç¨‹ä¼šè‡ªè¡Œåˆ›å»ºå¹¶è¿è¡Œrun loop</li>
<li>3.run loopå¤„ç†çš„è¾“å…¥äº‹ä»¶æœ‰ä¸¤ç§ä¸åŒçš„æ¥æºï¼šè¾“å…¥æºï¼ˆinput sourceï¼‰å’Œå®šæ—¶æºï¼ˆtimer sourceï¼‰</li>
<li>4.è¾“å…¥æºå¤„ç†ä¼ é€’å¼‚æ­¥æ¶ˆæ¯ï¼Œé€šå¸¸æ¥è‡ªäºå…¶ä»–çº¿ç¨‹æˆ–è€…ç¨‹åºã€‚å®šæ—¶æºåˆ™å¤„ç†ä¼ é€’åŒæ­¥æ¶ˆæ¯ï¼Œåœ¨ç‰¹å®šæ—¶é—´æˆ–è€…ä¸€å®šçš„æ—¶é—´é—´éš”å‘ç”Ÿ</li>
</ul>


		</div>

		

	</article>
 
	<article>
		 <header>
		  	<h1 class="entry-title"><a href="14719458588528.html">MKNetWorkç®€ä»‹</a></h1>
			<p class="meta"><time datetime="2016-08-23T17:50:58+08:00" 
			pubdate data-updated="true">2016/8/23</time></p>
		 </header>
	  	<div class="entry-content">
		  	
		  	<p>ç”¨æˆ·ç‰ˆæœ€æ–°ç‰ˆæœ¬æˆ‘å°†æ›¿æ¢æˆæœ€æ–°çš„ç½‘ç»œè¯·æ±‚å°è£…,è¿™æ¬¡æˆ‘å°†å°è£…ä¸€äº›å¸¸ç”¨çš„ä¸œè¥¿åˆ°ç½‘ç»œè¯·æ±‚ä¸­,è®©ç½‘ç»œè¯·æ±‚ç‹¬ç«‹å‡ºä¸€å±‚,é¿å…æ‰€æœ‰ç½‘ç»œè¯·æ±‚éƒ½å†™åœ¨æ§åˆ¶å™¨ä¸­.<br/>
ç›®å½•ç»“æ„:</p>

<ul>
<li><strong>MKBaseRequest</strong>     :æ‰€æœ‰çš„ç½‘ç»œè¯·æ±‚ç±»éœ€è¦ç»§æ‰¿äº <code>MKBaseRequest</code> ç±»ï¼Œæ¯ä¸€ä¸ª<code>MKBaseRequest</code> ç±»çš„å­ç±»ä»£è¡¨ä¸€ç§ä¸“é—¨çš„ç½‘ç»œè¯·æ±‚ã€‚
MKBaseRequest çš„åŸºæœ¬çš„æ€æƒ³æ˜¯æŠŠæ¯ä¸€ä¸ªç½‘ç»œè¯·æ±‚å°è£…æˆå¯¹è±¡ã€‚æ‰€ä»¥ä½¿ç”¨ MKNetWorkï¼Œä½ çš„æ¯ä¸€ç§è¯·æ±‚éƒ½éœ€è¦ç»§æ‰¿ MKBaseRequestç±»ï¼Œé€šè¿‡è¦†ç›–çˆ¶ç±»çš„ä¸€äº›æ–¹æ³•æ¥æ„é€ æŒ‡å®šçš„ç½‘ç»œè¯·æ±‚ã€‚æŠŠæ¯ä¸€ä¸ªç½‘ç»œè¯·æ±‚å°è£…æˆå¯¹è±¡å…¶å®æ˜¯ä½¿ç”¨äº†è®¾è®¡æ¨¡å¼ä¸­çš„ Command æ¨¡å¼ã€‚<br/>
æ¯ä¸€ç§ç½‘ç»œè¯·æ±‚ç»§æ‰¿ MKBaseRequest ç±»åï¼Œéœ€è¦ç”¨æ–¹æ³•è¦†ç›–ï¼ˆoverwriteï¼‰çš„æ–¹å¼ï¼Œæ¥æŒ‡å®šç½‘ç»œè¯·æ±‚çš„å…·ä½“ä¿¡æ¯ã€‚ä¾‹å¦‚:</li>
</ul>

<pre><code class="language-text">// é‡å†™æ¥å£åç§°
-(NSString *)requestUrl {
    return @&quot;geocode/regeo&quot;;
}
// é‡å†™è¯·æ±‚æ–¹å¼
-(MKRequestMethod)requestMethod {
    return MKRequestMethodGet;
}
// é‡å†™æƒ³è¦çš„æ”¾å›æ•°æ®è§£ææ–¹å¼
-(MKRequestSerializerType)requestSerializerType {
    return MKRequestSerializerTypeHTTP;
}
</code></pre>

<p>ç›®å‰æ²¡æœ‰æ·»åŠ è¿”å›å‚æ•°æ ¼å¼éªŒè¯,å¦‚æœ‰éœ€è¦å¯ä»¥åœ¨baseä¸­æ·»åŠ ,è®©ç»§æ‰¿è€…é‡å†™.</p>

<ul>
<li><strong>MKNetWorkAgent</strong>    :MKNetWorkAgentæœ€åŸºç¡€çš„ç½‘ç»œè¯·æ±‚å°è£…,ç›®å‰å°è£…çš„AFN,å¦‚æœ‰å¿…è¦å¯ä»¥æ›¿æ¢</li>
<li><strong>MKNetworkConfig</strong>   :ç”¨äºç»Ÿä¸€è®¾ç½®ç½‘ç»œè¯·æ±‚çš„æœåŠ¡å™¨å’Œ CDN çš„åœ°å€ã€‚åœ¨å®é™…ä¸šåŠ¡ä¸­ï¼Œæˆ‘ä»¬çš„æµ‹è¯•éœ€è¦åˆ‡æ¢ä¸åŒçš„æœåŠ¡å™¨åœ°å€æ¥æµ‹è¯•ã€‚ç»Ÿä¸€è®¾ç½®æœåŠ¡å™¨åœ°å€åˆ° MKNetworkConfig ç±»ä¸­ï¼Œä¹Ÿä¾¿äºæˆ‘ä»¬ç»Ÿä¸€åˆ‡æ¢æœåŠ¡å™¨åœ°å€ã€‚</li>
</ul>

<pre><code class="language-text"> - (void)setupRequestFilters {
    // è¿™é‡Œç”¨é«˜å¾·Apiè¿›è¡Œæµ‹è¯•
    NSString *appVersion = [[[NSBundle mainBundle] infoDictionary] objectForKey:@&quot;CFBundleShortVersionString&quot;];
    MKNetworkConfig *config = [MKNetworkConfig sharedInstance];
    config.baseUrl = @&quot;http://restapi.amap.com/v3/&quot;;
    MKUrlArgumentsFilter *urlFilter = [MKUrlArgumentsFilter filterWithArguments:@{@&quot;version&quot;: appVersion}];
    [config addUrlFilter:urlFilter];
}


- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
    
    [self setupRequestFilters];
    
    return YES;
} 
</code></pre>

<ul>
<li><strong>MKChainRequest</strong>    :ç”¨äºç®¡ç†æœ‰ç›¸äº’ä¾èµ–çš„ç½‘ç»œè¯·æ±‚ï¼Œå®ƒå®é™…ä¸Šæœ€ç»ˆå¯ä»¥ç”¨æ¥ç®¡ç†å¤šä¸ªæ‹“æ‰‘æ’åºåçš„ç½‘ç»œè¯·æ±‚ã€‚</li>
</ul>

<p>ä¾‹å¦‚ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªéœ€æ±‚ï¼Œéœ€è¦ç”¨æˆ·åœ¨æ³¨å†Œæ—¶ï¼Œå…ˆå‘é€æ³¨å†Œçš„Apiï¼Œç„¶å:</p>

<ol>
<li>å¦‚æœæ³¨å†ŒæˆåŠŸï¼Œå†å‘é€è¯»å–ç”¨æˆ·ä¿¡æ¯çš„Apiã€‚å¹¶ä¸”ï¼Œè¯»å–ç”¨æˆ·ä¿¡æ¯çš„Apiéœ€è¦ä½¿ç”¨æ³¨å†ŒæˆåŠŸè¿”å›çš„ç”¨æˆ·idå·ã€‚</li>
<li>å¦‚æœæ³¨å†Œå¤±è´¥ï¼Œåˆ™ä¸å‘é€è¯»å–ç”¨æˆ·ä¿¡æ¯çš„Apiäº†ã€‚</li>
</ol>

<p><strong>ä¸è¶³:</strong></p>

<ol>
<li>ç›®å‰æ²¡æœ‰åšç¼“å­˜,ç”±äºé¡¹ç›®ä¸­urlæ˜¯æ ¹æ®æ—¶é—´æˆ³,å¯ä»¥ä½¿ç”¨å·²æœ‰çš„ç¼“å­˜ä½œä¸ºè¡¥å…….ä¹Ÿå¯ä»¥å†™åˆ°ç½‘ç»œå±‚å°è£…ä¸­.</li>
<li>ä¸²è¡Œç½‘ç»œè¯·æ±‚å°è£…äº†,ä½†æ˜¯ç”±äºé»˜è®¤å°±æ˜¯å¹¶è¡Œç½‘ç»œè¯·æ±‚,æ‰€ä»¥æ²¡æœ‰å°è£….å¦‚æœéœ€è¦é™åˆ¶æœ€å¤§å¹¶å‘æ•°é‡,å¯ä»¥åœ¨<code>MKNetWorkAgent</code>ä¸­è®¾ç½®.</li>
<li>æœ¨æœ‰å¤§é‡æµ‹è¯•,å¯èƒ½å­˜åœ¨bug</li>
</ol>

<p><strong>æ³¨æ„äº‹é¡¹:</strong><br/>
åŸºæœ¬æ²¡æœ‰å•¥éœ€è¦æ³¨æ„çš„...,å…·ä½“ä½¿ç”¨æ–¹æ³•å¯ä»¥å‚è§Demo,å…³äºå‚æ•°å¯ä»¥å®ç°ä»£ç†æ–¹æ³•,ä¹Ÿå¯ä»¥ç›´æ¥ä¼ å‚.å¦‚æœç›´æ¥ä¼ å‚,ä¼šè¦†ç›–æ‰ä»£ç†ä¸­çš„æ•°æ®æº.  Demoä¸­å®ç°äº†ç®€å•çš„ä¸‹æ‹‰åŠ è½½ä¸­å…³äºpageçš„å°è£….æ‰©å±•åŠŸèƒ½æˆ‘éƒ½å†™æˆä»£ç†,ç„¶åéœ€è¦ä»€ä¹ˆåŠŸèƒ½å®ç°ä»¥ä¸‹å°±å¯ä»¥äº†,é¿å…<code>MKBaseRequest</code>ä¸­åŒ…å«å¤ªå¤šåŠŸèƒ½,è¿™æ ·å¯ä»¥å®ç°è‡ªå®šä¹‰ç»„æˆè‡ªå·±éœ€è¦çš„åŠŸèƒ½.</p>


		</div>

		

	</article>
  
	<div class="pagination">
	 <a class="prev" href="all_26.html">&larr; Older</a> 
<a href="archives.html">Blog Archives</a>
	 <a class="next" href="all_24.html">Newer &rarr;</a>  
	    
	</div>
</div>
 <aside class="sidebar"> 

	<section>
	  <h1>Categories</h1>
	  <ul id="recent_posts">
	  
	      <li class="post">
	        <a href="%E5%8E%9F%E7%90%86%E6%8E%A2%E7%A9%B6.html"><strong>åŸç†æ¢ç©¶&nbsp;(8)</strong></a>
	        
	        
	        
	      </li>
	  
	      <li class="post">
	        <a href="%E6%8A%80%E5%B7%A7.html"><strong>æŠ€å·§&nbsp;(34)</strong></a>
	        
	        
	        
	      </li>
	  
	      <li class="post">
	        <a href="%E6%95%99%E7%A8%8B.html"><strong>æ•™ç¨‹&nbsp;(23)</strong></a>
	        
	        
	        
	      </li>
	  
	      <li class="post">
	        <a href="%E9%81%87%E5%88%B0Bug.html"><strong>é‡åˆ°Bug&nbsp;(12)</strong></a>
	        
	        
	        
	      </li>
	  
	      <li class="post">
	        <a href="%E6%9D%82%E8%AE%B0.html"><strong>æ‚è®°&nbsp;(16)</strong></a>
	        
	        
	        
	      </li>
	  
	      <li class="post">
	        <a href="Swift.html"><strong>Swift&nbsp;(23)</strong></a>
	        
	        
	        
	      </li>
	  
	      <li class="post">
	        <a href="C/C++.html"><strong>C/C++&nbsp;(4)</strong></a>
	        
	        
	        
	      </li>
	  
	      <li class="post">
	        <a href="Linux.html"><strong>Linux&nbsp;(3)</strong></a>
	        
	        
	        
	      </li>
	  
	      <li class="post">
	        <a href="Documentation.html"><strong>Documentation&nbsp;(8)</strong></a>
	        
	        
	        
	      </li>
	  
	      <li class="post">
	        <a href="Java.html"><strong>Java&nbsp;(7)</strong></a>
	        
	        
	        
	      </li>
	  
	      <li class="post">
	        <a href="LeetCode.html"><strong>LeetCode&nbsp;(3)</strong></a>
	        
	        
	        
	      </li>
	   
	  </ul>
	</section>
	<section>
	  <h1>Recent Posts</h1>
	  <ul id="recent_posts">
	  
	      
		      <li class="post">
		        <a href="16267690953146.html">Flutter ä¸­ listView åµŒå¥— listView</a>
		      </li>
	     
	  
	      
		      <li class="post">
		        <a href="16261554677251.html">Flutterä¸­Rowä¸­çš„å­æ§ä»¶å·¦å³ä¸¤ç«¯å¯¹é½</a>
		      </li>
	     
	  
	      
		      <li class="post">
		        <a href="16246203092572.html">flutter å¤šç¯å¢ƒè®¾ç½®</a>
		      </li>
	     
	  
	      
		      <li class="post">
		        <a href="16189060168232.html">iOS å¼€å‘ç¯å¢ƒé…ç½®</a>
		      </li>
	     
	  
	      
		      <li class="post">
		        <a href="16158207840706.html">AR æ¨¡å‹æ ¼å¼è½¬æ¢å’Œå¯¼å…¥</a>
		      </li>
	     
	  
	      
	  
	      
	  
	      
	  
	      
	  
	      
	  
	      
	  
	      
	  
	      
	  
	      
	  
	      
	  
	      
	  
	      
	  
	      
	  
	      
	  
	      
	   
	  </ul>
	</section>
	
</aside> </div></div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 -  -
  <span class="credit">Powered by <a target="_blank" href="http://www.mweb.im">MWeb</a> &nbsp;&nbsp; Theme by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>



  














<style type="text/css">
  
/* PrismJS 1.14.0
https://prismjs.com/download.html#themes=prism-solarizedlight&languages=markup+css+clike+javascript */
/*
 Solarized Color Schemes originally by Ethan Schoonover
 http://ethanschoonover.com/solarized

 Ported for PrismJS by Hector Matos
 Website: https://krakendev.io
 Twitter Handle: https://twitter.com/allonsykraken)
*/

/*
SOLARIZED HEX
--------- -------
base03    #002b36
base02    #073642
base01    #586e75
base00    #657b83
base0     #839496
base1     #93a1a1
base2     #eee8d5
base3     #fdf6e3
yellow    #b58900
orange    #cb4b16
red       #dc322f
magenta   #d33682
violet    #6c71c4
blue      #268bd2
cyan      #2aa198
green     #859900
*/

code[class*="language-"],
pre[class*="language-"] {
  color: #657b83; /* base00 */
  font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  text-align: left;
  white-space: pre;
  word-spacing: normal;
  word-break: normal;
  word-wrap: normal;

  line-height: 1.5;

  -moz-tab-size: 4;
  -o-tab-size: 4;
  tab-size: 4;

  -webkit-hyphens: none;
  -moz-hyphens: none;
  -ms-hyphens: none;
  hyphens: none;
}

pre[class*="language-"]::-moz-selection, pre[class*="language-"] ::-moz-selection,
code[class*="language-"]::-moz-selection, code[class*="language-"] ::-moz-selection {
  background: #073642; /* base02 */
}

pre[class*="language-"]::selection, pre[class*="language-"] ::selection,
code[class*="language-"]::selection, code[class*="language-"] ::selection {
  background: #073642; /* base02 */
}

/* Code blocks */
pre[class*="language-"] {
  padding: 1em;
  margin: .5em 0;
  overflow: auto;
  border-radius: 0.3em;
}

:not(pre) > code[class*="language-"],
pre[class*="language-"] {
  background-color: #fdf6e3; /* base3 */
}

/* Inline code */
:not(pre) > code[class*="language-"] {
  padding: .1em;
  border-radius: .3em;
}

.token.comment,
.token.prolog,
.token.doctype,
.token.cdata {
  color: #93a1a1; /* base1 */
}

.token.punctuation {
  color: #586e75; /* base01 */
}

.namespace {
  opacity: .7;
}

.token.property,
.token.tag,
.token.boolean,
.token.number,
.token.constant,
.token.symbol,
.token.deleted {
  color: #268bd2; /* blue */
}

.token.selector,
.token.attr-name,
.token.string,
.token.char,
.token.builtin,
.token.url,
.token.inserted {
  color: #2aa198; /* cyan */
}

.token.entity {
  color: #657b83; /* base00 */
  background: #eee8d5; /* base2 */
}

.token.atrule,
.token.attr-value,
.token.keyword {
  color: #859900; /* green */
}

.token.function,
.token.class-name {
  color: #b58900; /* yellow */
}

.token.regex,
.token.important,
.token.variable {
  color: #cb4b16; /* orange */
}

.token.important,
.token.bold {
  font-weight: bold;
}
.token.italic {
  font-style: italic;
}

.token.entity {
  cursor: help;
}


pre[class*="language-"].line-numbers {
    position: relative;
    padding-left: 3.8em;
    counter-reset: linenumber;
}

pre[class*="language-"].line-numbers > code {
    position: relative;
    white-space: inherit;
}

.line-numbers .line-numbers-rows {
    position: absolute;
    pointer-events: none;
    top: 0;
    font-size: 100%;
    left: -3.8em;
    width: 3em; /* works for line-numbers below 1000 lines */
    letter-spacing: -1px;
    border-right: 1px solid #999;

    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;

}

    .line-numbers-rows > span {
        pointer-events: none;
        display: block;
        counter-increment: linenumber;
    }

        .line-numbers-rows > span:before {
            content: counter(linenumber);
            color: #999;
            display: block;
            padding-right: 0.8em;
            text-align: right;
        }

</style>
  
    


</body>
</html>